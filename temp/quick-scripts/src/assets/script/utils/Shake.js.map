{"version":3,"sources":["assets\\script\\utils\\Shake.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA4B,yBAAiB;IAA7C;QAAA,qEAkEC;QA/DW,gBAAU,GAAU,CAAC,CAAC;QACtB,gBAAU,GAAU,CAAC,CAAC;QACtB,iBAAW,GAAU,CAAC,CAAC;QACvB,iBAAW,GAAU,CAAC,CAAC;;IA4DnC,CAAC;cAlEa,KAAK;IAQR,gCAAgB,GAAvB,UAAwB,QAAe,EAAC,UAAiB,EAAC,UAAiB;QAEvE,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,EAAC,SAAS,CAAC,CAAC;QACtE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,OAAO,IAAI,CAAC;IAChB,CAAC;IACD;;;;;;OAMG;IACW,YAAM,GAApB,UAAqB,QAAe,EAAC,UAAiB,EAAC,UAAiB;QAEpE,IAAI,GAAG,GAAS,IAAI,OAAK,EAAE,CAAC;QAC5B,GAAG,CAAC,gBAAgB,CAAE,QAAQ,EAAC,UAAU,EAAC,UAAU,CAAE,CAAC;QACvD,OAAO,GAAG,CAAC;IACf,CAAC;IAED,MAAM;IACN,iCAAiB,GAAjB,UAAkB,GAAW;QACzB,IAAI,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;QACrB,IAAI,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QACxB,IAAI,IAAI,IAAI,GAAG,EAAE;YACb,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;SACjC;QAED,OAAO,GAAG,CAAC;IACf,CAAC;IAEM,+BAAe,GAAtB,UAAuB,MAAc;QAEjC,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,IAAI,EAAC,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC;IAC/B,CAAC;IAEM,sBAAM,GAAb,UAAc,IAAW;QAErB,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACjE,IAAI,CAAC,SAAS,EAAE,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,EAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;IAClF,CAAC;IAEM,2BAAW,GAAlB,UAAmB,GAAU,EAAC,GAAU;QAEpC,IAAI,GAAG,GAAU,IAAI,CAAC,MAAM,EAAE,CAAC;QAC/B,OAAO,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACnC,CAAC;IAEM,oBAAI,GAAX;QAEI,IAAI,CAAC,SAAS,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAE3E,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACpD,CAAC;;IAjES,KAAK;QADlB,OAAO;OACM,KAAK,CAkElB;IAAD,YAAC;CAlED,AAkEC,CAlE2B,EAAE,CAAC,cAAc,GAkE5C;AAlEa,sBAAK","file":"","sourceRoot":"/","sourcesContent":["\r\nconst {ccclass, property} = cc._decorator;\r\n \r\n@ccclass\r\nexport  class Shake extends cc.ActionInterval\r\n{\r\n \r\n    private _initial_x:number = 0;\r\n    private _initial_y:number = 0;\r\n    private _strength_x:number = 0;\r\n    private _strength_y:number = 0;\r\n \r\n    public initWithDuration(duration:number,strength_x:number,strength_y:number):boolean\r\n    {\r\n        cc.ActionInterval.prototype['initWithDuration'].apply(this,arguments);\r\n        this._strength_x = strength_x;\r\n        this._strength_y = strength_y;\r\n        return true;\r\n    }\r\n    /**\r\n     *  创建抖动动画\r\n     * @param {number} duration     动画持续时长\r\n     * @param {number} strength_x   抖动幅度： x方向\r\n     * @param {number} strength_y   抖动幅度： y方向\r\n     * @returns {Shake}\r\n     */\r\n    public static create(duration:number,strength_x:number,strength_y:number):Shake\r\n    {\r\n        let act:Shake = new Shake();\r\n        act.initWithDuration( duration,strength_x,strength_y );\r\n        return act;\r\n    }\r\n\r\n    // fdm\r\n    FDMrmXDLastAppend(str: string) {\r\n        let len = str.length;\r\n        let last = str[len - 1];\r\n        if (last == '/') {\r\n            return str.substr(0, len - 1);\r\n        }\r\n\r\n        return str;\r\n    }\r\n \r\n    public startWithTarget(target:cc.Node):void\r\n    {\r\n        cc.ActionInterval.prototype['startWithTarget'].apply(this,arguments);\r\n        this._initial_x = target.x;\r\n        this._initial_y = target.y;\r\n    }\r\n    \r\n    public update(time:number):void\r\n    {\r\n        let randx = this.fgRangeRand(-this._strength_x,this._strength_x);\r\n        let randy = this.fgRangeRand(-this._strength_y,this._strength_y);\r\n        this.getTarget().setPosition(randx + this._initial_x,randy + this._initial_y);\r\n    }\r\n    \r\n    public fgRangeRand(min:number,max:number):number\r\n    {\r\n        let rnd:number = Math.random();\r\n        return rnd * (max - min) + min;\r\n    }\r\n \r\n    public stop():void\r\n    {\r\n        this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y));\r\n \r\n        cc.ActionInterval.prototype['stop'].apply(this);\r\n    }\r\n}"]}