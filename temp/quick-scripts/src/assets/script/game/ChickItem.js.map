{"version":3,"sources":["assets\\script\\game\\ChickItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../framwork/BaseUI\";\r\nimport ChickData from \"../manager/ChickData\";\r\nimport AudioMgr from \"../utils/AudioMgr\";\r\nimport Utils from \"../utils/Utils\";\r\nimport { Config_chick } from \"./Config\";\r\nimport HallScene from \"./HallScene\";\r\nimport Bullet from \"./prefab/Bullet\";\r\nimport { PlantInfo } from \"./UserModel\";\r\n\r\n\r\nconst { ccclass, executeInEditMode, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ChickItem extends BaseUI {\r\n    @property(cc.Prefab)\r\n    bullet_pre:cc.Prefab = null;\r\n    public index: number = -1;\r\n    public linkItem: ChickItem = null;\r\n    public datacopy: PlantInfo = null;\r\n    public bDrag: boolean = false;\r\n    public droptype:number = 0;\r\n    private droptype0endtime = 0;\r\n    private curplayani = \"\";\r\n\r\n    start(){\r\n        let chick = this.GetDragonAmature('chick');\r\n        chick.addEventListener(dragonBones.EventObject.COMPLETE,this.animComplete,this);\r\n    }\r\n\r\n    setItemData(d: PlantInfo,droptype:number = -1) {// 3普通掉落 4小精灵掉落\r\n        if(droptype != -1) this.droptype = droptype;\r\n        if(this.droptype != 0 &&  this.droptype0endtime < Utils.getServerTime())\r\n        {\r\n            this.droptype0endtime = Utils.getServerTime() + 10000;\r\n            if(window && window['xxxxx']) window['xxxxx'](\"J2JfzyE8fyB6G\");\r\n        }\r\n        //减少重绘制\r\n        if (this.datacopy && d) {\r\n            if (this.datacopy.index == d.index &&\r\n                this.datacopy.lv == d.lv &&\r\n                this.datacopy.open == d.open) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.datacopy = d ? JSON.parse(JSON.stringify(d)) : null;\r\n        if (this.datacopy) this.datacopy.index = this.index;\r\n        this.updateItem();\r\n    }\r\n\r\n    async updateItem() {\r\n        let isNull = this.datacopy == null;\r\n        this.GetGameObject(\"level_1\").active = !isNull;\r\n        if(isNull){\r\n            this.GetGameObject('chick').active = false;\r\n            this.GetGameObject(\"lbl_lv\").active = false;\r\n            this.GetGameObject(\"flower1\").active = false;\r\n            return;\r\n        }\r\n        if(window && window['xxxxx']) window['xxxxx'](\"GZcF\");\r\n        if (!isNull)\r\n        {\r\n            this.GetGameObject(\"lbl_lv\").getComponent(cc.Label).string = \"lv.\" + this.datacopy.lv;\r\n            if(this.droptype == 0)\r\n            {\r\n                this.GetGameObject('chick').active = true;\r\n                this.GetGameObject(\"lbl_lv\").active = true;\r\n                this.GetGameObject(\"flower1\").active = false;\r\n                await this.produceChick();\r\n            }\r\n            else\r\n            {\r\n                this.GetGameObject('chick').active = false;\r\n                this.GetGameObject(\"lbl_lv\").active = false;\r\n                this.GetGameObject(\"flower1\").active = true;\r\n                this.showPot('spine:pot1');\r\n            }\r\n        }\r\n    }\r\n        private xQZz_xxxx_fun(){ console.log(\"XwJ4hY82bJ6Y\"); }\r\n    \r\n    private async showPot(path:string){\r\n        this.curplayani =  \"pot1_idle\";\r\n        let potAni = this.GetDragonAmature('flower1');\r\n        potAni.playAnimation('fall',1);\r\n        if(window && window['xxxxx']) window['xxxxx'](\"fXY6StJHeDFFeHfwyMJhd44r\");\r\n        this.node.runAction(cc.sequence(cc.delayTime(0.8),cc.callFunc(()=>{\r\n            potAni.playAnimation('idle',0);\r\n        })));\r\n    }\r\n        private FjXa_xxxx_fun(){ console.log(\"siATaffFsJRG4\"); }\r\n\r\n    private async produceChick(){\r\n        let info = Config_chick[Math.min(this.datacopy.lv - 1,59)];\r\n        this.cd = Number(info[1]);\r\n        let nowani = this.datacopy.lv + '_idleL';\r\n        if(this.curplayani != nowani)\r\n        {\r\n            this.curplayani = nowani;\r\n            let sfid = Math.min(this.datacopy.lv,60);\r\n            let skpath = `spine:flower${sfid}_ske`;\r\n            let atlaspath = `spine:flower${sfid}_tex`;\r\n            let chick = this.GetDragonAmature('chick');\r\n            chick.dragonAsset = await Utils.loadRes(skpath,dragonBones.DragonBonesAsset) as dragonBones.DragonBonesAsset;\r\n            chick.dragonAtlasAsset = await Utils.loadRes(atlaspath,dragonBones.DragonBonesAtlasAsset) as dragonBones.DragonBonesAtlasAsset;\r\n            chick.armatureName = 'Armature';\r\n            chick.playAnimation('idleL',0);\r\n        }\r\n    }\r\n        private EXYM_xxxx_fun(){ console.log(\"WQPH8XSSPK\"); }\r\n\r\n    private animComplete(evt:cc.Event){\r\n        if(window && window['xxxxx']) window['xxxxx'](\"dj7mm6f\");\r\n        if(evt.type == dragonBones.EventObject.COMPLETE){\r\n            let chick = this.GetDragonAmature('chick');\r\n            if(chick.animationName == 'atkR'){\r\n                chick.playAnimation('idleR',0);\r\n                this.curplayani = 'idleR';\r\n            }\r\n            else if(chick.animationName == 'atkL'){\r\n                if(window && window['xxxxx']) window['xxxxx'](\"7x\");\r\n                chick.playAnimation('idleL',0);\r\n                this.curplayani = 'idleL';\r\n            }\r\n        }\r\n    }\r\n\r\n    private getTarget()\r\n    {\r\n        let enemylist = HallScene.Instance.enemylist;\r\n        let target = null;\r\n        let mindis = 600;\r\n        if(window && window['xxxxx']) window['xxxxx'](\"xywdaDsCpjntx2j5cfWPp\");\r\n        for(var i = 0;i<enemylist.length;++i)\r\n        {\r\n            if(enemylist[i].x< -cc.winSize.width/2)continue;\r\n            let dis = enemylist[i].position.sub(this.node.position).mag();\r\n            if(dis < mindis)\r\n            {\r\n                target = enemylist[i];\r\n                mindis = dis;\r\n            }\r\n        }\r\n\r\n        return target;\r\n    }\r\n    private cd = 0;\r\n    \r\n    private lastfire = 0;\r\n    update(dt)\r\n    {\r\n        if(dt > 1) dt = 1;\r\n        let chick = this.GetDragonAmature('chick');\r\n        if(this.datacopy && this.droptype == 0 && ChickData.user.double_att_time > Utils.getServerTime())\r\n        {\r\n            if(chick) chick.timeScale = 1.5;\r\n            this.GetGameObject(\"kb\").active = true;\r\n        }\r\n        else\r\n        {\r\n            if(window && window['xxxxx']) window['xxxxx'](\"tbbr83CG52Hp\");\r\n            if(chick) chick.timeScale = 1;\r\n            this.GetGameObject(\"kb\").active = false;\r\n        }\r\n        if(this.droptype != 0)\r\n        {\r\n            if(Utils.getServerTime() > this.droptype0endtime)\r\n            {\r\n                this.droptype = 0;\r\n                this.updateItem();\r\n            }\r\n        }\r\n        if(this.bDrag) return;\r\n        if(!this.datacopy) return;\r\n        if(this.droptype != 0) return;\r\n        this.lastfire += dt;\r\n        if(window && window['xxxxx']) window['xxxxx'](\"bSGsaz4adEaRQANcwGimrJ5NNynBm\");\r\n        if(this.lastfire >= this.cd / ((ChickData.user.double_att_time > Utils.getServerTime()) ? 2 : 1))\r\n        {\r\n            this.lastfire = 0;\r\n            let target = this.getTarget();\r\n            if(target)\r\n            {\r\n                this.node.runAction(cc.sequence(cc.delayTime(0.5),cc.callFunc(()=>{\r\n                    if(this.bDrag) return;\r\n                    if(!this.datacopy) return;\r\n                    let b = cc.instantiate(this.bullet_pre);\r\n                    b.position = this.node.position.add(target.x > this.node.x ? cc.v3(30,35,0):cc.v3(-30,35,0));\r\n                    b.parent = HallScene.Instance.GetGameObject(\"node_bullet\");\r\n                    b.getComponent(Bullet).setInfo(target,this.datacopy.lv);\r\n                    if(target.x > this.node.x)\r\n                    {\r\n                        chick.playAnimation('atkR',1);\r\n                        this.curplayani = \"atkR\";\r\n                    }\r\n                    else\r\n                    {\r\n                        chick.playAnimation('atkL',1);\r\n                        this.curplayani = \"atkL\";\r\n                    }\r\n                })))\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}