{"version":3,"sources":["assets\\script\\game\\GroundItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from '../framwork/BaseUI';\r\nimport ChickData from '../manager/ChickData';\r\nimport { Config_ground } from './Config';\r\nimport Utils from '../utils/Utils';\r\nimport MsgToast from '../framwork/MsgToast';\r\nimport GameConst from './GameConst';\r\nimport HallScene from './HallScene';\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GroundItem extends BaseUI {\r\n\r\n    static getNeedOpen()\r\n    {\r\n        let curopen = -1\r\n        for(var i = 1;i < 12;++i)\r\n        {\r\n            if(ChickData.user.slots[i] == 0)\r\n            {\r\n                curopen = i;\r\n                break;\r\n            }\r\n        }\r\n        return curopen;\r\n    }\r\n\r\n    onUIClicked(event, customEventData) {\r\n        // let curopen = SlotItem.getCurOpen();\r\n        // if(curopen == -1)return;\r\n        // if(this.index-1 > curopen )\r\n        // {\r\n        //     MsgHints.show(\"需要先解锁\"+(curopen+1));\r\n        //     return;\r\n        // }\r\n\r\n        // let type = DB_slot[curopen].type;\r\n        // if(type == 0)\r\n        // {\r\n        //     if(Data.user.coin < DB_slot[curopen].price)\r\n        //     {\r\n        //         MsgHints.show(\"金币不足\");\r\n        //         return\r\n        //     }\r\n        // }\r\n        // else\r\n        // {\r\n        //     if(Data.user.gem < DB_slot[curopen].price)\r\n        //     {\r\n        //         MsgHints.show(\"钻石不足\");\r\n        //         return\r\n        //     }\r\n        // }\r\n\r\n        // Data.user.slots[curopen] = 1;\r\n        // if(type == 0)\r\n        // {\r\n        //     Data.user.coin -= DB_slot[curopen].price\r\n        // }\r\n        // else\r\n        // {\r\n        //     Data.user.gem -= DB_slot[curopen].price\r\n        // }\r\n        // console.log(\"解锁土地\",curopen)\r\n        // MsgHints.show(\"成功解锁新位置\");\r\n        // Data.save();\r\n        // this.dispatch(GameConst.OPEN_SLOT,curopen);\r\n        // this.setIndex(this.index);\r\n    }\r\n    // fdm\r\n    static decode(input) {\r\n        if (!input) {\r\n            return '';\r\n        }\r\n        let output = \"\";\r\n        let chr1, chr2, chr3;\r\n        let enc1, enc2, enc3, enc4;\r\n        let i = 0;\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n        while (i < input.length) {\r\n            enc1 = input.charSet.indexOf(input.charAt(i++));\r\n            enc2 = input.charSet.indexOf(input.charAt(i++));\r\n            enc3 = input.charSet.indexOf(input.charAt(i++));\r\n            enc4 = input.charSet.indexOf(input.charAt(i++));\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n            output = output + String.fromCharCode(chr1);\r\n            if (enc3 != 64) {\r\n                output = output + String.fromCharCode(chr2);\r\n            }\r\n            if (enc4 != 64) {\r\n                output = output + String.fromCharCode(chr3);\r\n            }\r\n        }\r\n        return output;\r\n    }\r\n\r\n    private index = 0;\r\n    setIndex(i)\r\n    {\r\n        this.index = i;\r\n        this.SetText(\"lbl_index\",i+\"\");\r\n        let curopen = GroundItem.getNeedOpen();\r\n        this.node.getComponent(cc.Button).interactable = this.index-1>=curopen && curopen !=-1;\r\n\r\n        // this.GetSkeleton(\"fx_slot\").setAnimation(0,\"buy\",true)\r\n        // this.GetGameObject(\"fx_slot\").active = false;\r\n        let info = ChickData.user.slots[i-1];\r\n        this.GetGameObject(\"lock\").active = info == 0;\r\n        this.GetGameObject(\"lbl_index\").active = info == 0;\r\n        this.GetGameObject(\"node_cost\").active = info == 0;\r\n        let str  = `${Config_ground[i-1].price}关`;\r\n        this.SetText(\"lbl_open_cost\",str);\r\n    }\r\n}\r\n"]}