{"version":3,"sources":["assets\\script\\game\\prefab\\NewPlantUI.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAC3C,mDAA8C;AAC9C,2CAAsC;AACtC,iDAA4C;AAC5C,2CAAsC;AACtC,4BAAsC;AAGhC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAwC,8BAAM;IAA9C;QAAA,qEAsEC;QApEW,UAAI,GAAG,CAAC,CAAC;QACT,SAAG,GAAG,CAAC,CAAC;;IAmEpB,CAAC;IAlES,0BAAK,GAAX;;;;;;wBAEQ,EAAE,GAAG,cAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAA;wBACzB,IAAI,GAAG,cAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;wBAC5C,OAAO,GAAG,kBAAa,CAAC,EAAE,GAAC,EAAE,CAAC,CAAC;wBACnC,mDAAmD;wBACnD,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAC,KAAK,GAAC,EAAE,CAAC,CAAC;wBAEhC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,CAAA;wBAE3C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;wBACjB,IAAG,OAAO,EACV;4BACI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;4BACrB,uCAAuC;yBAC1C;wBACD,IAAI,CAAC,OAAO,CAAC,UAAU,EAAC,eAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;wBAE9C,MAAM,GAAG,iBAAe,EAAE,SAAM,CAAC;wBACjC,SAAS,GAAG,iBAAe,EAAE,SAAM,CAAC;wBACpC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;wBAC9C,KAAA,QAAQ,CAAA;wBAAe,qBAAM,eAAK,CAAC,OAAO,CAAC,MAAM,EAAC,WAAW,CAAC,gBAAgB,CAAC,EAAA;;wBAA/E,GAAS,WAAW,IAAG,SAAwF,CAAA,CAAC;wBAChH,KAAA,QAAQ,CAAA;wBAAoB,qBAAM,eAAK,CAAC,OAAO,CAAC,SAAS,EAAC,WAAW,CAAC,qBAAqB,CAAC,EAAA;;wBAA5F,GAAS,gBAAgB,IAAG,SAAqG,CAAA,CAAC;wBAClI,QAAQ,CAAC,YAAY,GAAG,UAAU,CAAC;wBACnC,QAAQ,CAAC,aAAa,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;wBAElC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;;;;;KACpC;IAED,8BAAS,GAAT;QAEI,kBAAQ,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;QACjC,iBAAM,SAAS,WAAE,CAAC;IACtB,CAAC;IAED,iCAAY,GAAZ,UAAa,KAAK,EAAE,eAAe;QAC/B,IAAI,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC;QAChC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrC,QAAQ,OAAO,EAAE;YACb,KAAK,SAAS;gBACV;oBACI,IAAI,MAAI,GAAG,IAAI,CAAC,IAAI,CAAA;oBACpB,IAAI,KAAG,GAAG,IAAI,CAAC,GAAG,CAAC;oBAEnB,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBACpC,eAAK,CAAC,OAAO,CAAC,CAAC,EAAC,IAAI,CAAC,IAAI,EAAC,WAAW,EAAC,eAAK,CAAC,YAAY,CAAC,CAAC,EAAC,EAAE,CAAC,EAAC,GAAG,EAAC,UAAC,CAAC;wBACjE,IAAG,CAAC,EACJ;4BACI,cAAI,CAAC,IAAI,CAAC,IAAI,IAAI,MAAI,CAAC;yBAC1B;oBACL,CAAC,CAAC,CAAA;oBACF,IAAG,KAAG,GAAC,CAAC,EACR;wBACI,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;wBACnC,eAAK,CAAC,OAAO,CAAC,CAAC,EAAC,IAAI,CAAC,IAAI,EAAC,UAAU,EAAC,eAAK,CAAC,YAAY,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,EAAC,UAAC,CAAC;4BAC9D,IAAG,CAAC,EACJ;gCACI,cAAI,CAAC,IAAI,CAAC,GAAG,IAAI,KAAG,CAAC;6BACxB;wBACL,CAAC,CAAC,CAAA;qBACL;oBACD,IAAI,CAAC,OAAO,EAAE,CAAC;iBAClB;gBACD,MAAM;SACb;IACL,CAAC;IArEgB,UAAU;QAD9B,OAAO;OACa,UAAU,CAsE9B;IAAD,iBAAC;CAtED,AAsEC,CAtEuC,gBAAM,GAsE7C;kBAtEoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport AdCenter from \"../../manager/AdCenter\";\r\nimport Data from \"../../manager/Data\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { DB_levelupGem } from \"../DB\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewPlantUI extends BaseUI {\r\n\r\n    private coin = 0;\r\n    private gem = 0;\r\n    async start () {\r\n\r\n        let lv = Data.user.GetMaxLv()\r\n        let coin = Data.user.BuyPrice(Math.max(1,lv-3));\r\n        let levelup = DB_levelupGem[lv+\"\"];\r\n        // this.GetGameObject(\"node_gem\").active = levelup;\r\n        this.SetText(\"lbl_lv\",\"等级 \"+lv);\r\n\r\n        AudioMgr.Instance().playSFX(\"unlock_plant\")\r\n\r\n        this.coin = coin;\r\n        if(levelup)\r\n        {\r\n            this.gem = levelup[1]\r\n            // this.SetText(\"lbl_gem\",this.gem+\"\");\r\n        }\r\n        this.SetText(\"lbl_coin\",Utils.formatNumber(coin));\r\n\r\n        let skpath = `spine:flower${lv}_ske`;\r\n        let atlaspath = `spine:flower${lv}_tex`;\r\n        let armature = this.GetDragonAmature(\"chick\");\r\n        armature.dragonAsset = await Utils.loadRes(skpath,dragonBones.DragonBonesAsset) as dragonBones.DragonBonesAsset;\r\n        armature.dragonAtlasAsset = await Utils.loadRes(atlaspath,dragonBones.DragonBonesAtlasAsset) as dragonBones.DragonBonesAtlasAsset;\r\n        armature.armatureName = \"Armature\";\r\n        armature.playAnimation('idleL',0);\r\n\r\n        AdCenter.Instance().showGridAd();\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        AdCenter.Instance().hideGridAd();\r\n        super.onDestroy();\r\n    }\r\n\r\n    onBtnClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        AudioMgr.Instance().playSFX(\"click\");\r\n        switch (btnName) {\r\n            case \"btn_get\":\r\n                {\r\n                    let coin = this.coin\r\n                    let gem = this.gem;\r\n                    \r\n                    AudioMgr.Instance().playSFX(\"coin\");\r\n                    Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\r\n                        if(b)\r\n                        {\r\n                            Data.user.coin += coin;\r\n                        }  \r\n                    })\r\n                    if(gem>0)\r\n                    {\r\n                        AudioMgr.Instance().playSFX(\"gem\");\r\n                        Utils.flyAnim(1,this.node,\"icon_gem\",Utils.getRandomInt(2,4),85,(b)=>{\r\n                            if(b)\r\n                            {\r\n                                Data.user.gem += gem;\r\n                            }  \r\n                        })\r\n                    }\r\n                    this.closeUI();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}