{"version":3,"sources":["assets\\script\\game\\prefab\\DropChickView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport AdCenter from \"../../manager/AdCenter\";\r\nimport ChickData from \"../../manager/ChickData\";\r\nimport WxCenter from \"../../manager/WxCenter\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { Config_dropAwwards } from \"../Config\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DropChickView extends BaseUI {\r\n    superPot = [];\r\n    start () {\r\n        AdCenter.Instance().showGridAd();\r\n        Utils.playBreath(this.GetGameObject('btn_ad'))\r\n        WxCenter.aldReport('AirdropShow','show');\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        AdCenter.Instance().hideGridAd();\r\n        super.onDestroy();\r\n    }\r\n    // fdm\r\n    public fdmClearRes(url: string,cotext:any) {\r\n        for (let reg of cotext.ignoreResArr) {\r\n            if (url.match(reg)) return;\r\n        }\r\n        if (url.indexOf('.fnt') > -1) {\r\n            cotext.Text.unregisterBitmapFont(url.replace(/^.*\\/(.*)\\.fnt$/g, '$1'));\r\n        } else if (url.indexOf('.sk') > -1) {\r\n            cotext.clearTemplet(url);\r\n            cotext.clearSkeleton(url);\r\n        } else if (url.indexOf('.ani') > -1) {\r\n            for (let ani in cotext.Animation.framesMap) {\r\n                if (ani.indexOf(url) > -1) {\r\n                    cotext.Animation.framesMap[ani] = null;\r\n                }\r\n            }\r\n        }\r\n        let res = cotext.Loader.getRes(url);\r\n        if (res && res.dispose) res.dispose();\r\n        if (res && res.destroy) res.destroy();\r\n        cotext.Loader.clearRes(url);\r\n    }\r\n\r\n    private getBigPot(db:boolean = false){\r\n        var t =  ChickData.user.getLvlMax();\r\n        var n = Config_dropAwwards[t+\"\"][1];\r\n        let len = db ? 8 : 4;\r\n        let pots = [];\r\n        for (var o = 0; o < len; o++){\r\n            pots.push(n);\r\n        } \r\n        return pots;\r\n    }\r\n    \r\n    onUIClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        AudioMgr.Instance().playMX(\"click\");\r\n        switch (btnName) {\r\n            case \"btn_close\":\r\n                this.closeUI();\r\n                break;\r\n            case \"btn_normal\":\r\n                WxCenter.aldReport('AirdropClick','click');\r\n                let spt = this.getBigPot();\r\n                ChickData.user.DropGiftPts = ChickData.user.DropGiftPts.concat(spt);\r\n                this.closeUI();\r\n                break;\r\n            case \"btn_ad\":\r\n                WxCenter.aldReport('AirdropClick','click');\r\n                AdCenter.Instance().play((b)=>{\r\n                    if(b)\r\n                    {\r\n                        let spt = this.getBigPot(true);\r\n                        ChickData.user.DropGiftPts = ChickData.user.DropGiftPts.concat(spt);\r\n                        this.closeUI();\r\n                    }\r\n                });\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n"]}