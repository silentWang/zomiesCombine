{"version":3,"sources":["assets\\script\\game\\prefab\\Enemy.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport Data from \"../../manager/Data\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { DB_zombie, DB_plant } from \"../DB\";\r\nimport HallScene from \"../HallScene\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Enemy extends BaseUI {\r\n\r\n\r\n    @property(cc.Prefab)\r\n    getcoin_pre:cc.Prefab = null;\r\n\r\n    private maxhp = 0\r\n    private hp = 0;\r\n    private money = 0;\r\n\r\n    public getBossMoney()\r\n    {\r\n        if(this.type == 2)\r\n        {\r\n            if(Data.user.double_income_time > Utils.getServerTime())\r\n            {\r\n                this.money *= 2;\r\n            }\r\n            return (this.maxhp - this.hp)/this.maxhp * this.money;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    private type = 0;//0 普通 1 小boss 2大boss\r\n    async setID(id:number,boss:boolean)//是否boss\r\n    {\r\n        this.type = boss?1:0;\r\n        let info = DB_zombie[id+\"\"];\r\n        if(id > 100)\r\n        {\r\n            id -= 100;\r\n            this.type = 2;\r\n        }\r\n\r\n        if(id > 52) id = Utils.getRandomInt(1,52);\r\n\r\n        // this.GetGameObject(\"boss\").active = this.type == 2;\r\n        this.GetGameObject('sp').scale = this.type == 2 ? 1 : 0.74;\r\n        this.sped = info[2] * this.base_speed;\r\n        this.maxhp = info[1];\r\n        this.hp = this.maxhp;\r\n        this.money = Math.floor(info[3] * Utils.getRandom(0.8,1.2));\r\n\r\n        // console.log(this.type == 2?\"boss\":\"e\",this.maxhp,this.money,\"====\")\r\n        this.node.position = HallScene.Instance.path[0];\r\n        this.node.scale = this.type == 0 ? .8 : 1;\r\n        // this.GetGameObject(\"sp\").scaleX = 0.5;\r\n        AudioMgr.Instance().playSFX('chuxian')\r\n        let skpath = `spine:enemy${id}_ske`;\r\n        let atlaspath = `spine:enemy${id}_tex`;\r\n        let armature = this.GetDragonAmature(\"sp\");\r\n        armature.dragonAsset = await Utils.loadRes(skpath,dragonBones.DragonBonesAsset) as dragonBones.DragonBonesAsset;\r\n        armature.dragonAtlasAsset = await Utils.loadRes(atlaspath,dragonBones.DragonBonesAtlasAsset) as dragonBones.DragonBonesAtlasAsset;\r\n        armature.armatureName = \"Armature\";\r\n        armature.playAnimation('run',0);\r\n        this.GetGameObject(\"New ProgressBar\").opacity = 0;\r\n    }\r\n\r\n    hit(plantlv:number)\r\n    {\r\n        if(this.hp <= 0)return;\r\n        let info = DB_plant[plantlv-1];\r\n        let skill = String(info[3]).split(\"|\");\r\n        let skilltype = Number(skill[0]);\r\n        let skillvalue = Number(skill[1]);\r\n        let power = Number(info[2])\r\n        let bbj = false;\r\n        let isskill = false;\r\n        if(Utils.getRandom(0,100) < skillvalue)\r\n        {\r\n            if(skilltype == 1)//减速\r\n            {\r\n                this.slowdown();\r\n                isskill = true;\r\n            }\r\n            else if(skilltype == 2)//双倍伤害\r\n            {\r\n                power *= 2;\r\n                bbj = true;\r\n                isskill = true;\r\n            }\r\n            else if(skilltype ==3)//冰冻\r\n            {\r\n                isskill = true;\r\n                this.frozen();\r\n            }\r\n        }\r\n        this.hp -= power;\r\n        this.hp = Math.max(this.hp,0)\r\n        this.SetProgressBar(\"New ProgressBar\",this.hp/this.maxhp);\r\n        this.GetGameObject(\"New ProgressBar\").stopAllActions();\r\n        this.GetGameObject(\"New ProgressBar\").opacity = 255;\r\n        this.GetGameObject(\"New ProgressBar\").runAction(cc.sequence(cc.delayTime(1),cc.fadeTo(0.2,0)))\r\n        if(!isskill) AudioMgr.Instance().playSFX('hit');\r\n        if(bbj){\r\n            this.showWLBaoji(power,Utils.getRandom(0,1)>0.5);\r\n        }\r\n        else{\r\n            this.showFSHurt(power,Utils.getRandom(0,1)>0.5);\r\n        }\r\n        if(this.hp <= 0)\r\n        {\r\n            HallScene.Instance.removeenemy(this.node,false);\r\n            this.GetGameObject(\"sp\").runAction(cc.sequence(cc.delayTime(0.5),cc.fadeTo(.2,0),cc.callFunc(()=>{\r\n                this.node.removeFromParent(true);\r\n            })))\r\n            if(Data.user.double_income_time > Utils.getServerTime())\r\n            {\r\n                this.money *= 2;\r\n            }\r\n\r\n            //daboss界面加钱\r\n            if(this.type != 2)\r\n            {\r\n                let node = cc.instantiate(this.getcoin_pre);\r\n                node.parent = this.node.parent;\r\n                node.getChildByName(\"lbl_add_coin\").getComponent(cc.Label).string = Utils.formatNumber(this.money);\r\n                node.position = this.node.position.add(cc.v3(0,50,0));\r\n                node.zIndex = 1000;\r\n                node.scale = 0.5\r\n                Data.user.coin+=this.money;\r\n                node.runAction(cc.sequence(cc.spawn(cc.scaleTo(0.2,1.3),cc.moveBy(0.2,0,80)),cc.delayTime(.8),cc.spawn(cc.moveBy(0.5,50),cc.fadeTo(0.5,50)),cc.removeSelf()));\r\n            }\r\n\r\n            // if(this.type == 2)\r\n            //     this.playSkAni(\"spine/other/death\",\"animation\",this.node,cc.v3(0,75,0),0.8)\r\n            // else\r\n            this.playSkAni(\"spine:other/zhuoshao\",\"effect\",this.node,cc.v3(0,75,0),1).then((node)=>{\r\n                node.scale =2 ;\r\n            });\r\n        }\r\n        else\r\n        {\r\n            // this.GetGameObject(\"hit\").getComponent(cc.Animation).play(\"hit\");\r\n            this.playSkAni(\"spine:other/jizhong\",\"animation\",this.node,cc.v3(0,75,0),1)\r\n            this.redendtime = Utils.getServerTime() + 300;\r\n        }\r\n        // this.GetGameObject(\"hit\").getComponent(cc.Animation).play(\"hit\");\r\n    }\r\n\r\n    slowdown()\r\n    {\r\n        AudioMgr.Instance().playSFX(\"skill_slow\")\r\n        // this.GetSkeleton(\"sp\").timeScale = 0.5;\r\n        this.GetDragonAmature('sp').timeScale = 0.5;\r\n        this.GetGameObject(\"jiansu\").active = true;\r\n        this.GetGameObject(\"sp\").stopAllActions();\r\n        this.GetGameObject(\"sp\").runAction(cc.sequence(cc.delayTime(1),cc.callFunc(()=>{\r\n            this.GetGameObject(\"sp\").color = cc.Color.WHITE;\r\n            // this.GetSkeleton(\"sp\").timeScale = 1;\r\n            this.GetDragonAmature('sp').timeScale = 1;\r\n            this.GetGameObject(\"jiansu\").active = false;\r\n        })))\r\n    }\r\n\r\n    bfrozen = false;\r\n    frozen()\r\n    {\r\n        AudioMgr.Instance().playSFX(\"skill_freeze\")\r\n        this.bfrozen = true;\r\n        this.GetGameObject(\"fx_stun\").stopAllActions();\r\n        this.GetGameObject(\"fx_stun\").active = true;\r\n        this.purpleendtime = Utils.getServerTime() + 1000;\r\n        // this.GetSkeleton(\"sp\").paused = true;\r\n        this.GetGameObject(\"fx_stun\").runAction(cc.sequence(cc.delayTime(1),cc.callFunc(()=>{\r\n            this.GetGameObject(\"fx_stun\").active = false;\r\n            // this.GetSkeleton(\"sp\").paused = false;  \r\n            this.bfrozen = false;\r\n        })))\r\n    }\r\n\r\n    private pathindex = 1;\r\n    private sped = 1;\r\n    private base_speed =50 ;\r\n\r\n    private redendtime = 0;\r\n    private purpleendtime = 0;\r\n    public static mul = 1;\r\n    update(dt)\r\n    {\r\n        if(dt>1)dt=1;\r\n        if(this.redendtime>Utils.getServerTime())\r\n        {\r\n            this.GetGameObject(\"sp\").color = cc.Color.RED.fromHEX(\"#7C82DE\")\r\n        }\r\n        else if(this.purpleendtime>Utils.getServerTime())\r\n        {\r\n            this.GetGameObject(\"sp\").color = cc.Color.RED.fromHEX(\"#ED7373\")\r\n        }\r\n        else\r\n        {\r\n            this.GetGameObject(\"sp\").color =cc.Color.WHITE\r\n        }\r\n\r\n        if(this.bfrozen)return;\r\n        if(!HallScene.Instance.path[this.pathindex])return;\r\n        let d = HallScene.Instance.path[this.pathindex].sub(this.node.position);\r\n        if(d.mag() < this.sped * dt)\r\n        {\r\n            this.node.position =HallScene.Instance.path[this.pathindex];\r\n            this.pathindex++;\r\n            if(this.pathindex == 3)\r\n                this.GetGameObject(\"sp\").scaleX= -0.5;\r\n\r\n            if(this.pathindex>=HallScene.Instance.path.length)\r\n            {\r\n                console.log(\"逃过\")\r\n                HallScene.Instance.removeenemy(this.node,true);\r\n                this.node.removeFromParent(true)\r\n            }\r\n        }\r\n        else\r\n        {\r\n            let v = d.normalize().mul(Enemy.mul *   this.sped * dt);\r\n            this.node.position =this.node.position.add(v);\r\n        }\r\n    }\r\n\r\n    showFSHurt(num: number, forward: boolean = false) {\r\n        var node = cc.instantiate(this.GetGameObject(\"fs_hurt\"));\r\n        node.parent = this.node;\r\n        if (forward) node.x *= -1;\r\n        node.getComponent(cc.Label).string = Utils.formatCoin(num);\r\n        node.active = true;\r\n        var bezier;\r\n        if (forward) {\r\n            bezier = [cc.v2(-10, 50), cc.v2(-40, 60), cc.v2(-60, 20)];\r\n        } else {\r\n            bezier = [cc.v2(10, 50), cc.v2(40, 60), cc.v2(60, 20)];\r\n        }\r\n        var bezierForward = cc.bezierBy(1, bezier);\r\n        node.runAction(cc.sequence(\r\n            cc.spawn(\r\n                // cc.fadeTo(1, 0),\r\n                cc.scaleTo(1, 0.6),\r\n                bezierForward\r\n            ),\r\n            cc.removeSelf()\r\n        ));\r\n    }\r\n\r\n    showWLBaoji(num: number, forward: boolean = false) {\r\n        AudioMgr.Instance().playSFX(\"skill_crit\")\r\n        var node = cc.instantiate(this.GetGameObject(\"wl_baoji\"));\r\n        node.parent = this.node;\r\n        if (forward) node.x *= -1;\r\n        node.getComponent(cc.Label).string = Utils.formatCoin(num);\r\n        node.active = true;\r\n        node.scale = 0.2;\r\n        var bezier;\r\n        var bezier1;\r\n        if (forward) {\r\n            bezier = [cc.v2(-5, 20), cc.v2(-8, 30), cc.v2(-10, 30)];\r\n            bezier1 = [cc.v2(-5, -20), cc.v2(-8, -30), cc.v2(-10, -30)];\r\n        } else {\r\n            bezier = [cc.v2(5, 20), cc.v2(8, 30), cc.v2(10, 30)];\r\n            bezier1 = [cc.v2(5, -20), cc.v2(8, -30), cc.v2(10, -30)];\r\n        }\r\n        var bezierFront = cc.bezierBy(0.2, bezier);\r\n        var bezierBack = cc.bezierBy(0.5, bezier1);\r\n        node.runAction(cc.sequence(\r\n            cc.spawn(\r\n                // cc.moveBy(0.2, 0, 30),\r\n                cc.scaleTo(0.2, 1),\r\n                bezierFront\r\n            ),\r\n            cc.delayTime(0.5),\r\n            cc.spawn(\r\n                // cc.moveBy(0.2, 0, -30),\r\n                cc.scaleTo(0.5, 0.2),\r\n                bezierBack,\r\n                cc.fadeOut(0.5),\r\n            ),\r\n            cc.removeSelf()\r\n        ));\r\n    }\r\n    \r\n}\r\n"]}