{"version":3,"sources":["assets\\script\\game\\prefab\\ShareLayer.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,gDAA2C;AAC3C,2CAAsC;AACtC,mDAA8C;AAC9C,iDAA4C;AAC5C,mDAA8C;AAC9C,2CAAsC;AAEhC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAM;IAA5C;;IA6CA,CAAC;IAzCG,wBAAK,GAAL;QAEI,eAAK,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAA;IACrD,CAAC;IAED,4BAAS,GAAT;QAEI,iBAAM,SAAS,WAAE,CAAC;IACtB,CAAC;IAED,0BAAO,GAAP;QACI,IAAI,EAAE,GAAG,cAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,cAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,OAAO,GAAG,GAAG,GAAC,cAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC1C,IAAI,IAAI,GAAG,mBAAS,CAAC,cAAc,CAAC,eAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QAClE,IAAI,KAAK,GAAG,cAAI,CAAC,IAAI,CAAC,WAAW,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAC,IAAI,CAAC,CAAA;QAC7B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAC,6BAAO,KAAK,WAAG,CAAC,CAAC;IAC9C,CAAC;IAED,+BAAY,GAAZ,UAAa,KAAK,EAAE,eAAe;QAAnC,iBAqBC;QApBG,IAAI,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC;QAChC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrC,QAAQ,OAAO,EAAE;YACb,KAAK,WAAW;gBACZ,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,MAAM;YACV,KAAK,WAAW;gBACZ,kBAAQ,CAAC,eAAe,CAAC;oBACrB,IAAG,cAAI,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,EAAC;wBACzB,cAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;wBACxB,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;wBACpC,eAAK,CAAC,OAAO,CAAC,CAAC,EAAC,KAAI,CAAC,IAAI,EAAC,WAAW,EAAC,eAAK,CAAC,YAAY,CAAC,CAAC,EAAC,EAAE,CAAC,EAAC,GAAG,EAAC,UAAC,CAAC;4BACjE,IAAG,CAAC;gCAAE,cAAI,CAAC,IAAI,CAAC,IAAI,IAAI,KAAI,CAAC,OAAO,CAAC;4BACrC,cAAI,CAAC,IAAI,EAAE,CAAC;wBAChB,CAAC,CAAC,CAAA;qBACL;oBACD,KAAI,CAAC,OAAO,EAAE,CAAC;gBACnB,CAAC,CAAC,CAAC;gBACH,MAAM;SACT;IACT,CAAC;IA5CgB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA6C5B;IAAD,eAAC;CA7CD,AA6CC,CA7CqC,gBAAM,GA6C3C;kBA7CoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport BaseUI from \"../../framwork/BaseUI\";\r\nimport Data from \"../../manager/Data\";\r\nimport WxCenter from \"../../manager/WxCenter\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport BigNumber from \"../../utils/BigNumber\";\r\nimport Utils from \"../../utils/Utils\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends BaseUI {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    private coinVal:number;\r\n    start()\r\n    {\r\n        Utils.playBreath(this.GetGameObject('btn_share'))\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        super.onDestroy();\r\n    }\r\n\r\n    setData(){\r\n        let lv = Data.user.GetMaxLv() - 1 > 0 ? Data.user.GetMaxLv() - 1 : 1;\r\n        this.coinVal = 0.5*Data.user.BuyPrice(lv);\r\n        let coin = BigNumber.getLargeString(Utils.fixFloat(this.coinVal));\r\n        let times = Data.user.share_times;\r\n        this.SetText(\"lbl_coin\",coin)\r\n        this.SetText(\"lbl_times\",`还可分享${times}次`);\r\n    }\r\n\r\n    onBtnClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        AudioMgr.Instance().playSFX(\"click\");\r\n        switch (btnName) {\r\n            case \"btn_close\":\r\n                this.closeUI();\r\n                break;\r\n            case \"btn_share\":\r\n                WxCenter.shareAppMessage(()=>{\r\n                    if(Data.user.share_times > 0){\r\n                        Data.user.share_times--;\r\n                        AudioMgr.Instance().playSFX(\"coin\");\r\n                        Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\r\n                            if(b) Data.user.coin += this.coinVal;\r\n                            Data.save();\r\n                        })\r\n                    }\r\n                    this.closeUI();\r\n                });\r\n                break;\r\n            }\r\n    }\r\n}\r\n"]}