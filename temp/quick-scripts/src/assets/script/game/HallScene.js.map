{"version":3,"sources":["assets\\script\\game\\HallScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../framwork/BaseUI\";\r\nimport MsgHints from \"../framwork/MsgHints\";\r\nimport Data from \"../manager/Data\";\r\nimport WxCenter from \"../manager/WxCenter\";\r\nimport AudioMgr from \"../utils/AudioMgr\";\r\nimport Utils from \"../utils/Utils\";\r\nimport { DB_level, DB_plant, DB_slot } from \"./DB\";\r\nimport AdLayer, { MAX_DOUBLE_ATT_TIME, MAX_DOUBLE_INCOME_TIME, MAX_AUTO_COM_TIME, MAX_DROP_PLANT_TIME, EADLAYER } from \"./prefab/AdLayer\";\r\nimport ShareLayer from \"./prefab/ShareLayer\";\r\nimport Enemy from \"./prefab/Enemy\";\r\nimport LoseUI from \"./prefab/LoseUI\";\r\nimport LuPinResult from \"./prefab/LuPinResult\";\r\nimport OfflineAwardUI from \"./prefab/OfflineAwardUI\";\r\nimport ShopLayer from \"./prefab/ShopLayer\";\r\nimport VictoryUI from \"./prefab/VictoryUI\";\r\nimport SlotItem from \"./SlotItem\";\r\nimport SoldierItem from \"./SoldierItem\";\r\nimport { PlantInfo } from \"./UserModel\";\r\nimport CoinNotEnoughUI from \"./prefab/CoinNotEnoughUI\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class HallScene extends BaseUI {\r\n    @property(cc.Prefab)\r\n    enemy_pre:cc.Prefab = null;\r\n\r\n    static _instance = null;\r\n\r\n    static get Instance():HallScene\r\n    {\r\n        return HallScene._instance;\r\n    }\r\n\r\n    private _lastdroptime = 0;\r\n    public enemylist:cc.Node[] = [];\r\n    private wave_info:any = null;\r\n\r\n    hidemergetips()\r\n    {\r\n        let slots = this.GetGameObject(\"slots\");//fx_ground_merge\r\n        for(var slot of slots.children)\r\n        {\r\n            slot.getChildByName(\"fx_ground_merge\").active = false;\r\n        }\r\n    }\r\n\r\n    showmergetips(lv:number)\r\n    {\r\n        let indexs = [];\r\n        for(var item of this.items)\r\n        {\r\n            if(item.datacopy && item.datacopy.lv == lv && item.droptype == 0 && item.datacopy.lv<60)\r\n            {\r\n                indexs.push(item.index);\r\n            }\r\n        }\r\n        // console.log(indexs);\r\n        let slots = this.GetGameObject(\"slots\");//fx_ground_merge\r\n        for(var i = 0;i<slots.children.length;++i)\r\n        {\r\n            slots.children[i].getChildByName(\"fx_ground_merge\").active = indexs.indexOf(i) >=0;\r\n        }\r\n    }\r\n\r\n\r\n    update(dt)\r\n\t{\r\n        if(dt>1)dt=1;\r\n\t\tthis.SetText(\"lbl_coin\",Utils.formatNumber(Data.user.coin)+\"\");\r\n        if(this.recordertime != 0)\r\n        {\r\n            let s = Math.floor((Utils.getServerTime() - this.recordertime)/1000);\r\n            if(s>0)this.SetText(\"lbl_luping\",s+\"s\");\r\n        }\r\n        else\r\n            this.SetText(\"lbl_luping\",\"\");\r\n\r\n        //y排序\r\n        this.enemylist.sort((a,b)=>{\r\n            return b.y - a.y;\r\n        })\r\n\r\n        for(var i = 0;i<this.enemylist.length;++i)\r\n        {\r\n            this.enemylist[i].zIndex = i;\r\n        }\r\n\r\n        this._lastdroptime += dt;\r\n        if(this._lastdroptime > 25 * (Data.user.drop_plant_time > Utils.getServerTime()?.3:1))\r\n        {\r\n            //普通花盆掉落\r\n            if (this.item_drag.datacopy) return\r\n            let lv = Math.max(1, Data.user.GetMaxLv() - Utils.getRandomInt(6, 9));\r\n            this.tryBuyPlant(lv, 3)\r\n            this._lastdroptime = 0;\r\n        }\r\n\r\n        //一段时间不操作，提示可以合成\r\n        if(this.touchendtime != 0 && Utils.getServerTime() - this.touchendtime > 5000)\r\n        {\r\n            this.mergetip();\r\n        }\r\n    }\r\n\r\n    //中间显示图片\r\n    public async showImage(imgpath:string)\r\n    {\r\n        let node = new cc.Node();\r\n        node.addComponent(cc.Sprite).spriteFrame = await Utils.loadRes(imgpath,cc.SpriteFrame) as cc.SpriteFrame;\r\n        node.parent = this.node;\r\n        node.y = 200;\r\n        node.scale = 1.2;\r\n        node.runAction(cc.sequence(cc.delayTime(2),cc.spawn(cc.moveBy(0.5,0,100),cc.fadeTo(0.5,0)),cc.removeSelf()))\r\n    }\r\n\r\n    private bFail = false;\r\n    removeenemy(node:cc.Node,bFail:boolean)\r\n    {\r\n        let isStop = false;\r\n        let isChange = false;\r\n        if(bFail) this.bFail = true;\r\n        for(var i = this.enemylist.length-1;i>=0;--i)\r\n        {\r\n            if(node == this.enemylist[i])\r\n            {\r\n                this.enemylist.splice(i,1);\r\n                break;\r\n            }\r\n        }\r\n        if(this.createcomplete && this.enemylist.length == 0)\r\n        {\r\n            if(this.bFail)\r\n            {\r\n                if(Data.user.wave>= this.wave_info[2])\r\n                {\r\n                    Data.user.wave= 1;\r\n                    isStop = true;\r\n                    let enemy = node.getComponent(Enemy);\r\n                    Utils.createUI(\"prefab/LoseUI\").then((node:cc.Node)=>{\r\n                        node.getComponent(LoseUI).setInfo(enemy.getBossMoney())\r\n                    })\r\n                }\r\n                else\r\n                {\r\n                    Data.user.wave = 1;\r\n                    this.showImage(\"texture/defeat\");\r\n                }\r\n            }\r\n            else\r\n            {\r\n                Data.user.wave++;\r\n                isChange = true;\r\n                if(Data.user.wave > this.wave_info[2])\r\n                {\r\n                    let enemy = node.getComponent(Enemy);\r\n                    let money = enemy.getBossMoney();\r\n\t\t\t\t    this.node.runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(()=>{\r\n                        Utils.createUI(\"prefab/VictoryUI\").then((node:cc.Node)=>{\r\n                            node.getComponent(VictoryUI).setInfo(money)\r\n                        })\r\n                    })))\r\n                    isStop = true;\r\n                    Data.user.wave = 1;\r\n                    Data.user.lv++;\r\n                    this.openNewSlot();\r\n                    Data.save(true);\r\n                    let key = Data.user.lv + \"_\" + Data.user.wave;\r\n                    this.wave_info = DB_level[key];\r\n                    WxCenter.aldLevelReport(Data.user.lv);\r\n                }\r\n                else\r\n                {\r\n                    AudioMgr.Instance().playSFX(\"win_wave\")\r\n                    // this.showImage(\"texture/success\");\r\n                    this.playSkAni(\"spine:other/shengjichenggong\", \"effect\", this.node,cc.v3(0,150,0), 2);\r\n                }\r\n            }\r\n            if(isStop) return;\r\n            this.createwave(isChange);\r\n        }\r\n    }\r\n\r\n    private createcomplete = false;\r\n    createwave(isChange:boolean = false)\r\n    {\r\n        this.bFail = false;\r\n        this.createcomplete = false;\r\n\r\n        let key = Data.user.lv + \"_\" + Data.user.wave;\r\n        this.wave_info = DB_level[key];\r\n\r\n        //通关后就一直读最后一关\r\n        if(!this.wave_info)\r\n        {\r\n            let key = 60 + \"_\" + Data.user.wave;\r\n            this.wave_info = DB_level[key];\r\n        }\r\n\r\n        if(Data.user.wave == this.wave_info[2])\r\n        {\r\n            AudioMgr.Instance().playBGM(\"bgBoss\");\r\n            this.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(()=>{\r\n                Utils.createUI(\"prefab/BossCommingUI\")\r\n            })))\r\n        }\r\n        else if(Data.user.wave == 1)\r\n        {\r\n            AudioMgr.Instance().playBGM(\"BGM1\");\r\n        }\r\n\r\n        //创建怪物\r\n        let list = [];\r\n        let num = 0;\r\n\r\n        for(let i = 0;i<this.wave_info[4];++i)\r\n            list.push(this.wave_info[3])\r\n        \r\n            num = list.length;\r\n\r\n        for(let i = 0;i<this.wave_info[6];++i)\r\n            list.push(this.wave_info[5])\r\n\r\n        for(let i = 0;i<list.length;++i)\r\n        {\r\n            let id = list[i];\r\n            this.node.runAction(cc.sequence(cc.delayTime(2.2 * i),cc.callFunc(()=>{\r\n                let e = cc.instantiate(this.enemy_pre);\r\n                e.parent = this.GetGameObject(\"node_obj\");\r\n                e.getComponent(Enemy).setID(id,i>=num);\r\n                this.enemylist.push(e);\r\n                if(i == list.length-1)\r\n                    this.createcomplete = true;\r\n            })))\r\n        }\r\n        \r\n        //关卡信息\r\n        this.SetText(\"lbl_cur_lv\",Data.user.lv+\"\");\r\n        this.SetText(\"lbl_waves\",Data.user.wave+\"/\"+ this.wave_info[2]);\r\n        this.SetText(\"lbl_pre_lv\",(Data.user.lv-1)+\"\");\r\n        this.SetText(\"lbl_nex_lv\",(Data.user.lv+1)+\"\");\r\n        if(isChange){\r\n            Utils.playBreath(this.GetGameObject('lbl_waves'),1,3,0.5,false);\r\n        }\r\n    }\r\n\r\n    public path:cc.Vec3[] = [];\r\n\r\n\titem_drag: SoldierItem = null;\r\n\tautocomindexs: number[] = [-1, -1];\r\n\r\n    private items: Array<SoldierItem> = [];\r\n    initComposeItems() {\r\n        var list = Data.user.ComPlants;\r\n        \r\n        let m = {};\r\n        for (var i = list.length - 1; i >= 0; i--) {\r\n            if(list[i].lv>60)list[i].lv=60\r\n            if(m[list[i].index] == 1)\r\n            {\r\n                list.splice(i,1);\r\n                console.warn(\"错误...修正\")\r\n                continue;\r\n            }\r\n            m[list[i].index] = 1;\r\n        }\r\n\r\n        for (var i = list.length - 1; i >= 0; i--) {\r\n            if (this.items[list[i].index])\r\n                this.items[list[i].index].setItemData(list[i]);\r\n        }\r\n    }\r\n    bPauseAutoCom: boolean = false; //是否暂停自动合成\r\n\tbInAutoCom: boolean = false;     //是否正在自动合成动画\r\n\t\r\n\tgetItemByPos(pos: cc.Vec2): SoldierItem {\r\n        for (var i = 0; i < this.items.length; ++i) {\r\n            if (this.items[i].node.getBoundingBox().contains(pos)) {\r\n                return this.items[i].node.getComponent(SoldierItem);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\tsetdragitempos(pos) {\r\n        pos = this.GetGameObject(\"node_com\").convertToWorldSpaceAR(pos);\r\n        pos = this.GetGameObject(\"item_drag\").parent.convertToNodeSpaceAR(pos);\r\n        this.GetGameObject(\"item_drag\").position = pos;\r\n    }\r\n\t\r\n\tasync start()\r\n\t{\r\n        WxCenter.aldReport('HomeShow','show');\r\n        this.hidemergetips();\r\n        HallScene._instance = this;\r\n        WxCenter.init();\r\n\t\tlet slots = this.GetGameObject(\"slots\");\r\n\t\tlet i = 0;\r\n\t\tfor(var slot of slots.children){\r\n\t\t\tslot.getComponent(SlotItem).setIndex(++i);\r\n\t\t}\r\n        await this.initView();\r\n\r\n\t\tthis.node.runAction(cc.sequence(cc.delayTime(0.5), cc.callFunc(() => {\r\n            this.tryAutocom();\r\n            if (this.item_drag.node.active) return\r\n            // 小精灵掉落\r\n            if(Data.user.DropGiftPts.length>0)\r\n            {\r\n               let b= this.tryBuyPlant(Data.user.DropGiftPts[0],4);\r\n               if(b)\r\n                   Data.user.DropGiftPts.shift();\r\n            }\r\n           //  广告购买成功，因为没有空位未成功添加\r\n           if(Data.user.AdBuyNotDrop.length>0)\r\n            {\r\n               let b= this.tryBuyPlant(Data.user.AdBuyNotDrop[0],2);\r\n               if(b)\r\n                   Data.user.AdBuyNotDrop.shift();\r\n            }\r\n\r\n\t\t})).repeatForever())\r\n        \r\n        Data.user.auto_com_time = Math.max(0,Data.user.auto_com_time);\r\n        Data.user.double_income_time = Math.max(0,Data.user.double_income_time);\r\n        Data.user.drop_plant_time = Math.max(0,Data.user.drop_plant_time);\r\n        Data.user.double_att_time = Math.max(0,Data.user.double_att_time);\r\n        this.updateBuyButton();\r\n\r\n         //离线奖励,暂时只给6小时的         \r\n         var t = (Utils.getServerTime() - Data.user.serverTime) / 1000;\r\n         if ( Data.user.serverTime != 0 && t>3*60) {\r\n             var t = Math.min(7200 * 3, t);\r\n             var money = Data.user.getOfflineEarning(t/60);\r\n             Utils.createUI('prefab/OfflineAwardUI', null, (ui) => {\r\n                 ui.getComponent(OfflineAwardUI).data = money;\r\n             })\r\n         }\r\n\r\n        for(var c of this.GetGameObject(\"node_path\").children)\r\n            this.path.push(c.position)\r\n\r\n        this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(()=>{\r\n            this.createwave();\r\n        })))\r\n\r\n\t\t//更新各种时间\r\n        this.GetGameObject(\"bottom\").runAction(cc.sequence( cc.callFunc(() => {\r\n            let isX2In = Data.user.double_att_time - Utils.getServerTime() > 0;\r\n            let isInDb = Data.user.double_income_time - Utils.getServerTime() > 0;\r\n            let isDpIn = Data.user.drop_plant_time - Utils.getServerTime() > 0;\r\n\r\n            //校验时间\r\n            if (Data.user.double_att_time - Utils.getServerTime() > MAX_DOUBLE_ATT_TIME * 60 * 1000) {\r\n                Data.user.double_att_time = Utils.getServerTime();\r\n            }\r\n            if (Data.user.double_income_time - Utils.getServerTime() > MAX_DOUBLE_INCOME_TIME * 60 * 1000) {\r\n                Data.user.double_income_time = Utils.getServerTime();\r\n            }\r\n            if (Data.user.auto_com_time - Utils.getServerTime() > MAX_AUTO_COM_TIME * 60 * 1000) {\r\n                Data.user.auto_com_time = Utils.getServerTime();\r\n            }\r\n            if (Data.user.drop_plant_time - Utils.getServerTime() > MAX_DROP_PLANT_TIME * 60 * 1000) {\r\n                Data.user.drop_plant_time = Utils.getServerTime();\r\n            }\r\n            this.breathAngry(isX2In);\r\n            this.SetText(\"att_x2_time\", isX2In ? Utils.getTimeStrByS((Data.user.double_att_time - Utils.getServerTime()) / 1000) : '打鸡血');\r\n            this.SetText(\"rewardx2_time\", isInDb ? Utils.getTimeStrByS((Data.user.double_income_time - Utils.getServerTime()) / 1000) : '双倍');\r\n            if( Data.user.auto_com_time - Utils.getServerTime() > 0)\r\n            {\r\n                this.SetText(\"auto_time\", Utils.getTimeStrByS((Data.user.auto_com_time - Utils.getServerTime()) / 1000));\r\n            }\r\n            else\r\n            {\r\n                this.SetText(\"auto_time\", \"自动合成\");\r\n            }\r\n            this.SetText(\"lbl_drop_plant\",isDpIn ? Utils.getTimeStrByS((Data.user.drop_plant_time - Utils.getServerTime()) / 1000) : '掉落');\r\n            this.GetGameObject(\"fx_bt_angry\").active = this.GetGameObject(\"att_x2_time\").active;\r\n            // if(Data.user.drop_plant_time - Utils.getServerTime()<0)\r\n            //     this.GetSprite(\"bt_fast_gen_process_item\").fillRange = 0;\r\n            // else\r\n            //     this.GetSprite(\"bt_fast_gen_process_item\").fillRange = ( (Data.user.drop_plant_time - Utils.getServerTime())/1000/60)/MAX_DROP_PLANT_TIME;// (max_drop_plant * 60 - (Data.user.drop_plant_time - Utils.getServerTime())/1000) /max_drop_plant * 60\r\n\r\n            // this.updateUI();\r\n            // TaskLayer.checkTask();//任务检测\r\n            // if (GameManager.Instance().isGuide == false)\r\n            //     this.GetGameObject(\"btn_auto\").active = Data.user.guideIndex > 2;\r\n            // Data.user.checkNewTody();\r\n\t\t}),cc.delayTime(1)).repeatForever());\r\n        this.GetGameObject(\"btn_delete\").opacity = 0;\r\n        this.GetGameObject(\"guild_0\").active = Data.user.guideIndex == 0;\r\n\r\n        // if (this.GetGameObject(\"supermarket\"))\r\n        //     this.GetGameObject(\"supermarket\").runAction(cc.sequence(cc.rotateTo(0.3, 20), cc.rotateTo(0.3, -10), cc.rotateTo(0.2, 0), cc.delayTime(2)).repeatForever());\r\n\r\n\r\n        // if (this.GetGameObject(\"powerman\"))\r\n        //     this.GetGameObject(\"powerman\").runAction(cc.sequence(cc.rotateTo(0.3, 20), cc.rotateTo(0.3, -10), cc.rotateTo(0.2, 0), cc.delayTime(3)).repeatForever());\r\n\r\n            // this.GetGameObject(\"btn_inviate\").runAction(cc.sequence(cc.rotateTo(0.3, 20), cc.rotateTo(0.3, -10), cc.rotateTo(0.2, 0), cc.delayTime(3)).repeatForever());\r\n        this.GetGameObject(\"lupin_gem\").runAction(cc.sequence(cc.rotateTo(0.3, 20), cc.rotateTo(0.3, -10), cc.rotateTo(0.2, 0), cc.delayTime(3)).repeatForever());\r\n        \r\n        if (this.GetGameObject(\"btn_Recorder\")) this.GetGameObject(\"btn_Recorder\").active = window[\"tt\"];\r\n        if (window[\"tt\"]) {\r\n            const recorder = window[\"tt\"].getGameRecorderManager();\r\n            recorder.onStart(res => {\r\n                this.GetGameObject(\"lupin_gem\").active = false;\r\n                this.GetGameObject(\"btn_VCR\").active = false;\r\n                this.GetGameObject(\"btn_end\").active = true;\r\n                this.GetGameObject(\"btn_Recorder\").stopAllActions();\r\n                this.GetGameObject(\"btn_Recorder\").runAction(cc.sequence(cc.scaleTo(0.5, .9), cc.scaleTo(0.5, 1)).repeatForever());\r\n                console.log(\"tt录屏开始\");\r\n                this.recordertime = Utils.getServerTime();\r\n            });\r\n\r\n            recorder.onStop(res => {\r\n                this.bRecorder = false;\r\n                this.GetGameObject(\"btn_Recorder\").stopAllActions();\r\n                this.GetGameObject(\"lupin_gem\").active = true;\r\n                this.GetGameObject(\"btn_Recorder\").scale = 1;\r\n                this.GetGameObject(\"btn_VCR\").active = true;\r\n                this.GetGameObject(\"btn_end\").active = false;\r\n                console.log(\"tt录屏结束\");\r\n                console.log(res.videoPath);\r\n                \r\n                if (Utils.getServerTime() - this.recordertime < 3000) {\r\n                    MsgHints.show(\"录屏时间过短\");\r\n                    this.recordertime = 0\r\n                    return;\r\n                }\r\n\r\n                this.recordertime = 0\r\n                Utils.createUI(\"prefab/LuPinResult\", null, (node: cc.Node) => {\r\n                    node.getComponent(LuPinResult).setData(res);\r\n                })\r\n            });\r\n        }\r\n        cc.game.on(cc.game.EVENT_SHOW, this.onGameShow, this);\r\n        cc.game.on(cc.game.EVENT_HIDE, this.onGameHide, this);\r\n    }\r\n\r\n    bRecorder = false;\r\n    recordertime = 0;\r\n    onGameHide() {\r\n    }\r\n\r\n    onDestroy() {\r\n        cc.game.off(cc.game.EVENT_SHOW, this.onGameShow);\r\n        cc.game.off(cc.game.EVENT_HIDE, this.onGameHide);\r\n        super.onDestroy();\r\n    }\r\n\r\n    onGameShow() {\r\n        if (Utils.sharetime != 0 && Utils.sharecallback) {\r\n            if (Utils.getServerTime() - Utils.sharetime >= 2000) {\r\n                Utils.sharecallback(true)\r\n            }\r\n            else {\r\n                MsgHints.show(\"分享失败\");\r\n                Utils.sharecallback(false)\r\n            }\r\n        }\r\n\r\n        Utils.sharetime = 0;\r\n        Utils.sharecallback = null;\r\n    }\r\n\r\n    openNewSlot(){\r\n        let curopen = SlotItem.getCurOpen();\r\n        if(curopen < 0) return;\r\n        let lv = DB_slot[curopen].price;\r\n        if(lv < Data.user.lv) return;\r\n        Data.user.slots[curopen] = 1;\r\n        Data.save();\r\n        let slots = this.GetGameObject(\"slots\");\r\n        let slot = slots.children[curopen];\r\n        if(slot){\r\n            slot.getComponent(SlotItem).setIndex(curopen);\r\n            MsgHints.show(\"成功解锁新位置\");\r\n        }\r\n    }\r\n\r\n    private isInAngry = false;\r\n    public breathAngry(isbool:boolean){\r\n        let node = this.GetGameObject('btn_angry')\r\n        if(!node) return;\r\n        if(isbool) {\r\n            if(this.isInAngry){\r\n                node.stopAllActions();\r\n                node.scaleX = 1;\r\n                node.scaleY = 1;\r\n            }\r\n            this.isInAngry = false;\r\n            return;\r\n        }\r\n        if(this.isInAngry) return;\r\n        this.isInAngry = true;\r\n        node.runAction(cc.sequence(cc.delayTime(10), cc.callFunc(() => {\r\n            Utils.playBreath(node).setTag(2);\r\n        })).repeat(1)).setTag(1)\r\n    }\r\n\r\n\t@property(cc.Prefab)\r\n    pre_soldier: cc.Prefab = null;\r\n    async initView() {\r\n      \r\n        var node_com = this.GetGameObject(\"node_com\");\r\n\r\n        var index = 0;\r\n        for (var i = 0; i < 12; ++i) {\r\n\t\t\tvar node: cc.Node = cc.instantiate(this.pre_soldier);\r\n\t\t\tnode.parent = node_com;\r\n\t\t\tnode.position = this.GetGameObject(\"slots\").children[i].position;// cc.v2(x, y);\r\n\t\t\tnode.name = \"itme\" + index;\r\n\t\t\tvar plant: SoldierItem = node.getComponent(SoldierItem);\r\n\t\t\tplant.index = index;\r\n\t\t\tthis.items.push(plant);\r\n\t\t\t++index\r\n        }\r\n\r\n        var node_drag = cc.instantiate(this.pre_soldier);\r\n        node_drag.parent = node_com.parent;\r\n        node_drag.name = \"item_drag\";\r\n        node_drag.x = -1000;\r\n\r\n        this.item_drag = this.GetGameObject(\"item_drag\").getComponent(SoldierItem);\r\n        this.item_drag.node.active = false;\r\n        this.item_drag.bDrag = true;\r\n\r\n        this.initComposeItems();\r\n\r\n        node_com.on(cc.Node.EventType.TOUCH_START, (e: cc.Event.EventTouch) => {\r\n            this.bPauseAutoCom = true;\r\n            this.GetGameObject(\"node_com\").stopAllActions();\r\n            // cc.log(\"暂停自动合成\")\r\n\r\n            //如果在自动合成中，取消当前合成\r\n            if (this.item_drag.node.active && this.item_drag.datacopy) {\r\n                this.item_drag.node.stopAllActions();\r\n                this.item_drag.linkItem.setItemData(this.item_drag.datacopy);\r\n                this.item_drag.node.active = false;\r\n\r\n                this.autocomindexs[0] = -1;\r\n                this.autocomindexs[1] = -1;\r\n\r\n                this.item_drag.linkItem = null;\r\n                this.GetGameObject(\"node_com\").stopAllActions();\r\n                cc.log(\"取消当前合成\");\r\n            }\r\n\r\n            this.item_drag.datacopy = null;\r\n            var pos = e.getLocation();\r\n            pos = node_com.convertToNodeSpaceAR(pos);\r\n            var item = this.getItemByPos(pos);\r\n\r\n            if(item && item.droptype != 0)\r\n            {\r\n                item.droptype = 0;\r\n                item.updateItem();\r\n            }\r\n\r\n            if (item && item.datacopy && item.droptype == 0 ) {\r\n                this.touchPos = pos;\r\n                this.bChoosed = true;\r\n                this.setdragitempos(item.node.position);\r\n                this.item_drag.index = item.index;\r\n                this.item_drag.setItemData(item.datacopy);\r\n                this.item_drag.linkItem = item;\r\n\r\n                this.showmergetips(item.datacopy.lv)\r\n            }\r\n            else {\r\n                this.item_drag.node.active = false;\r\n                this.autocomindexs[0] = -1;\r\n                this.autocomindexs[1] = -1;\r\n            }\r\n\r\n        }, this);\r\n\r\n        node_com.on(cc.Node.EventType.TOUCH_MOVE, (e: cc.Event.EventTouch) => {\r\n            var pos = e.getLocation();\r\n            pos = node_com.convertToNodeSpaceAR(pos);\r\n            if (this.bChoosed && pos.sub(this.touchPos).mag() > 15) {\r\n                if (this.item_drag.datacopy == null) return;\r\n                this.GetGameObject(\"btn_delete\").opacity = 255;\r\n\r\n                this.item_drag.node.active = true;\r\n                this.item_drag.linkItem.setItemData(null);\r\n                this.setdragitempos(pos);\r\n\r\n                var pos1 = this.GetGameObject(\"btn_delete\").position;\r\n                pos1 = this.GetGameObject(\"btn_delete\").parent.convertToWorldSpaceAR(pos1);\r\n                // if (e.getLocation().sub(cc.v2(pos1.x,pos1.y)).mag() < 100) {\r\n                //     this.GetGameObject(\"btn_delete\").scale = 0.55;\r\n                // }\r\n                // else {\r\n                //     this.GetGameObject(\"btn_delete\").scale = 0.5;\r\n                // }\r\n            }\r\n        }, this);\r\n\r\n        node_com.on(cc.Node.EventType.TOUCH_END, this.docomp, this);\r\n        node_com.on(cc.Node.EventType.TOUCH_CANCEL, this.docomp, this);\r\n    }\r\n\r\n\tbChoosed: boolean = false;\r\n    touchPos: cc.Vec2 = cc.Vec2.ZERO;\r\n\t\r\n    tryAutocom() {\r\n        if (this.bPauseAutoCom || this.bInAutoCom) return;\r\n        if (Utils.getServerTime() < Data.user.auto_com_time && !this.bInAutoCom) {\r\n            this.initComposeItems();\r\n\r\n            for (let i = 0; i < this.items.length ; ++i) {\r\n                if (!this.items[i] || !this.items[i].datacopy) continue;\r\n                for (let j = i + 1; j < this.items.length ; ++j) {\r\n          \r\n                    if (!this.items[j] || !this.items[j].datacopy) continue;\r\n                    if (this.bInAutoCom) return;\r\n                    if (this.items[i].datacopy.lv == this.items[j].datacopy.lv && this.items[i].droptype == 0 && this.items[j].droptype == 0 && this.items[i].datacopy.lv<60) {\r\n                        this.autocomindexs[0] = this.items[i].index;\r\n                        this.autocomindexs[1] = this.items[j].index;\r\n\r\n                        this.item_drag.linkItem = this.items[j];\r\n                        this.item_drag.index = this.items[j].index;\r\n                        this.item_drag.setItemData(this.items[j].datacopy);\r\n                        this.item_drag.node.active = true;\r\n                        this.items[j].setItemData(null);\r\n                        this.item_drag.node.position = this.items[j].node.position;\r\n                        this.setdragitempos(this.items[j].node);\r\n\r\n                        var targetpos = this.GetGameObject(\"node_com\").convertToWorldSpaceAR(this.items[i].node.position);\r\n                        targetpos = this.GetGameObject(\"item_drag\").parent.convertToNodeSpaceAR(targetpos);\r\n\r\n                        // cc.log(\"开始自动合成\")\r\n                        this.bInAutoCom = true;\r\n                        this.item_drag.node.stopAllActions();\r\n                        this.item_drag.node.runAction(cc.sequence(cc.moveTo(0.13, cc.v2(targetpos.x,targetpos.y)), cc.callFunc(() => {\r\n                            this.comani(this.items[i]);\r\n                            // cc.log(\"自动合成结束\");\r\n                            this.bInAutoCom = false;\r\n                        })))\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    private touchendtime = 0;\r\n    docomp(e: cc.Event.EventTouch) {\r\n        this.touchendtime = Utils.getServerTime();\r\n        this.hidemergetips();\r\n        this.GetGameObject(\"btn_delete\").stopAllActions();\r\n        this.GetGameObject(\"btn_delete\").runAction(cc.sequence(cc.delayTime(0.25),cc.fadeTo(0.25,0)))\r\n\r\n        this.GetGameObject(\"node_com\").runAction(cc.sequence(cc.delayTime(1), cc.callFunc(() => {\r\n            this.bPauseAutoCom = false;\r\n            this.bInAutoCom = false;\r\n            // cc.log(\"恢复自动合成\")\r\n        })))\r\n        this.bChoosed = false;\r\n        var pos = e ? e.getLocation() : cc.Vec2.ZERO;\r\n\r\n        if (this.item_drag.node.active) {\r\n            if (!this.item_drag.datacopy) {\r\n                return;\r\n            }\r\n            //删除\r\n            var pos1 = this.GetGameObject(\"btn_delete\").position;\r\n            pos1 = this.GetGameObject(\"btn_delete\").parent.convertToWorldSpaceAR(pos1);\r\n            if (pos.sub(cc.v2(pos1.x,pos1.y)).mag() < 100) {\r\n                this.item_drag.node.active = false;\r\n                this.autocomindexs[0] = -1;\r\n                this.autocomindexs[1] = -1;\r\n                // this.GetGameObject(\"btn_delete\").scale = 0.5;\r\n                var tmp: number = 0;\r\n                for (var i = 0; i < this.items.length; ++i) {\r\n                    if (this.items[i].datacopy) tmp++;\r\n                }\r\n\r\n                if (tmp <= 2) {\r\n                    MsgHints.show(\"植物数量过少不能删除\");\r\n                    this.item_drag.linkItem.setItemData(this.item_drag.datacopy);\r\n                    this.item_drag.linkItem = null;\r\n                    this.item_drag.node.active = false;\r\n                    return;\r\n                }\r\n\r\n                if (this.item_drag.datacopy.lv >= Data.user.GetMaxLv()) {\r\n                    MsgHints.show(\"最高等级植物就不删除了吧！\");\r\n                    this.item_drag.linkItem.setItemData(this.item_drag.datacopy);\r\n                    this.item_drag.linkItem = null;\r\n                    this.item_drag.node.active = false;\r\n                    return;\r\n                }\r\n\r\n                Data.user.DropWuJiang(this.item_drag.datacopy.index);\r\n                this.item_drag.linkItem.setItemData(null);\r\n                this.item_drag.linkItem = null;\r\n\r\n                // this.updateRecruitment();\r\n                // if (GameScene.Instance().fps > 30)\r\n                //     this.playSkAni(\"spine/ui/yinliangzengjia\", \"effect\", this.GetGameObject(\"btn_delete\"), cc.v2(0, 20), 1);\r\n                // return\r\n            }\r\n\r\n            //合成 移动  交换\r\n            pos = this.GetGameObject(\"node_com\").convertToNodeSpaceAR(pos);\r\n            var item: SoldierItem = this.getItemByPos(pos);\r\n\r\n            if (item == null || Data.user.slots[item.index] == 0 || item == this.item_drag.linkItem || (item && item.droptype != 0)) {\r\n\r\n                //取消\r\n                if(this.item_drag.linkItem)\r\n                this.item_drag.linkItem.setItemData(this.item_drag.datacopy);\r\n                this.item_drag.linkItem = null;\r\n                this.item_drag.node.stopAllActions();\r\n                this.item_drag.node.active = false;\r\n                this.autocomindexs[0] = -1;\r\n                this.autocomindexs[1] = -1;\r\n                return;\r\n            }\r\n\r\n            if (!item.datacopy) {\r\n                this.item_drag.node.active = false;\r\n                this.autocomindexs[0] = -1;\r\n                this.autocomindexs[1] = -1;\r\n                //移动\r\n                Data.user.CompMove(this.item_drag.linkItem.index, item.index);\r\n                item.setItemData(this.item_drag.datacopy);\r\n                this.item_drag.linkItem.setItemData(null);\r\n                this.item_drag.linkItem = null;\r\n                return;\r\n            }\r\n\r\n            if (item.datacopy.open == this.item_drag.datacopy.open &&\r\n                item.datacopy.lv == this.item_drag.datacopy.lv && item.datacopy.index != this.item_drag.datacopy.index && item.droptype == 0 && item.datacopy.lv<60) {\r\n                this.comani(item);\r\n            }\r\n            else {\r\n                this.item_drag.node.active = false;\r\n                this.autocomindexs[0] = -1;\r\n                this.autocomindexs[1] = -1;\r\n                //交换\r\n                Data.user.CompMove(this.item_drag.linkItem.index, item.index);\r\n\r\n                var _tmp: PlantInfo = JSON.parse(JSON.stringify(item.datacopy));\r\n                item.setItemData(this.item_drag.datacopy);\r\n                this.item_drag.linkItem.setItemData(_tmp);\r\n            }\r\n        }\r\n        else {\r\n            if (!e) return;\r\n            this.item_drag.linkItem = null;\r\n        }\r\n    }\r\n\t\r\n    comani(item: SoldierItem) {\r\n        let b = Data.user.ComposePlant(item.index, this.item_drag.datacopy.index);\r\n        this.GetGameObject(\"guild_1\").active = false;\r\n        if(Data.user.guideIndex == 1)\r\n        {\r\n            Data.user.guideIndex ++;\r\n            Data.save();\r\n        }\r\n        if (!b) return;\r\n        let nextGun = Data.user.getPlantInfo(item.index);\r\n        item.setItemData(nextGun);\r\n        this.GetGameObject(\"item_drag\").active = false;\r\n\r\n        this.item_drag.datacopy = null;\r\n        this.item_drag.linkItem = null;\r\n        this.autocomindexs = [-1, -1];\r\n\r\n        var targetpos = this.GetGameObject(\"node_com\").convertToWorldSpaceAR(item.node.position);\r\n        targetpos = this.GetGameObject(\"item_drag\").parent.convertToNodeSpaceAR(targetpos);\r\n            this.playSkAni(\"spine:other/effect_hecheng\", \"effect\", this.GetGameObject(\"item_drag\").parent, targetpos.add(cc.v3(0,20,0)), 1);\r\n    }\r\n\r\n    async updateBuyButton()\r\n    {\r\n        let lv = Data.user.GetMaxLv() - 3;\r\n        if(lv<1)lv = 1;\r\n        this.SetText(\"lbl_buy_lvl\",'LV.' + lv);\r\n        this.SetText(\"lbl_buy_cost\",Utils.formatNumber(Data.user.BuyPrice(lv)));\r\n\r\n        let skpath = `spine:flower${lv}_ske`;\r\n        let atlaspath = `spine:flower${lv}_tex`;\r\n        let chick = this.GetDragonAmature('chickbuy');\r\n        chick.dragonAsset = await Utils.loadRes(skpath,dragonBones.DragonBonesAsset) as dragonBones.DragonBonesAsset;\r\n        chick.dragonAtlasAsset = await Utils.loadRes(atlaspath,dragonBones.DragonBonesAtlasAsset) as dragonBones.DragonBonesAtlasAsset;\r\n        chick.armatureName = 'Armature';\r\n        chick.playAnimation('idleL',0);\r\n    }\r\n    //0 coin 1 gem 2 ad 3普通掉落 4小精灵掉落\r\n    public tryBuyPlant(lv:number,buytype:number) {\r\n        var item: SoldierItem = null;\r\n        for (var i = 0; i < 12; ++i) {\r\n            if (Data.user.slots[i] == 0) continue;\r\n            if (!this.items[i].datacopy && this.autocomindexs[0] != i && this.autocomindexs[1] != i) {\r\n                item = this.items[i];\r\n                break;\r\n            }\r\n        }\r\n        if (!lv) {\r\n            lv = Data.user.GetMaxLv() - 3;\r\n            if(lv<1)lv = 1;\r\n        }\r\n\r\n        if (item) {\r\n            if (buytype == 0) {\r\n                let cost = Data.user.BuyPrice(lv);\r\n                if (Data.user.BuyPrice(lv) > Data.user.coin) {\r\n                    let type = 0;\r\n                    if(Data.user.today_getchick_times < Data.user.today_getchick_total){\r\n                        type = 1;\r\n                    }\r\n                    else if(Data.user.today_getcoin_times < Data.user.today_getcoin_total){\r\n                        type = 2;\r\n                    }\r\n                    if(type > 0){\r\n                        Utils.createUI(\"prefab/CoinNotEnough\").then((node:cc.Node)=>{\r\n                            node.getComponent(CoinNotEnoughUI).setType(type);\r\n                        });\r\n                    }\r\n                    else{\r\n                        MsgHints.show(\"金币不足\");\r\n                    }\r\n                    return;\r\n                }\r\n                Data.user.coin -= cost;\r\n            }\r\n            else if (buytype == 1) {\r\n                let gem = Math.min(5, Number(DB_plant[lv - 1][6]));\r\n                if (gem > Data.user.gem) {\r\n                    MsgHints.show(\"钻石不足\");\r\n                    return;\r\n                }\r\n                Data.user.gem -= gem;\r\n            }\r\n            else if(buytype == 2){\r\n\r\n            }\r\n            else if (buytype >= 3) {\r\n                console.log(\"花盆掉落\")\r\n            }\r\n            \r\n            AudioMgr.Instance().playSFX(\"flower_pot_land\")\r\n\r\n            this.docomp(null);\r\n            item.setItemData(Data.user.BuyPlant(item.index, lv) as PlantInfo,buytype);\r\n            this.updateBuyButton();\r\n            return true\r\n        }\r\n        else {\r\n            if (buytype <= 2) {\r\n                MsgHints.show(\"位置不够啦！\");\r\n                this.GetGameObject(\"btn_delete\").stopAllActions();\r\n                this.GetGameObject(\"btn_delete\").opacity = 255;\r\n                this.GetGameObject(\"btn_delete\").runAction(cc.sequence(cc.delayTime(0.25),cc.fadeTo(0.25,0)))\r\n            }\r\n            return false\r\n        }\r\n    }\r\n\r\n    private mergetip(){\r\n        this.touchendtime = Utils.getServerTime();\r\n        if (this.bPauseAutoCom || this.bInAutoCom) return;\r\n        if (!this.bInAutoCom) {\r\n            for (let i = 0; i < this.items.length ; ++i) {\r\n                if (!this.items[i] || !this.items[i].datacopy) continue;\r\n                for (let j = i + 1; j < this.items.length ; ++j) {\r\n        \r\n                    if (!this.items[j] || !this.items[j].datacopy) continue;\r\n                    if (this.bInAutoCom) return;\r\n                    if (this.items[i].datacopy.lv == this.items[j].datacopy.lv && this.items[i].droptype == 0 && this.items[j].droptype == 0 && this.items[i].datacopy.lv < 60) {\r\n                        let index1 = this.items[i].index;\r\n                        let index2 = this.items[j].index\r\n\r\n                        this.GetGameObject(\"guild_1\").active = true;\r\n                        this.GetGameObject(\"guild_1\").zIndex = cc.macro.MAX_ZINDEX;\r\n                        this.GetGameObject(\"guild_1\").stopAllActions();\r\n                        let p0 = this.GetGameObject(\"slots\").children[index1].position;\r\n                        let p1 = this.GetGameObject(\"slots\").children[index2].position;\r\n                        this.GetGameObject(\"guild_1\").position = p0;\r\n                        this.GetGameObject(\"guild_1\").runAction(cc.sequence(cc.moveTo(1,cc.v2(p1.x,p1.y)),cc.moveTo(0.1,cc.v2(p0.x,p0.y))).repeatForever());\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\tonBtnClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        AudioMgr.Instance().playSFX(\"click\");\r\n\r\n        switch (btnName) {\r\n\t\t\tcase \"btn_setting\":\r\n\t\t\t\tUtils.createUI(\"prefab/SettingUI\")\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"btn_sign\":\r\n\t\t\t\tUtils.createUI(\"prefab/SignUI\")\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"btn_buy\":\r\n                this.tryBuyPlant(null,0);\r\n                this.GetGameObject(\"guild_0\").active = false;\r\n                if(Data.user.guideIndex == 0)\r\n                {\r\n                    Data.user.guideIndex++;\r\n                    Data.save();\r\n                }\r\n                if(Data.user.guideIndex == 1)\r\n                {\r\n                    this.mergetip();\r\n                }\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bt_fast_gen\":\r\n\t\t\t\tUtils.createUI(\"prefab/AdLayer\").then((node:cc.Node)=>{\r\n\t\t\t\t\tnode.getComponent(AdLayer).setType(EADLAYER.DROP_PLANT)\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"btn_angry\":\r\n\t\t\t\tUtils.createUI(\"prefab/AdLayer\").then((node:cc.Node)=>{\r\n\t\t\t\t\tnode.getComponent(AdLayer).setType(EADLAYER.DOUBLE_ATT)\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"btn_double_coin\":\r\n\t\t\t\tUtils.createUI(\"prefab/AdLayer\").then((node:cc.Node)=>{\r\n\t\t\t\t\tnode.getComponent(AdLayer).setType(EADLAYER.DOUBLE_INCOME)\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bt_auto_merge\":\r\n\t\t\t\tUtils.createUI(\"prefab/AdLayer\").then((node:cc.Node)=>{\r\n\t\t\t\t\tnode.getComponent(AdLayer).setType(EADLAYER.AUTO_COM)\r\n\t\t\t\t})\r\n                break;\r\n            case \"btn_shop\":\r\n               ShopLayer.show();\r\n                break;\r\n            case \"btn_delete\":\r\n                if(this.GetGameObject(\"btn_delete\").opacity == 255)\r\n                MsgHints.show(\"拖动到这里卖出\")\r\n                break;\r\n            case \"btn_inviate\":\r\n                // WxCenter.shareAppMessage();\r\n                WxCenter.aldReport('InvitationClick','click');\r\n                Utils.createUI(\"prefab/ShareLayer\").then((node:cc.Node)=>{\r\n                    node.getComponent(ShareLayer).setData();\r\n                })\r\n                break;\r\n            case \"btn_Recorder\":\r\n                if (this.bRecorder == false) {\r\n                    cc.log(\"开始录屏\");\r\n                    this.bRecorder = true;\r\n                    if (window[\"tt\"]) {\r\n                        const recorder = window[\"tt\"].getGameRecorderManager();\r\n                        recorder.start({\r\n                            duration: 30\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    cc.log(\"结束录屏\")\r\n                    this.bRecorder = false;\r\n                    if (window[\"tt\"]) {\r\n                        const recorder = window[\"tt\"].getGameRecorderManager();\r\n                        recorder.stop();\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    private bFirstSubContex = true;\r\n}\r\n"]}