{"version":3,"sources":["assets\\script\\manager\\PoolMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class PoolMgr {\r\n\r\n    pools: any = {};\r\n    prefabs: any = {};\r\n\r\n    pre_bullets: cc.Prefab[] = [];\r\n\r\n    private static _instance: PoolMgr = null;\r\n    public static Instance(): PoolMgr {\r\n        if (PoolMgr._instance == null)\r\n            PoolMgr._instance = new PoolMgr()\r\n        return PoolMgr._instance;\r\n    }\r\n\r\n    loadPrefabs() {\r\n        cc.loader.loadRes(\"prefab/Coin\", cc.Prefab, (err, ret) => {\r\n            if (err) {\r\n                console.log(err);\r\n                return;\r\n            }\r\n            this.initPool(\"Coin\", ret, 11);\r\n        });\r\n\r\n        cc.loader.loadRes(\"prefab/Gem\", cc.Prefab, (err, ret) => {\r\n            if (err) {\r\n                console.log(err);\r\n                return;\r\n            }\r\n            this.initPool(\"Gem\", ret, 11);\r\n        });\r\n    }\r\n\r\n    initPool(key: any, prefab: cc.Prefab, count: number) {\r\n        this.prefabs[key] = prefab;\r\n        this.pools[key] = new cc.NodePool();\r\n        for (var i = 0; i < count; ++i) {\r\n            this.pools[key].put(cc.instantiate(prefab));\r\n        }\r\n    }\r\n\r\n    get(key: any): cc.Node {\r\n        if (this.pools[key] == null) {\r\n            cc.error(\"没有\" + key);\r\n            return null;\r\n        }\r\n        if (this.pools[key].size() > 0) {\r\n            var node = this.pools[key].get();\r\n            var spine = node.getChildByName(\"spine\");\r\n            if (spine) {\r\n                spine.getComponent(sp.Skeleton).paused = false;\r\n            }\r\n            return node;\r\n        }\r\n        else\r\n            return cc.instantiate(this.prefabs[key]);\r\n    }\r\n\r\n    put(key: any, node: cc.Node) {\r\n        this.pools[key].put(node);\r\n        // var spine = node.getChildByName(\"spine\");\r\n        // if (spine) {\r\n        //     spine.getComponent(sp.Skeleton).paused = true;\r\n        // }\r\n    }\r\n}\r\n\r\n\r\n"]}