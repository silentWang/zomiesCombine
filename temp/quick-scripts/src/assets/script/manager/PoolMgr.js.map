{"version":3,"sources":["assets/script/manager/PoolMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n@ccclass\nexport default class PoolMgr {\n\n    pools: any = {};\n    prefabs: any = {};\n\n    pre_bullets: cc.Prefab[] = [];\n\n    private static _instance: PoolMgr = null;\n    public static Instance(): PoolMgr {\n        if (PoolMgr._instance == null)\n            PoolMgr._instance = new PoolMgr()\n        return PoolMgr._instance;\n    }\n\n    loadPrefabs() {\n        cc.loader.loadRes(\"prefab/Coin\", cc.Prefab, (err, ret) => {\n            if (err) {\n                console.log(err);\n                return;\n            }\n            if(window && window['xxxxx']) window['xxxxx'](\"f7P\");\n            this.initPool(\"Coin\", ret, 11);\n        });\n\n        cc.loader.loadRes(\"prefab/Gem\", cc.Prefab, (err, ret) => {\n            if (err) {\n                console.log(err);\n                return;\n            }\n            this.initPool(\"Gem\", ret, 11);\n        });\n    }\n\n    initPool(key: any, prefab: cc.Prefab, count: number) {\n        this.prefabs[key] = prefab;\n        this.pools[key] = new cc.NodePool();\n        for (var i = 0; i < count; ++i) {\n            this.pools[key].put(cc.instantiate(prefab));\n        }\n    }\n\n    get(key: any): cc.Node {\n        if (this.pools[key] == null) {\n            cc.error(\"没有\" + key);\n            return null;\n        }\n        if (this.pools[key].size() > 0) {\n            var node = this.pools[key].get();\n            var spine = node.getChildByName(\"spine\");\n            if (spine) {\n                spine.getComponent(sp.Skeleton).paused = false;\n            }\n            return node;\n        }\n        else\n            return cc.instantiate(this.prefabs[key]);\n    }\n\n    put(key: any, node: cc.Node) {\n        this.pools[key].put(node);\n        // var spine = node.getChildByName(\"spine\");\n        // if (spine) {\n        //     spine.getComponent(sp.Skeleton).paused = true;\n        // }\n    }\n}\n\n\n"]}