{"version":3,"sources":["assets\\script\\Loading.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"./framwork/BaseUI\";\r\nimport AdCenter from \"./manager/AdCenter\";\r\nimport ChickData from \"./manager/ChickData\";\r\nimport PoolMgr from \"./manager/PoolMgr\";\r\nimport WxCenter from \"./manager/WxCenter\";\r\nimport AudioMgr from \"./utils/AudioMgr\";\r\nimport { Native } from \"./utils/Native\";\r\nimport Utils from \"./utils/Utils\";\r\n\r\nconst wx = window[\"wx\"] || window[\"tt\"];\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Loading extends BaseUI {\r\n\r\n    @property(cc.Node)\r\n    img_shouquan: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    loading_bar: cc.Node = null;\r\n\r\n    onUIClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n\r\n        switch (btnName) {\r\n            case \"btn_rstart\":\r\n                {\r\n                    cc.director.loadScene(\"loading\")\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    start(){\r\n        WxCenter.init();\r\n        WxCenter.aldReport('LoadingShow','show');\r\n        AdCenter.Instance().showInterstitialAd();\r\n    }\r\n\r\n    async onLoad() {\r\n        // cc.debug.setDisplayStats(false);\r\n        cc.game.setFrameRate(60);\r\n        super.onLoad();\r\n        if(wx) {\r\n            wx.setPreferredFramesPerSecond(60);\r\n            wx.setKeepScreenOn({ keepScreenOn: true });\r\n        }\r\n        PoolMgr.Instance().loadPrefabs()\r\n        this.startLGAction();\r\n        let descs = [\"初次加载时间可能会较长，请耐心等待....\"];\r\n        let index = 0;\r\n        this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(() => {\r\n            this.SetText(\"desp\", descs[index]);\r\n            index++;\r\n            if (index > descs.length - 1)\r\n                index = 0;\r\n        })).repeatForever())\r\n        \r\n        Native.getAppVersion();\r\n\r\n        this.GetGameObject(\"btn_rstart\").active = false;\r\n    }\r\n\r\n    startLGAction() {\r\n        this.node.runAction(cc.sequence(cc.delayTime(.5), cc.callFunc(async () => {\r\n            ChickData.loadData()\r\n            var p: number = 0;\r\n            this.node.runAction(cc.sequence(cc.delayTime(0.01), cc.callFunc(async () => {\r\n                p += 0.018;\r\n                this.SetProgressBar(\"ProgressBar\", p);\r\n                if (p >= 1) {\r\n                    this.node.stopAllActions();\r\n                    await Utils.loadBundler(\"spine\");\r\n                    Utils.loadBundler(\"sounds\").then(()=>{\r\n                        AudioMgr.Instance().loadSounds();\r\n                    });\r\n                    cc.director.loadScene(\"hall\");\r\n                    p = 1;\r\n                }\r\n                this.GetGameObject('plane').x = p*600 - 320;\r\n                this.SetText('lbl_progress',(~~(p*100)) + '%');\r\n            })).repeatForever());\r\n        })))\r\n    }\r\n\r\n    progress: number = 0;\r\n\r\n}\r\n"]}