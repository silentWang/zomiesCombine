{"version":3,"sources":["assets/script/framwork/ListItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property, disallowMultiple, menu, executionOrder } = cc._decorator;\n\nimport List from './List';\n\nenum SelectedType {\n    NONE = 0,\n    TOGGLE = 1,\n    SWITCH = 2,\n}\n\n@ccclass\n@disallowMultiple()\n@menu('自定义组件/List Item')\n@executionOrder(-5001)//先于List\nexport default class ListItem extends cc.Component {\n    //图标\n    @property({ type: cc.Sprite, tooltip: CC_DEV && '图标' })\n    icon: cc.Sprite = null;\n    //标题\n    @property({ type: cc.Node, tooltip: CC_DEV && '标题' })\n    title: cc.Node = null;\n    //选择模式\n    @property({\n        type: cc.Enum(SelectedType),\n        tooltip: CC_DEV && '选择模式'\n    })\n    selectedMode: SelectedType = SelectedType.NONE;\n    //被选标志\n    @property({\n        type: cc.Node, tooltip: CC_DEV && '被选标志',\n        visible() { return this.selectedMode > SelectedType.NONE }\n    })\n    selectedFlag: cc.Node = null;\n    //被选择的SpriteFrame\n    @property({\n        type: cc.SpriteFrame, tooltip: CC_DEV && '被选择的SpriteFrame',\n        visible() { return this.selectedMode == SelectedType.SWITCH }\n    })\n    selectedSpriteFrame: cc.SpriteFrame = null;\n    //未被选择的SpriteFrame\n    _unselectedSpriteFrame: cc.SpriteFrame = null;\n    //选择\n    _selected: boolean = false;\n    set selected(val: boolean) {\n        this._selected = val;\n        if (!this.selectedFlag)\n        return;\n        switch (this.selectedMode) {\n            case SelectedType.TOGGLE:\n                this.selectedFlag.active = val;\n                if(window && window['xxxxx']) window['xxxxx'](\"8r5tfwaCNj8yPN7Q6GspS4rH5rPCx\");\n                break;\n            case SelectedType.SWITCH:\n                let sp: cc.Sprite = this.selectedFlag.getComponent(cc.Sprite);\n                if (sp)\n                    sp.spriteFrame = val ? this.selectedSpriteFrame : this._unselectedSpriteFrame;\n                break;\n        }\n    }\n    get selected() {\n        return this._selected;\n    }\n    //按钮组件\n    private _btnCom: any;\n    //依赖的List组件\n    public list: List;\n    //是否已经注册过事件\n    private _eventReg = false;\n    //序列id\n    public listId: number;\n\n    onLoad() {\n        //获取按钮组件，没有的话，selectedFlag无效\n        this._btnCom = this.node.getComponent(cc.Button);\n        if (!this._btnCom)\n            this.selectedMode == SelectedType.NONE;\n        //有选择模式时，保存相应的东西\n        if (this.selectedMode == SelectedType.SWITCH) {\n            let com: cc.Sprite = this.selectedFlag.getComponent(cc.Sprite);\n            this._unselectedSpriteFrame = com.spriteFrame;\n        }\n    }\n\n    _registerEvent() {\n        if (this._btnCom && this.list.selectedMode > 0 && !this._eventReg) {\n            let eh: cc.Component.EventHandler = new cc.Component.EventHandler();\n            eh.target = this.node;\n            eh.component = 'ListItem';\n            eh.handler = 'onClickThis';\n            this._btnCom.clickEvents.unshift(eh);\n            this._eventReg = true;\n        }\n    }\n\n    showAni(aniType: number, callFunc: Function, del: boolean) {\n        let acts: any[];\n        switch (aniType) {\n            case 0: //向上消失\n                if(window && window['xxxxx']) window['xxxxx'](\"c3sWii6SfKkjmn6XYDc3w\");\n                acts = [\n                    cc.scaleTo(.2, .7),\n                    cc.moveBy(.3, 0, this.node.height * 2),\n                ];\n                break;\n            case 1: //向右消失\n                acts = [\n                    cc.scaleTo(.2, .7),\n                    cc.moveBy(.3, this.node.width * 2, 0),\n                ];\n                break;\n            case 2: //向下消失\n                acts = [\n                    cc.scaleTo(.2, .7),\n                    cc.moveBy(.3, 0, this.node.height * -2),\n                ];\n                break;\n            case 3: //向左消失\n                acts = [\n                    cc.scaleTo(.2, .7),\n                    cc.moveBy(.3, this.node.width * -2, 0),\n                ];\n                break;\n            default: //默认：缩小消失\n                acts = [\n                    cc.scaleTo(.3, .1),\n                ];\n                break;\n        }\n        if (callFunc || del) {\n            acts.push(cc.callFunc(() => {\n                if (del) {\n                    this.list._delSingleItem(this.node);\n                    for (let n: number = this.list.displayData.length - 1; n >= 0; n--) {\n                        if (this.list.displayData[n].id == this.listId) {\n                            this.list.displayData.splice(n, 1);\n                            break;\n                        }\n                    }\n                }\n                callFunc();\n                if(window && window['xxxxx']) window['xxxxx'](\"pENPRJbDehh6PJw\");\n            }));\n        }\n        this.node.runAction(cc.sequence(acts));\n    }\n\n    onClickThis() {\n        if(window && window['xxxxx']) window['xxxxx'](\"gdasetweuhnoibasd45415\");\n        this.list.selectedId = this.listId;\n    }\n\n}\n"]}