window.__require=function t(e,n,i){function o(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({AchievementModel:[function(t,e,n){"use strict";cc._RF.push(e,"34e81wFdk5IIr+RjfNcuORv","AchievementModel");var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=[],r=cc._decorator,a=r.ccclass,c=(r.property,function(){function t(){}return t.prototype.getUploadData=function(){for(var t={},e=0;e<o.length;++e)t[o[e]]=this[o[e]];return t},t.prototype.setData=function(t){if(t)for(var e=0;e<o.length;++e){var n=t[o[e]];if(null!=n||null!=n)if("[object Object]"==Object.prototype.toString.call(n))for(var i in n)this[o[e]][i]=n[i];else this[o[e]]=n}},i([a],t)}());n.default=c,cc._RF.pop()},{}],AdCenter:[function(t,e,n){"use strict";cc._RF.push(e,"04f46M4nKZHVpGCqJxlR4+3","AdCenter");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Singleton"),a=t("../framwork/MsgHints"),c=t("../utils/Utils"),s=t("./WxCenter"),l=window.tt,u=cc._decorator,d=(u.ccclass,u.property,function(t){function e(){var e=t.call(this)||this;if(e.VideoAd=null,e.bannerAd=null,e.interstitialAd=null,e._lasttryplaytime=0,l&&l.createRewardedVideoAd){e.VideoAd=l.createRewardedVideoAd({adUnitId:"1r3lbfr4d9e6veouju"}),e.VideoAd.onError(function(t){console.log("onError",t),a.default.show("\u5e7f\u544a\u52a0\u8f7d\u9519\u8bef")}),e.VideoAd.onLoad(function(){}),e.VideoAd.onClose(function(t){t&&t.isEnded||void 0===t?(cc.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e.callBack(!0)):(cc.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e.callBack(!1))}),l.createInterstitialAd&&(e.interstitialAd=l.createInterstitialAd({adUnitId:"60jin0has9p2b8n774"}));var n=l.getSystemInfoSync(),i=n.screenWidth,o=n.screenHeight;e.bannerAd=l.createBannerAd({adUnitId:"3a3ld4b071g57lnlji",style:{width:i,top:o-150}})}return e}return o(e,t),e.prototype.showinterstitialAd=function(){this.interstitialAd&&this.interstitialAd.show().catch(function(t){console.log(t)})},e.prototype.showGridAd=function(){s.default.showBanner()},e.prototype.hideGridAd=function(){s.default.hideBanner()},e.prototype.play=function(t,e){void 0===e&&(e=0),c.default.getServerTime()-this._lasttryplaytime<1e3?console.log("\u70b9\u51fb\u8fc7\u4e8e\u9891\u7e41"):(console.log("\u5c1d\u8bd5\u64ad\u653e\u5e7f\u544a"),this._lasttryplaytime=c.default.getServerTime(),this.callBack=t,s.default.showRewardedVideoAd(t))},e.prototype.dyShowVideo=function(){var t=this;this.VideoAd?this.VideoAd.show().catch(function(){t.VideoAd.load().then(function(){return t.VideoAd.show()}).catch(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25"),t.callBack(!1)})}):this.callBack(!0)},e}(r.default));n.default=d,cc._RF.pop()},{"../framwork/MsgHints":"MsgHints","../utils/Utils":"Utils","./Singleton":"Singleton","./WxCenter":"WxCenter"}],AdLayer:[function(t,e,n){"use strict";cc._RF.push(e,"73543ezbFJOm7NG/VtG9woV","AdLayer");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.EADLAYER=n.MAX_DOUBLE_ATT_TIME=n.MAX_DROP_PLANT_TIME=n.MAX_DOUBLE_INCOME_TIME=n.MAX_AUTO_COM_TIME=void 0;var a,c=t("../../framwork/BaseUI"),s=t("../../framwork/MsgHints"),l=t("../../manager/AdCenter"),u=t("../../manager/Data"),d=t("../../manager/WxCenter"),h=t("../../utils/AudioMgr"),p=t("../../utils/Utils"),f=cc._decorator,_=f.ccclass;f.property,function(t){t[t.DOUBLE_ATT=0]="DOUBLE_ATT",t[t.DOUBLE_INCOME=1]="DOUBLE_INCOME",t[t.AUTO_COM=2]="AUTO_COM",t[t.DROP_PLANT=3]="DROP_PLANT"}(a||(a={})),n.EADLAYER=a,n.MAX_AUTO_COM_TIME=4,n.MAX_DOUBLE_INCOME_TIME=4,n.MAX_DROP_PLANT_TIME=20,n.MAX_DOUBLE_ATT_TIME=1;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){l.default.Instance().showGridAd(),p.default.playBreath(this.GetGameObject("btn_ad"))},e.prototype.onDestroy=function(){l.default.Instance().hideGridAd(),t.prototype.onDestroy.call(this)},e.prototype.update=function(t){t>1&&(t=1);var e=this.getEndAndMaxTime(),n=e.end_time;if(e.max,n>p.default.getServerTime()){var i=n-p.default.getServerTime();this.SetText("lbl_time",p.default.getTimeStrByS(i/1e3))}else this.SetText("lbl_time","")},e.prototype.getEndAndMaxTime=function(){var t=0,e=0;return this.type==a.AUTO_COM?(t=u.default.user.auto_com_time,e=n.MAX_AUTO_COM_TIME):this.type==a.DOUBLE_ATT?(t=u.default.user.double_att_time,e=n.MAX_DOUBLE_ATT_TIME):this.type==a.DOUBLE_INCOME?(t=u.default.user.double_income_time,e=n.MAX_DOUBLE_INCOME_TIME):this.type==a.DROP_PLANT&&(t=u.default.user.drop_plant_time,e=n.MAX_DROP_PLANT_TIME),{end_time:t,max:e}},e.prototype.setType=function(t){this.type=t,this.GetGameObject("icon_fast").active=t==a.DROP_PLANT,this.GetGameObject("icon_auto_merge").active=t==a.AUTO_COM,this.GetGameObject("icon_income").active=t==a.DOUBLE_INCOME,this.GetGameObject("icon_angre").active=t==a.DOUBLE_ATT,this.type==a.AUTO_COM?(this.SetText("lbl_effect","+2\u5206\u949f"),d.default.aldReport("AutoShow","show")):this.type==a.DOUBLE_ATT?(this.SetText("lbl_effect","+30\u79d2"),this.SetText("lbl_d","\u8fdb\u5165\u72c2\u66b4\u72b6\u6001  \u6301\u7eed30\u79d2"),d.default.aldReport("RageShow","show")):this.type==a.DOUBLE_INCOME?(this.SetText("lbl_effect","+2\u5206\u949f"),d.default.aldReport("DoubleShow","show")):this.type==a.DROP_PLANT&&(this.SetText("lbl_effect","+10\u5206\u949f"),d.default.aldReport("DropShow","show"));var e=this.getEndAndMaxTime(),n=e.end_time,i=(e.max,n>p.default.getServerTime());this.GetGameObject("btn_normal").active=!i},e.prototype.addvalue=function(t){void 0===t&&(t=1);var e=!1;if(this.type==a.AUTO_COM){if(d.default.aldReport("AutoClick","click"),u.default.user.auto_com_time-p.default.getServerTime()>6e4*(n.MAX_AUTO_COM_TIME-2))return void s.default.show("\u6700\u5927\u7d2f\u79ef\u65f6\u95f4"+n.MAX_AUTO_COM_TIME+"\u5206\u949f");u.default.user.auto_com_time<p.default.getServerTime()&&(u.default.user.auto_com_time=p.default.getServerTime()),u.default.user.auto_com_time+=12e4*t,e=!0}else if(this.type==a.DOUBLE_ATT){if(d.default.aldReport("RageClick","click"),u.default.user.double_att_time-p.default.getServerTime()>6e4*(n.MAX_DOUBLE_ATT_TIME-.5))return void s.default.show("\u6700\u5927\u7d2f\u79ef\u65f6\u95f4"+n.MAX_DOUBLE_ATT_TIME+"\u5206\u949f");u.default.user.double_att_time<p.default.getServerTime()&&(u.default.user.double_att_time=p.default.getServerTime()),u.default.user.double_att_time+=3e4*t,e=!0}else if(this.type==a.DOUBLE_INCOME){if(d.default.aldReport("DoubleClick","click"),u.default.user.double_income_time-p.default.getServerTime()>6e4*(n.MAX_DOUBLE_INCOME_TIME-2))return void s.default.show("\u6700\u5927\u7d2f\u79ef\u65f6\u95f4"+n.MAX_DOUBLE_INCOME_TIME+"\u5206\u949f");u.default.user.double_income_time<p.default.getServerTime()&&(u.default.user.double_income_time=p.default.getServerTime()),u.default.user.double_income_time+=12e4*t,e=!0}else if(this.type==a.DROP_PLANT){if(2==t&&d.default.aldReport("DropClick","click"),u.default.user.drop_plant_time-p.default.getServerTime()>6e4*(n.MAX_DROP_PLANT_TIME-10))return void s.default.show("\u6700\u5927\u7d2f\u79ef\u65f6\u95f4"+n.MAX_DROP_PLANT_TIME+"\u5206\u949f");u.default.user.drop_plant_time<p.default.getServerTime()&&(u.default.user.drop_plant_time=p.default.getServerTime()),u.default.user.drop_plant_time+=6e5*t,e=!0}u.default.save(),e&&(this.closeUI(),s.default.show("\u4f7f\u7528\u6210\u529f"))},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(h.default.Instance().playSFX("click"),n){case"btn_close":this.closeUI();break;case"btn_ad":l.default.Instance().play(function(t){t&&e.addvalue(2)});break;case"btn_normal":this.addvalue(1),this.GetGameObject("btn_normal").active=!1}},r([_],e)}(c.default);n.default=m,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../framwork/MsgHints":"MsgHints","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils"}],AudioMgr:[function(t,e,n){"use strict";cc._RF.push(e,"c4310qOOsJLaZuNAeTaQNgO","AudioMgr");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../manager/Singleton"),s=t("./Utils"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmVolume=1,e.sfxVolume=1,e.bgmAudioID=-1,e.audioId=-1,e.bgm_url="",e.lastplaysfxtime={},e.sfxcd={huangshulang:1500,huli:1500,hit:300,merge_success:100,skill_freeze:300,skill_slow:300},e}return o(e,t),e.prototype.loadSounds=function(){var t=this,e=cc.sys.localStorage.getItem("bgmVolume"),n=cc.sys.localStorage.getItem("sfxVolume");this.bgmVolume=0==e?Number(e):1,this.sfxVolume=0==n?Number(n):1,console.log("loadSounds",this.bgmVolume,this.sfxVolume),cc.log(this.bgmVolume,this.sfxVolume),cc.loader.loadResDir("sounds",function(){t.playBGM("BGM1")})},e.prototype.playBGM=function(t){return r(this,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return this.bgm_url==t?[3,2]:(this.bgm_url=t,[4,s.default.loadRes("sounds:"+t,cc.AudioClip)]);case 1:e=n.sent(),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmVolume>0&&(this.bgmAudioID=cc.audioEngine.play(e,!0,this.bgmVolume)),n.label=2;case 2:return[2]}})})},e.prototype.stopSFX=function(t){return cc.audioEngine.stop(t)},e.prototype.playSFX=function(t){return r(this,void 0,void 0,function(){var e,n;return a(this,function(i){switch(i.label){case 0:return this.lastplaysfxtime[t]||(this.lastplaysfxtime[t]=0),e=this.sfxcd[t]||0,(new Date).getTime()-this.lastplaysfxtime[t]<e?[2]:(this.lastplaysfxtime[t]=(new Date).getTime(),[4,s.default.loadRes("sounds:"+t,cc.AudioClip)]);case 1:return(n=i.sent())&&this.sfxVolume>0?(this.audioId=cc.audioEngine.play(n,!1,this.sfxVolume),[2,this.audioId]):[2]}})})},e.prototype.pauseBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},e.prototype.resumBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},e.prototype.setBGMVolume=function(t,e){void 0===e&&(e=!1),(this.bgmVolume!=t||e)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t)),this.bgmAudioID>=0?t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID):this.playBGM(this.bgm_url)},e.prototype.setSFXVolume=function(t,e){void 0===e&&(e=!1),(this.sfxVolume!=t||e)&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},e}(c.default);n.default=l,cc._RF.pop()},{"../manager/Singleton":"Singleton","./Utils":"Utils"}],BaseUI:[function(t,e,n){"use strict";cc._RF.push(e,"da6ddR8mzFCtI19mMwKxBRP","BaseUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,o++)i[o]=r[a];return i};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../event/GameEvent"),u=t("../utils/Utils"),d=cc._decorator,h=d.ccclass,p=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=[],e._create_time=0,e.m_objects=new Map,e}var n;return o(e,t),n=e,e.prototype.onBtnClicked=function(t){switch(t.target.name){case"btn_close":this.closeUI()}},e.prototype.onLoad=function(){this.events=[],this.node.getComponent(cc.Button)&&u.default.addClickEvent(this.node,this.node,cc.js.getClassName(this),"onBtnClicked",this.node.getComponent(cc.Button).target),this._addClickEvent(this.node),this._create_time=u.default.getServerTime()},e.prototype._findInChildren=function(t,e){var n=t.getChildByName(e);if(n)return n;if(0==t.childrenCount)return null;for(var i=0;i<t.childrenCount;++i){var o=this._findInChildren(t.children[i],e);if(o)return o}return null},e.prototype.GetGameObject=function(t,e){if(void 0===e&&(e=!1),!cc.isValid(this.node))return null;if(!e){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t];if(t==this.node.name)return this.node}var n;return-1!=t.indexOf("/")?((n=cc.find(t,this.node))&&(this.m_objects[t]=n),n):((n=this._findInChildren(this.node,t))&&(this.m_objects[t]=n),n)},e.prototype.GetSkeleton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(sp.Skeleton);var e=this.GetGameObject(t);return e?e.getComponent(sp.Skeleton):null},e.prototype.GetDragonAmature=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(sp.Skeleton);var e=this.GetGameObject(t);return e?e.getComponent(dragonBones.ArmatureDisplay):null},e.prototype.GetSprite=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Sprite);var e=this.GetGameObject(t);return e?e.getComponent(cc.Sprite):null},e.prototype.SetSprite=function(t,e){return a(this,void 0,void 0,function(){var n=this;return c(this,function(){return[2,new Promise(function(i){var o=n.GetSprite(t);o&&u.default.loadRes(e,cc.SpriteFrame).then(function(t){cc.isValid(n.node)&&(o.spriteFrame=t,i(null))})})]})})},e.prototype.GetText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Label);var e=this.GetGameObject(t);return e?e.getComponent(cc.Label):null},e.prototype.GetProgressBar=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.ProgressBar);var e=this.GetGameObject(t);return e?e.getComponent(cc.ProgressBar):null},e.prototype.GetButton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Button);var e=this.GetGameObject(t);return e?e.getComponent(cc.Button):null},e.prototype.GetInputField=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.EditBox);var e=this.GetGameObject(t);return e?e.getComponent(cc.EditBox):null},e.prototype.GetSlider=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Slider);var e=this.GetGameObject(t);return e?e.getComponent(cc.Slider):null},e.prototype.SetText=function(t,e){this.GetText(t)&&(this.GetText(t).string=e)},e.prototype.SetInputText=function(t,e){this.GetInputField(t)&&(this.GetInputField(t).string=e)},e.prototype.SetProgressBar=function(t,e){this.GetProgressBar(t)&&(this.GetProgressBar(t).progress=e)},e.prototype._isSkipNode=function(t){return this.node!=t&&null!=t.getComponent(n)},e.prototype._addClickEvent=function(t){if(!this._isSkipNode(t))for(var e=0;e<t.childrenCount;++e){var n=t.children[e];this._isSkipNode(n)||(n.getComponent(cc.Button)&&u.default.addClickEvent(n,this.node,cc.js.getClassName(this),"onBtnClicked",n.getComponent(cc.Button).target),this._addClickEvent(n))}},e.prototype.getChildByName=function(t,e){return cc.find(t,e||this.node)},e.prototype.startAnim=function(){if(this.node){this.node.opacity=0,this.node.active=!0,this.node.setScale(.8,.8);var t=cc.delayTime(.1),e=cc.fadeIn(.1),n=cc.scaleTo(.1,1);this.node.runAction(cc.spawn(t.clone(),e,t.clone(),n))}},e.prototype.shutAnim=function(){this.node&&(this.node.active=!1,this.node.parent=null,this.node.destroy())},e.prototype.closeUI=function(){this.shutAnim()},e.prototype.onDestroy=function(){for(var t=0;t<this.events.length;++t)l.default.Instance().unregister(this,this.events[t])},e.prototype.rigester=function(t,e){this.events.push(t),l.default.Instance().register(this,t,e)},e.prototype.unregister=function(t){l.default.Instance().unregister(this,t)},e.prototype.dispatch=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(e=l.default.Instance()).dispatch.apply(e,s([t],n))},e.prototype.playSkAni=function(t,e,n,i,o){return void 0===o&&(o=-1),a(this,void 0,void 0,function(){var r,a,s;return c(this,function(c){switch(c.label){case 0:return(r=new cc.Node).parent=n,r.position=i,a=r.addComponent(sp.Skeleton),[4,u.default.loadRes(t,sp.SkeletonData)];case 1:return s=c.sent(),a.skeletonData=s,a.premultipliedAlpha=!1,a.setAnimation(0,e,!1),-1!=o&&r.runAction(cc.sequence(cc.delayTime(o),cc.callFunc(function(){r.parent=null}))),[2,r]}})})},n=r([h],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../event/GameEvent":"GameEvent","../utils/Utils":"Utils"}],BigNumber:[function(t,e,n){"use strict";cc._RF.push(e,"29779EDnrJPKp0TmDE+JGoq","BigNumber");var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,a=(o.property,function(){function t(){}var e;return e=t,t.getN=function(t){for(var n=0;n<e.aLetters.length;){if(e.aLetters[n]==t)return Math.pow(10,e.aLetters[n+1]);n+=2}return 0},t.getLargeString=function(t,n,i){if(void 0===n&&(n="K"),void 0===i&&(i=!0),0==t)return t+"";for(var o=NaN,r=Math.round(t/Math.abs(t)),a=t=Math.abs(t),c=0,s=0,l=0,u=0;u<e.aLetters.length;){if(e.aLetters[u]==n){s=u;break}u+=2}if(t<Math.pow(10,e.aLetters[s+1]))c=-1;else{for(o=Math.pow(10,e.aLetters[s+1]),c=s/2;a/1e3>=o;)a/=1e3,c++;for(;a/1e3>=1e3;)a/=1e3}return-1==c?e.addSeparators(Math.round((t-.5)*r).toString()):(a/1e3<10?l=2:a/1e3<100&&(l=1),a/=Math.pow(10,3-l),a=parseInt(a),a/=Math.pow(10,l),i?(a*r).toFixed(2)+""+e.aLetters[2*c]:(a*r).toString()+""+e.aLetters[2*c])},t.addSeparators=function(t,e){void 0===e&&(e=",");var n="-"==t.charAt(0);n&&(t=t.substr(1));for(var i="",o=0,r=t.length-1;r>0;)i=t.charAt(r)+i,++o%3==0&&(i=e+i),r-=1;return i=t.charAt(0)+i,n&&(i="-"+i),i},t.convertToLargeString=function(t){return e.getStringOfNumber(t)},t.getStringOfNumber=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1);var o=1;i&&(o=10);var r=Math.round(t);if(Math.round(t)>=1e6&&r<1e9&&e)return(Math.round(r/1e3/o)/(1e3/o)).toString()+" M";if(r>=1e9&&r<1e12)return(Math.round(r/1e6/o)/(1e3/o)).toString()+" B";if(r>=1e12&&r<1e15)return(Math.round(r/1e9/o)/(1e3/o)).toString()+" T";if(r>=1e15&&r<1e18)return(Math.round(r/1e12/o)/(1e3/o)).toString()+" q";if(r>=1e18&&r<1e21)return(Math.round(r/1e15/o)/(1e3/o)).toString()+" Qq";if(r>=1e21&&r<1e24)return(Math.round(r/1e18/o)/(1e3/o)).toString()+" s";if(r>=1e24&&r<1e27)return(Math.round(r/1e21/o)/(1e3/o)).toString()+" Ss";if(r>=1e27&&r<1e30)return(Math.round(r/1e24/o)/(1e3/o)).toString()+" O";if(r>=1e30&&r<1e33)return(Math.round(r/1e27/o)/(1e3/o)).toString()+" N";if(r>=1e33&&r<1e26)return(Math.round(r/1e30/o)/(1e3/o)).toString()+" d";if(r>=1e26&&r<1e29)return(Math.round(r/1e33/o)/(1e3/o)).toString()+" U";if(r>=1e29&&r<1e32)return(Math.round(r/1e26/o)/(1e3/o)).toString()+" Dd";var a=" ";n&&(a=",");for(var c="",s=String(Math.round(t)),l=String(Math.round(t)).length-1;l>=0;)3==(c=s.charAt(l)+c).length&&0!=l&&(c=a+c),7==c.length&&0!=l&&(c=a+c),l-=1;return c},t.aLetters=["K",3,"M",6,"B",9,"T",12,"aa",15,"bb",18,"cc",21,"dd",24,"ee",27,"ff",30,"gg",33,"hh",36,"ii",39,"jj",42,"kk",45,"ll",48,"mm",51,"nn",54,"oo",57,"pp",60,"qq",63,"rr",66,"ss",69,"tt",72,"uu",75,"vv",78,"ww",81,"xx",84,"yy",87,"zz",90,"aaa",93,"bbb",96,"ccc",99,"ddd",102,"eee",105,"fff",108,"ggg",111,"hhh",114,"iii",117,"jjj",120,"kkk",123,"lll",126,"mmm",129,"nnn",132,"ooo",135,"ppp",138,"qqq",141,"rrr",144,"sss",147,"ttt",150,"uuu",153,"vvv",156,"www",159,"xxx",162,"yyy",165,"zzz"],e=i([r],t)}());n.default=a,cc._RF.pop()},{}],BossCommingUI:[function(t,e,n){"use strict";cc._RF.push(e,"d79a1IGYc5Ds7RQV9hCY0sd","BossCommingUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../utils/AudioMgr"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var t=this;c.default.Instance().playSFX("Arlam"),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){t.closeUI()})))},r([l],e)}(a.default));n.default=u,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../utils/AudioMgr":"AudioMgr"}],Bullet:[function(t,e,n){"use strict";cc._RF.push(e,"7b304r11c5BdrPI27Yo4iN5","Bullet");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framwork/BaseUI"),l=t("../../utils/AudioMgr"),u=t("../../utils/Utils"),d=t("../DB"),h=t("./Enemy"),p=cc._decorator,f=p.ccclass,_=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.sped=700,e.plantlv=0,e.skillType=0,e}return o(e,t),e.prototype.start=function(){var t=this.GetGameObject("trail2");t&&(t.opacity=0,t.runAction(cc.fadeTo(.4,255))),this.node.scale=1.2},e.prototype.update=function(t){if(t>1&&(t=1),this.target){var e=this.target.position.add(cc.v3(0,80,0)).sub(this.node.position);if(e.mag()<this.sped*t*2)return this.target.getComponent(h.default).hit(this.plantlv,this.skillType),this.node.destroy(),void this.node.removeFromParent(!0);var n=e.normalize().mul(this.sped*t);this.node.position=this.node.position.add(n),this.node.angle=180-180*cc.v2(e.x,e.y).signAngle(cc.v2(1,0))/Math.PI}else this.node.removeFromParent(!0)},e.prototype.getBulletType=function(){var t=d.DB_plant[this.plantlv-1],e=String(t[3]).split("|"),n=Number(e[0]),i=Number(e[1]);if(u.default.getRandom(0,100)<i)return n},e.prototype.setInfo=function(t,e){return a(this,void 0,void 0,function(){return c(this,function(){return e=Math.min(e,60),this.plantlv=e,this.target=t,this.skillType=this.getBulletType(),1==this.skillType?l.default.Instance().playSFX("skill5"):2==this.skillType?l.default.Instance().playSFX("skill3"):3==this.skillType?l.default.Instance().playSFX("skill2"):l.default.Instance().playSFX("skill1"),[2]})})},r([f],e)}(s.default));n.default=_,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../DB":"DB","./Enemy":"Enemy"}],CoinNotEnoughUI:[function(t,e,n){"use strict";cc._RF.push(e,"e5b6f4QML1AbaLoQd7JYOMJ","CoinNotEnoughUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framwork/BaseUI"),l=t("../../manager/AdCenter"),u=t("../../manager/Data"),d=t("../../manager/WxCenter"),h=t("../../utils/AudioMgr"),p=t("../../utils/BigNumber"),f=t("../../utils/Utils"),_=t("../DB"),m=t("../HallScene"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbl_times=null,e.lbl_chickname=null,e}return o(e,t),e.prototype.start=function(){f.default.playBreath(this.GetGameObject("btn_ad"))},e.prototype.setType=function(t){return a(this,void 0,void 0,function(){var e,n,i,o,r,a,s,l;return c(this,function(c){switch(c.label){case 0:return this.type=t,this.GetGameObject("getChick").active=1==t,this.GetGameObject("getCoin").active=2==t,e="",1!=t?[3,3]:(e=u.default.user.today_getchick_times+"/"+u.default.user.today_getchick_total,s=u.default.user.GetMaxLv()-1>0?u.default.user.GetMaxLv()-1:1,n="spine:flower"+s+"_ske",i="spine:flower"+s+"_tex",o=this.GetDragonAmature("chick"),r=o,[4,f.default.loadRes(n,dragonBones.DragonBonesAsset)]);case 1:return r.dragonAsset=c.sent(),a=o,[4,f.default.loadRes(i,dragonBones.DragonBonesAtlasAsset)];case 2:return a.dragonAtlasAsset=c.sent(),o.armatureName="Armature",o.playAnimation("idleL",0),this.lbl_chickname.string="\u201c"+_.DB_plant[s-1][7]+"\u201d",this.SetText("lbl_effect","x1"),[3,4];case 3:2==t&&(e=u.default.user.today_getcoin_times+"/"+u.default.user.today_getcoin_total,s=u.default.user.GetMaxLv()-1>0?u.default.user.GetMaxLv()-1:1,l=.5*u.default.user.BuyPrice(s),this.SetText("lbl_effect","+"+p.default.getLargeString(f.default.fixFloat(l)))),c.label=4;case 4:return d.default.aldReport("LackShow","show"),this.lbl_times.string="\u5f53\u65e5\u6b21\u6570"+e,[2]}})})},e.prototype.addValue=function(){var t=this.type;if(1==t){u.default.user.today_getchick_times++;var e=u.default.user.GetMaxLv()-1>0?u.default.user.GetMaxLv()-1:1;m.default.Instance.tryBuyPlant(e,2),u.default.save(),this.closeUI()}else if(2==t){u.default.user.today_getcoin_times++;var n=.5*u.default.user.BuyPrice(u.default.user.GetMaxLv());h.default.Instance().playSFX("coin"),f.default.flyAnim(0,this.node,"icon_coin",f.default.getRandomInt(5,10),100,function(t){t&&(u.default.user.coin+=n),u.default.save()}),this.closeUI()}},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(h.default.Instance().playSFX("click"),n){case"btn_close":case"btn_normal":this.closeUI();break;case"btn_ad":d.default.aldReport("LackClick","click"),l.default.Instance().play(function(t){t&&e.addValue()})}},r([v(cc.Label)],e.prototype,"lbl_times",void 0),r([v(cc.Label)],e.prototype,"lbl_chickname",void 0),r([g],e)}(s.default);n.default=b,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/BigNumber":"BigNumber","../../utils/Utils":"Utils","../DB":"DB","../HallScene":"HallScene"}],ConfigManager:[function(t,e,n){"use strict";cc._RF.push(e,"9780cLuR0VKypQXZeycd6Qq","ConfigManager");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bInit=!1,e}return o(e,t),e.prototype.loadConfig=function(){return r(this,void 0,void 0,function(){return a(this,function(){return this.bInit?[2]:(this.bInit=!0,console.log("\u914d\u7f6e\u52a0\u8f7d\u5b8c\u6210"),[2])})})},e}(t("./Singleton").default);n.default=c,cc._RF.pop()},{"./Singleton":"Singleton"}],DB:[function(t,e,n){"use strict";cc._RF.push(e,"7de6ch9oxJOZopj+KFc/W5J","DB"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_slot=n.DB_achievementAwards=n.DB_airdrop=n.DB_buyButton=n.DB_droneRewards=n.DB_invite=n.DB_zombie=n.DB_turntable=n.DB_spinLevel=n.DB_shopSort=n.DB_plant=n.DB_levelupGem=n.DB_level=void 0,n.DB_level={"1_1":[1,1,3,1,5,2,1],"1_2":[1,2,3,1,7,2,1],"1_3":[1,3,3,101,1,2,0],"2_1":[2,1,4,2,5,3,1],"2_2":[2,2,4,2,7,3,1],"2_3":[2,3,4,2,9,3,1],"2_4":[2,4,4,102,1,3,0],"3_1":[3,1,5,3,5,4,1],"3_2":[3,2,5,3,7,4,1],"3_3":[3,3,5,3,9,4,1],"3_4":[3,4,5,3,11,4,1],"3_5":[3,5,5,103,1,4,0],"4_1":[4,1,5,4,5,5,1],"4_2":[4,2,5,4,7,5,1],"4_3":[4,3,5,4,9,5,1],"4_4":[4,4,5,4,11,5,1],"4_5":[4,5,5,104,1,5,0],"5_1":[5,1,5,5,5,6,1],"5_2":[5,2,5,5,7,6,1],"5_3":[5,3,5,5,9,6,1],"5_4":[5,4,5,5,11,6,1],"5_5":[5,5,5,105,1,6,0],"6_1":[6,1,5,6,5,7,1],"6_2":[6,2,5,6,7,7,1],"6_3":[6,3,5,6,9,7,1],"6_4":[6,4,5,6,11,7,1],"6_5":[6,5,5,106,1,7,0],"7_1":[7,1,5,7,5,8,1],"7_2":[7,2,5,7,7,8,1],"7_3":[7,3,5,7,9,8,1],"7_4":[7,4,5,7,11,8,1],"7_5":[7,5,5,107,1,8,0],"8_1":[8,1,5,8,5,9,1],"8_2":[8,2,5,8,7,9,1],"8_3":[8,3,5,8,9,9,1],"8_4":[8,4,5,8,11,9,1],"8_5":[8,5,5,108,1,9,0],"9_1":[9,1,5,9,5,10,1],"9_2":[9,2,5,9,7,10,1],"9_3":[9,3,5,9,9,10,1],"9_4":[9,4,5,9,11,10,1],"9_5":[9,5,5,109,1,10,0],"10_1":[10,1,5,10,5,11,1],"10_2":[10,2,5,10,7,11,1],"10_3":[10,3,5,10,9,11,1],"10_4":[10,4,5,10,11,11,1],"10_5":[10,5,5,110,1,11,0],"11_1":[11,1,5,11,5,12,1],"11_2":[11,2,5,11,7,12,1],"11_3":[11,3,5,11,9,12,1],"11_4":[11,4,5,11,11,12,1],"11_5":[11,5,5,111,1,12,0],"12_1":[12,1,5,12,5,13,1],"12_2":[12,2,5,12,7,13,1],"12_3":[12,3,5,12,9,13,1],"12_4":[12,4,5,12,11,13,1],"12_5":[12,5,5,112,1,13,0],"13_1":[13,1,5,13,5,14,1],"13_2":[13,2,5,13,7,14,1],"13_3":[13,3,5,13,9,14,1],"13_4":[13,4,5,13,11,14,1],"13_5":[13,5,5,113,1,14,0],"14_1":[14,1,5,14,5,15,1],"14_2":[14,2,5,14,7,15,1],"14_3":[14,3,5,14,9,15,1],"14_4":[14,4,5,14,11,15,1],"14_5":[14,5,5,114,1,15,0],"15_1":[15,1,5,15,5,16,1],"15_2":[15,2,5,15,7,16,1],"15_3":[15,3,5,15,9,16,1],"15_4":[15,4,5,15,11,16,1],"15_5":[15,5,5,115,1,16,0],"16_1":[16,1,5,16,5,17,1],"16_2":[16,2,5,16,7,17,1],"16_3":[16,3,5,16,9,17,1],"16_4":[16,4,5,16,11,17,1],"16_5":[16,5,5,116,1,17,0],"17_1":[17,1,5,17,5,18,1],"17_2":[17,2,5,17,7,18,1],"17_3":[17,3,5,17,9,18,1],"17_4":[17,4,5,17,11,18,1],"17_5":[17,5,5,117,1,18,0],"18_1":[18,1,5,18,5,19,1],"18_2":[18,2,5,18,7,19,1],"18_3":[18,3,5,18,9,19,1],"18_4":[18,4,5,18,11,19,1],"18_5":[18,5,5,118,1,19,0],"19_1":[19,1,5,19,5,20,1],"19_2":[19,2,5,19,7,20,1],"19_3":[19,3,5,19,9,20,1],"19_4":[19,4,5,19,11,20,1],"19_5":[19,5,5,119,1,20,0],"20_1":[20,1,5,20,5,21,1],"20_2":[20,2,5,20,7,21,1],"20_3":[20,3,5,20,9,21,1],"20_4":[20,4,5,20,11,21,1],"20_5":[20,5,5,120,1,21,0],"21_1":[21,1,5,21,5,22,1],"21_2":[21,2,5,21,7,22,1],"21_3":[21,3,5,21,9,22,1],"21_4":[21,4,5,21,11,22,1],"21_5":[21,5,5,121,1,22,0],"22_1":[22,1,5,22,5,23,1],"22_2":[22,2,5,22,7,23,1],"22_3":[22,3,5,22,9,23,1],"22_4":[22,4,5,22,11,23,1],"22_5":[22,5,5,122,1,23,0],"23_1":[23,1,5,23,5,24,1],"23_2":[23,2,5,23,7,24,1],"23_3":[23,3,5,23,9,24,1],"23_4":[23,4,5,23,11,24,1],"23_5":[23,5,5,123,1,24,0],"24_1":[24,1,5,24,5,25,1],"24_2":[24,2,5,24,7,25,1],"24_3":[24,3,5,24,9,25,1],"24_4":[24,4,5,24,11,25,1],"24_5":[24,5,5,124,1,25,0],"25_1":[25,1,5,25,5,26,1],"25_2":[25,2,5,25,7,26,1],"25_3":[25,3,5,25,9,26,1],"25_4":[25,4,5,25,11,26,1],"25_5":[25,5,5,125,1,26,0],"26_1":[26,1,5,26,5,27,1],"26_2":[26,2,5,26,7,27,1],"26_3":[26,3,5,26,9,27,1],"26_4":[26,4,5,26,11,27,1],"26_5":[26,5,5,126,1,27,0],"27_1":[27,1,5,27,5,28,1],"27_2":[27,2,5,27,7,28,1],"27_3":[27,3,5,27,9,28,1],"27_4":[27,4,5,27,11,28,1],"27_5":[27,5,5,127,1,28,0],"28_1":[28,1,5,28,5,29,1],"28_2":[28,2,5,28,7,29,1],"28_3":[28,3,5,28,9,29,1],"28_4":[28,4,5,28,11,29,1],"28_5":[28,5,5,128,1,29,0],"29_1":[29,1,5,29,5,30,1],"29_2":[29,2,5,29,7,30,1],"29_3":[29,3,5,29,9,30,1],"29_4":[29,4,5,29,11,30,1],"29_5":[29,5,5,129,1,30,0],"30_1":[30,1,5,30,5,31,1],"30_2":[30,2,5,30,7,31,1],"30_3":[30,3,5,30,9,31,1],"30_4":[30,4,5,30,11,31,1],"30_5":[30,5,5,130,1,31,0],"31_1":[31,1,5,31,5,32,1],"31_2":[31,2,5,31,7,32,1],"31_3":[31,3,5,31,9,32,1],"31_4":[31,4,5,31,11,32,1],"31_5":[31,5,5,131,1,32,0],"32_1":[32,1,5,32,5,33,1],"32_2":[32,2,5,32,7,33,1],"32_3":[32,3,5,32,9,33,1],"32_4":[32,4,5,32,11,33,1],"32_5":[32,5,5,132,1,33,0],"33_1":[33,1,5,33,5,34,1],"33_2":[33,2,5,33,7,34,1],"33_3":[33,3,5,33,9,34,1],"33_4":[33,4,5,33,11,34,1],"33_5":[33,5,5,133,1,34,0],"34_1":[34,1,5,34,5,35,1],"34_2":[34,2,5,34,7,35,1],"34_3":[34,3,5,34,9,35,1],"34_4":[34,4,5,34,11,35,1],"34_5":[34,5,5,134,1,35,0],"35_1":[35,1,5,35,5,36,1],"35_2":[35,2,5,35,7,36,1],"35_3":[35,3,5,35,9,36,1],"35_4":[35,4,5,35,11,36,1],"35_5":[35,5,5,135,1,36,0],"36_1":[36,1,5,36,5,37,1],"36_2":[36,2,5,36,7,37,1],"36_3":[36,3,5,36,9,37,1],"36_4":[36,4,5,36,11,37,1],"36_5":[36,5,5,136,1,37,0],"37_1":[37,1,5,37,5,38,1],"37_2":[37,2,5,37,7,38,1],"37_3":[37,3,5,37,9,38,1],"37_4":[37,4,5,37,11,38,1],"37_5":[37,5,5,137,1,38,0],"38_1":[38,1,5,38,5,39,1],"38_2":[38,2,5,38,7,39,1],"38_3":[38,3,5,38,9,39,1],"38_4":[38,4,5,38,11,39,1],"38_5":[38,5,5,138,1,39,0],"39_1":[39,1,5,39,5,40,1],"39_2":[39,2,5,39,7,40,1],"39_3":[39,3,5,39,9,40,1],"39_4":[39,4,5,39,11,40,1],"39_5":[39,5,5,139,1,40,0],"40_1":[40,1,5,40,5,41,1],"40_2":[40,2,5,40,7,41,1],"40_3":[40,3,5,40,9,41,1],"40_4":[40,4,5,40,11,41,1],"40_5":[40,5,5,140,1,41,0],"41_1":[41,1,5,41,5,42,1],"41_2":[41,2,5,41,7,42,1],"41_3":[41,3,5,41,9,42,1],"41_4":[41,4,5,41,11,42,1],"41_5":[41,5,5,141,1,42,0],"42_1":[42,1,5,42,5,43,1],"42_2":[42,2,5,42,7,43,1],"42_3":[42,3,5,42,9,43,1],"42_4":[42,4,5,42,11,43,1],"42_5":[42,5,5,142,1,43,0],"43_1":[43,1,5,43,5,44,1],"43_2":[43,2,5,43,7,44,1],"43_3":[43,3,5,43,9,44,1],"43_4":[43,4,5,43,11,44,1],"43_5":[43,5,5,143,1,44,0],"44_1":[44,1,5,44,5,45,1],"44_2":[44,2,5,44,7,45,1],"44_3":[44,3,5,44,9,45,1],"44_4":[44,4,5,44,11,45,1],"44_5":[44,5,5,144,1,45,0],"45_1":[45,1,5,45,5,46,1],"45_2":[45,2,5,45,7,46,1],"45_3":[45,3,5,45,9,46,1],"45_4":[45,4,5,45,11,46,1],"45_5":[45,5,5,145,1,46,0],"46_1":[46,1,5,46,5,47,1],"46_2":[46,2,5,46,7,47,1],"46_3":[46,3,5,46,9,47,1],"46_4":[46,4,5,46,11,47,1],"46_5":[46,5,5,146,1,47,0],"47_1":[47,1,5,47,5,48,1],"47_2":[47,2,5,47,7,48,1],"47_3":[47,3,5,47,9,48,1],"47_4":[47,4,5,47,11,48,1],"47_5":[47,5,5,147,1,48,0],"48_1":[48,1,5,48,5,49,1],"48_2":[48,2,5,48,7,49,1],"48_3":[48,3,5,48,9,49,1],"48_4":[48,4,5,48,11,49,1],"48_5":[48,5,5,148,1,49,0],"49_1":[49,1,5,49,5,50,1],"49_2":[49,2,5,49,7,50,1],"49_3":[49,3,5,49,9,50,1],"49_4":[49,4,5,49,11,50,1],"49_5":[49,5,5,149,1,50,0],"50_1":[50,1,5,50,5,51,1],"50_2":[50,2,5,50,7,51,1],"50_3":[50,3,5,50,9,51,1],"50_4":[50,4,5,50,11,51,1],"50_5":[50,5,5,150,1,51,0],"51_1":[51,1,5,51,5,52,1],"51_2":[51,2,5,51,7,52,1],"51_3":[51,3,5,51,9,52,1],"51_4":[51,4,5,51,11,52,1],"51_5":[51,5,5,151,1,52,0],"52_1":[52,1,5,52,5,53,1],"52_2":[52,2,5,52,7,53,1],"52_3":[52,3,5,52,9,53,1],"52_4":[52,4,5,52,11,53,1],"52_5":[52,5,5,152,1,53,0],"53_1":[53,1,5,53,5,54,1],"53_2":[53,2,5,53,7,54,1],"53_3":[53,3,5,53,9,54,1],"53_4":[53,4,5,53,11,54,1],"53_5":[53,5,5,153,1,54,0],"54_1":[54,1,5,54,5,55,1],"54_2":[54,2,5,54,7,55,1],"54_3":[54,3,5,54,9,55,1],"54_4":[54,4,5,54,11,55,1],"54_5":[54,5,5,154,1,55,0],"55_1":[55,1,5,55,5,56,1],"55_2":[55,2,5,55,7,56,1],"55_3":[55,3,5,55,9,56,1],"55_4":[55,4,5,55,11,56,1],"55_5":[55,5,5,155,1,56,0],"56_1":[56,1,5,56,5,57,1],"56_2":[56,2,5,56,7,57,1],"56_3":[56,3,5,56,9,57,1],"56_4":[56,4,5,56,11,57,1],"56_5":[56,5,5,156,1,57,0],"57_1":[57,1,5,57,5,58,1],"57_2":[57,2,5,57,7,58,1],"57_3":[57,3,5,57,9,58,1],"57_4":[57,4,5,57,11,58,1],"57_5":[57,5,5,157,1,58,0],"58_1":[58,1,5,58,5,59,1],"58_2":[58,2,5,58,7,59,1],"58_3":[58,3,5,58,9,59,1],"58_4":[58,4,5,58,11,59,1],"58_5":[58,5,5,158,1,59,0],"59_1":[59,1,5,59,5,60,1],"59_2":[59,2,5,59,7,60,1],"59_3":[59,3,5,59,9,60,1],"59_4":[59,4,5,59,11,60,1],"59_5":[59,5,5,159,1,60,0],"60_1":[60,1,5,60,5,60,1],"60_2":[60,2,5,60,7,60,1],"60_3":[60,3,5,60,9,60,1],"60_4":[60,4,5,60,11,60,1],"60_5":[60,5,5,160,1,60,0]},n.DB_levelupGem={3:[3,3],5:[5,3],8:[8,3],11:[11,3],14:[14,5],17:[17,5],19:[19,5],21:[21,5],23:[23,5],25:[25,5],27:[27,5],29:[29,5],31:[31,8],33:[33,8],35:[35,8],37:[37,8],39:[39,8],41:[41,8],43:[43,8],45:[45,8],47:[47,10],49:[49,10],51:[51,10],53:[53,10],55:[55,10],57:[57,10],59:[59,10]},n.DB_plant=[[1,1,10,"1|10",4,100,0,"\u7fc5\u9e21\u4ed41\u7ea7","","#FEDE55","01"],[2,.96,16,"2|10",9,1548,0,"\u7fc5\u9e21\u4ed42\u7ea7","","#F2AA1A","07"],[3,.92,25,"3|5",19,6969,0,"\u7fc5\u9e21\u4ed43\u7ea7","","#B4E253","15"],[4,.88,42,"1|11",41,18539,0,"\u7fc5\u9e21\u4ed44\u7ea7","","#F4C712","32"],[5,.84,75,"2|11",86,49314,0,"\u7fc5\u9e21\u4ed45\u7ea7","","#FEE056","05"],[6,.81,140,"3|5.5",181,131176,0,"\u7fc5\u9e21\u4ed46\u7ea7","","#ECBE4B","04"],[7,.78,293,"1|12",380,348928,0,"\u7fc5\u9e21\u4ed47\u7ea7","","#99E448","14"],[8,.75,601,"2|12",798,928149,0,"\u7fc5\u9e21\u4ed48\u7ea7","","#D4E5EC","16"],[9,.72,1214,"3|6",1676,2468878,0,"\u7fc5\u9e21\u4ed49\u7ea7","","#1971D6","06"],[10,.69,2536,"1|13",3520,6567217,0,"\u7fc5\u9e21\u4ed410\u7ea7","","#E9E178","24"],[11,.67,5307,"2|13",7392,17468797,6,"\u7fc5\u9e21\u4ed411\u7ea7","","#5B7D15","17"],[12,.65,11615,"3|6.5",15523,46467e3,8,"\u7fc5\u9e21\u4ed412\u7ea7","","#FDE054","22"],[13,.63,24392,"1|14",32598,123602221,10,"\u7fc5\u9e21\u4ed413\u7ea7","","#E2B845","08"],[14,.61,51224,"2|14",68455,328781909,13,"\u7fc5\u9e21\u4ed414\u7ea7","","#E66823","33"],[15,.6,107572,"3|7",143756,874559877,17,"\u7fc5\u9e21\u4ed415\u7ea7","","#AF452D","11"],[16,.59,225903,"1|15",301888,2326329273,22,"\u7fc5\u9e21\u4ed416\u7ea7","","#C4A261","23"],[17,.58,474396,"2|15",633965,6188035867,30,"\u7fc5\u9e21\u4ed417\u7ea7","","#FAEB2E","29"],[18,.57,996232,"3|7.5",1331326,16460175406,40,"\u7fc5\u9e21\u4ed418\u7ea7","","#BCEC7F","28"],[19,.56,2092088,"1|16",2795784,43784066580,50,"\u7fc5\u9e21\u4ed419\u7ea7","","#FEFDFF","39"],[20,.55,4393386,"2|16",5871147,116465617103,60,"\u7fc5\u9e21\u4ed420\u7ea7",",","#FDDB2C","50"],[21,.54,9226110,"3|8",12329408,309798541495,80,"\u7fc5\u9e21\u4ed421\u7ea7","","#9A7601","19"],[22,.53,19374831,"1|17",25891758,824064120378,100,"\u7fc5\u9e21\u4ed422\u7ea7","","#CB2E26","27"],[23,.52,40687144,"2|17",54372692,2192010560204,130,"\u7fc5\u9e21\u4ed423\u7ea7","","#96A6B3","10"],[24,.51,85443003,"3|8.5",114182653,5830748090144,160,"\u7fc5\u9e21\u4ed424\u7ea7","","#FCCB16","30"],[25,.51,179430308,"1|17.5",239783571,0xe1b2784ca28,200,"\u7fc5\u9e21\u4ed425\u7ea7","","#E3FF79","21"],[26,.51,376803646,"2|17.5",503545498,41256041186627,240,"\u7fc5\u9e21\u4ed426\u7ea7","","#FCFAC3","03"],[27,.51,791287659,"3|8.5",1057445546,0x63cf1577dacd,290,"\u7fc5\u9e21\u4ed427\u7ea7","","#FC687A","13"],[28,.51,1661704084,"1|18",2220635646,291911245020100,340,"\u7fc5\u9e21\u4ed428\u7ea7","","#9B671B","12"],[29,.51,3489578577,"2|18",4663334858,776483911753466,400,"\u7fc5\u9e21\u4ed429\u7ea7","","#4F5C70","02"],[30,.51,7328115014,"3|9",9793003202,0x7568366f8db5c,460,"\u7fc5\u9e21\u4ed430\u7ea7","","#B9291F","45"],[31,.51,15389041529,"1|18.5",20565306723,5494089566002820,530,"\u7fc5\u9e21\u4ed431\u7ea7","","#82FFB6","54"],[32,.51,32316987211,"2|18.5",43187144119,0x33eb9bcf79cc70,600,"\u7fc5\u9e21\u4ed432\u7ea7","","#70A632","31"],[33,.51,67865673145,"3|9",90693002651,0x8a1badd0d87600,680,"\u7fc5\u9e21\u4ed433\u7ea7","","#B5E13C","09"],[34,.51,142517913605,"1|19",190455305567,0x16f5e1b2668bce0,760,"\u7fc5\u9e21\u4ed434\u7ea7","","#A15C54","25"],[35,.51,299287618570,"2|19",399956141690,0x3d132a4610c6300,850,"\u7fc5\u9e21\u4ed435\u7ea7","","#FCDB50","35"],[36,.51,628503998998,"3|9.5",839907897549,73165091198923e4,940,"\u7fc5\u9e21\u4ed436\u7ea7","","#9CBCC0","37"],[37,.51,1319858397895,"1|19.5",1763806584855,19461914258914e5,1040,"\u7fc5\u9e21\u4ed437\u7ea7","","#4089FF","47"],[38,.51,2771702635582,"2|19.5",3703993828196,51768691928711e5,1140,"\u7fc5\u9e21\u4ed438\u7ea7","","#FCDE8E","49"],[39,.51,5820575534722,"3|9.5",7778387039211,137704720530371e5,1250,"\u7fc5\u9e21\u4ed439\u7ea7","","#FEBF89","52"],[40,.51,0xb1df0020b44,"1|20",0xedb32cadd09,366294556610786e5,1360,"\u7fc5\u9e21\u4ed440\u7ea7","","#F9F2EC","44"],[41,.51,25668738108123,"2|20",34302686842924,97434352058469e6,1480,"\u7fc5\u9e21\u4ed441\u7ea7","","#FAC335","42"],[42,.51,53904350027060,"3|10",72035642370142,259175376475527e6,1600,"\u7fc5\u9e21\u4ed442\u7ea7","","#28D9F9","51"],[43,.51,0x66f43a3be3ba,"1|20.5",0x89956ba30194,689406501424901e6,1730,"\u7fc5\u9e21\u4ed443\u7ea7","","#3CCEF3","53"],[44,.51,0xd83413e42b06,"2|20.5",317677182852330,183382129379023e7,1860,"\u7fc5\u9e21\u4ed444\u7ea7","","#FADC80","18"],[45,.51,499208185600602,"3|10",667122083989893,487796464148203e7,2e3,"\u7fc5\u9e21\u4ed445\u7ea7","","#68DFE0","26"],[46,.51,0x3b97505ccf0ec,"1|21",0x4fa299328ed92,129753859463422e8,2140,"\u7fc5\u9e21\u4ed446\u7ea7","","#FDE570","55"],[47,.51,0x7d2428c2e605a,"2|21",0xa73bdb509261c,345145266172703e8,2290,"\u7fc5\u9e21\u4ed447\u7ea7","","#60EC00","46"],[48,.51,4623167006847160,"3|10.5",6178217619830380,918086408019389e8,2440,"\u7fc5\u9e21\u4ed448\u7ea7","","#F7FDFD","38"],[49,.51,9708650714379030,"1|21.5",0x2e18049bcebf18,244210984533157e9,2600,"\u7fc5\u9e21\u4ed449\u7ea7","","#E8C6AA","56"],[50,.51,0x486eededdd9ea0,"2|21.5",0x60cc09ad989160,649601218858199e9,2760,"\u7fc5\u9e21\u4ed450\u7ea7","","#674B88","40"],[51,.51,0x981c26d9eafff0,"3|10.5",0xcb461452f39750,172793924216281e10,2930,"\u7fc5\u9e21\u4ed451\u7ea7","","#A2FD5D","58"],[52,.51,89911814265864200,"1|22",0x1aadff77aff8a20,459631838415307e10,3100,"\u7fc5\u9e21\u4ed452\u7ea7","","#43AAF2","43"],[53,.51,0x29ece11bbe5f400,"2|22",0x3806fee1be57180,122262069018472e11,3280,"\u7fc5\u9e21\u4ed453\u7ea7","","#656D7E","57"],[54,.51,0x580b0bed762e4c0,"3|11",0x75a84a73a950480,325217103589135e11,3460,"\u7fc5\u9e21\u4ed454\u7ea7","","#F6ECED","48"],[55,.51,0xb8e3ff72ab61700,"1|22.5",0xf7149c5949f5c80,865077495547099e11,3650,"\u7fc5\u9e21\u4ed455\u7ea7","","#44DEFE","60"],[56,.51,174861395502395e4,"2|22.5",233677856136497e4,230110613815528e12,3840,"\u7fc5\u9e21\u4ed456\u7ea7","","#FDADBE","59"],[57,.51,36720893055503e5,"3|11",490723497886643e4,612094232749305e12,4040,"\u7fc5\u9e21\u4ed457\u7ea7","","#FFFEF4","20"],[58,.51,771138754165564e4,"1|23",103051934556195e5,162817065911315e13,4240,"\u7fc5\u9e21\u4ed458\u7ea7","","#DE3A40","36"],[59,.51,161939138374768e5,"2|23",21640906256801e6,433093395324098e13,4350,"\u7fc5\u9e21\u4ed459\u7ea7","","#28B7FE","41"],[60,.51,340072190587014e5,"3|11.5",45445903139282e6,11520284315621e15,4460,"\u7fc5\u9e21\u4ed460\u7ea7","","#D54AF2","34"]],n.DB_shopSort={1:[1,"M","","","","","","","",""],2:[2,"U","M","","","","","","",""],3:[3,"U","U","M","","","","","",""],4:[4,"U","U","M","M","","","","",""],5:[5,"U","U","M","M","M","","","",""],6:[6,"U","U","M","M","M","M","","",""],7:[7,"U","U","AD","M","M","M","M","",""],8:[8,"U","U","AD","M","M","M","M","M",""],9:[9,"U","U","AD","M","M","M","M","M","M"],10:[10,"U","U","AD","M","M","M","M","M","M"],11:[11,"U","U","AD","M","M","M","M","M","M"],12:[12,"U","U","M","AD","M","M","M","M","M"],13:[13,"U","U","G","M","AD","M","M","M","M"],14:[14,"U","U","G","G","M","AD","M","M","M"],15:[15,"U","U","G","G","M","AD","M","M","M"],16:[16,"U","U","G","G","M","AD","M","M","M"],17:[17,"U","U","G","G","M","AD","M","M","M"],18:[18,"U","U","G","G","M","AD","M","M","M"],19:[19,"U","U","G","G","M","AD","M","M","M"],20:[20,"U","U","G","G","M","AD","M","M","M"],21:[21,"U","U","G","G","M","AD","M","M","M"],22:[22,"U","U","G","G","M","AD","M","M","M"],23:[23,"U","U","G","G","M","M","AD","M","M"],24:[24,"U","U","G","G","M","M","AD","M","M"],25:[25,"U","U","G","G","M","M","AD","M","M"],26:[26,"U","U","G","G","M","M","AD","M","M"],27:[27,"U","U","G","G","M","M","AD","M","M"],28:[28,"U","U","G","G","M","M","AD","M","M"],29:[29,"U","U","G","G","M","M","AD","M","M"],30:[30,"U","U","G","G","M","M","AD","M","M"],31:[31,"U","U","G","G","M","M","M","AD","M"],32:[32,"U","U","G","G","M","M","M","AD","M"],33:[33,"U","U","G","G","M","M","M","AD","M"],34:[34,"U","U","G","G","M","M","M","AD","M"],35:[35,"U","U","G","G","M","M","M","AD","M"],36:[36,"U","U","G","G","M","M","M","AD","M"],37:[37,"U","U","G","G","M","M","M","AD","M"],38:[38,"U","U","G","G","M","M","M","AD","M"],39:[39,"U","U","G","G","M","M","M","AD","M"],40:[40,"U","U","G","G","M","M","M","AD","M"],41:[41,"U","U","G","G","M","M","M","AD","M"],42:[42,"U","U","G","G","M","M","M","AD","M"],43:[43,"U","U","G","G","M","M","M","AD","M"],44:[44,"U","U","G","G","M","M","M","AD","M"],45:[45,"U","U","G","G","M","M","M","AD","M"],46:[46,"U","U","G","G","M","M","M","AD","M"],47:[47,"U","U","G","G","M","M","M","AD","M"],48:[48,"U","U","G","G","M","M","M","AD","M"],49:[49,"U","U","G","G","M","M","M","AD","M"],50:[50,"U","U","G","G","M","M","M","AD","M"],51:[51,"U","U","G","G","M","M","M","AD","M"],52:[52,"U","U","G","G","M","M","M","AD","M"],53:[53,"U","U","G","G","M","M","M","AD","M"],54:[54,"U","U","G","G","M","M","M","AD","M"],55:[55,"U","U","G","G","M","M","M","AD","M"],56:[56,"U","U","G","G","M","M","M","AD","M"],57:[57,"U","U","G","G","M","M","M","AD","M"],58:[58,"U","U","G","G","M","M","M","AD","M"],59:[59,"U","U","G","G","M","M","M","AD","M"],60:[60,"U","U","G","G","M","M","M","AD","M"]},n.DB_spinLevel={1:[1,1,1,1,1],2:[2,1,1,1,1],3:[3,1,1,1,1],4:[4,2,2,1,1],5:[5,3,3,2,1],6:[6,4,3,3,2],7:[7,5,4,3,2],8:[8,6,5,4,3],9:[9,6,5,4,3],10:[10,7,6,5,4],11:[11,7,6,5,4],12:[12,8,7,6,5],13:[13,9,8,7,6],14:[14,10,9,8,7],15:[15,11,10,9,8],16:[16,12,11,10,9],17:[17,13,12,11,10],18:[18,14,13,12,11],19:[19,15,14,13,12],20:[20,16,15,14,13],21:[21,17,16,15,14],22:[22,18,17,16,15],23:[23,19,18,17,16],24:[24,20,19,18,17],25:[25,21,20,19,18],26:[26,22,21,20,19],27:[27,23,22,21,20],28:[28,24,23,22,21],29:[29,25,24,23,22],30:[30,26,25,24,23],31:[31,27,26,25,24],32:[32,28,27,26,25],33:[33,29,28,27,26],34:[34,30,29,28,27],35:[35,31,30,29,28],36:[36,32,31,30,29],37:[37,33,32,31,30],38:[38,34,33,32,31],39:[39,35,34,33,32],40:[40,36,35,34,33],41:[41,37,36,35,34],42:[42,38,37,36,35],43:[43,39,38,37,36],44:[44,40,39,38,37],45:[45,41,40,39,38],46:[46,42,41,40,39],47:[47,43,42,41,40],48:[48,44,43,42,41],49:[49,45,44,43,42],50:[50,46,45,44,43],51:[51,47,46,45,44],52:[52,48,47,46,45],53:[53,49,48,47,46],54:[54,50,49,48,47],55:[55,51,50,49,48],56:[56,52,51,50,49],57:[57,53,52,51,50],58:[58,54,53,52,51],59:[59,55,54,53,52],60:[60,56,55,54,53]},n.DB_turntable={1:[1,"coin","C",8,-7],2:[2,"coin","B",4,-6],3:[3,"coin","A",2,-5],4:[4,"coin","S",1,-4],5:[5,"plant","C",8,-7],6:[6,"plant","B",4,-6],7:[7,"plant","A",2,-5],8:[8,"plant","S",1,-4],9:[9,"gem","S",2,10],10:[10,"speedup","A",2,60],11:[11,"drone","C",8,1]},n.DB_zombie={1:[1,57,.862529,137,"",""],2:[2,163,.90565545,170,"",""],3:[3,413,.9509382225,432,"",""],4:[4,705,.998485133625,736,"",""],5:[5,1166,1.04840939081,1218,"",""],6:[6,1636,1.10082985969,1709,"",""],7:[7,2470,1.15587135329,2580,"",""],8:[8,3657,1.21366492019,3820,"",""],9:[9,8104,1.27434816625,8467,"",""],10:[10,17947,1.33806557522,18751,"",""],11:[11,39752,1.40496885378,41533,"",""],12:[12,88056,1.47521729581,92e3,"",""],13:[13,195038,1.54897816091,203774,"",""],14:[14,419648,1.57995772459,438444,"",""],15:[15,902906,1.61155687837,943347,"",""],16:[16,1942629,1.64378801629,2029640,"",""],17:[17,4179527,1.67666377692,4366728,"",""],18:[18,8991989,1.71019705254,9394740,"",""],19:[19,19345313,1.74440099316,20211789,"\t",""],20:[20,41618614,1.77928901264,43482712,"",""],21:[21,89534672,1.81487479372,93544930,"",""],22:[22,192613493,1.85117228909,201240651,"",""],23:[23,414356456,1.88819573453,432915482,"",""],24:[24,891360763,1.92595964995,931284812,"","dog"],25:[25,1917454133,1.92595964995,2003336903,"",""],26:[26,4124664141,1.92595964995,4309407848,"",""],27:[27,8872467162,1.92595964995,9269864966,"",""],28:[28,19085013790,1.92595964995,19939831558,"",""],29:[29,41051864668,1.92595964995,42890577687,"",""],30:[30,88301015025,1.92595964995,92256017488,"",""],31:[31,189140774188,1.92595964995,197612389464,"",""],32:[32,405139538313,1.92595964995,423285738234,"",""],33:[33,867808891065,1.92595964995,906678051296,"",""],34:[34,1858846644666,1.92595964995,1942104385880,"",""],35:[35,3981649512877,1.92595964995,4159987594558,"",""],36:[36,8528693256581,1.92595964995,8910693427544,"",""],37:[37,18268460955598,1.92595964995,19086705321800,"",""],38:[38,39131043366891,1.92595964995,40883722799296,"",""],39:[39,83818694891880,1.92595964995,87572934236092,"",""],40:[40,0xa34a54bb25a9,1.92595964995,0xaa9aa84a668d,"",""],41:[41,384573918429912,1.92595964995,401798984236404,"",""],42:[42,823757333276871,1.92595964995,860653424234377,"",""],43:[43,0x644caecd74b8a,1.92595964995,0x68cabdcf69e0e,"",""],44:[44,0xd6d774610bef8,1.92595964995,0xe076e15351e50,"",""],45:[45,8095761273815170,1.92595964995,8458370421269710,"",""],46:[46,0x3d9ba848430264,1.92595964995,0x405e11e4035194,"",""],47:[47,0x83f6e3da45ce40,1.92595964995,0x89e00693ec7c20,"",""],48:[48,79563905479159900,1.92595964995,83127572805574900,"",""],49:[49,17042588553636e4,1.92595964995,0x27897f455ddb080,"",""],50:[50,0x510ed1598190980,1.92595964995,0x54b03f34d6dd240,"",""],51:[51,78194191268605e4,1.92595964995,0xb56716bf848ed80,"",""],52:[52,167491957697352e4,1.92595964995,174993922482624e4,"",""],53:[53,358767773387728e4,1.92595964995,37483698195778e5,"",""],54:[54,768480570596512e4,1.92595964995,802900815353564e4,"",""],55:[55,164608538221773e5,1.92595964995,171981354648733e5,"",""],56:[56,352591488871038e5,1.92595964995,368384061657587e5,"",""],57:[57,755250969161763e5,1.92595964995,789078660070551e5,"",""],58:[58,16177475759445e7,1.92595964995,169020648987112e6,"",""],59:[59,346521530767311e6,1.92595964995,362042230130394e6,"",""],60:[60,74224911890358e7,1.92595964995,775494456939304e6,"",""],101:[101,1567,.575019333672,1637,"",""],102:[102,2351,.6037703,2456,"",""],103:[103,4231,.633958815,4421,"",""],104:[104,7680,.66565675575,8024,"",""],105:[105,14576,.698939593538,15229,"",""],106:[106,29152,.733886573468,30458,"",""],107:[107,61754,.770580902192,64520,"",""],108:[108,137144,.809109946794,143287,"",""],109:[109,303912,.84956544383,317524,"",""],110:[110,673026,.892043716478,703171,"",""],111:[111,1490720,.93664590286,1557490,"",""],112:[112,3302124,.983478197546,3450026,"",""],113:[113,7313952,1.03265210727,7641543,"",""],114:[114,15736814,1.05330514905,16441666,"",""],115:[115,33859002,1.07437125293,35375547,"",""],116:[116,72848617,1.09585867786,76111506,"",""],117:[117,156732268,1.11777585128,163752306,"",""],118:[118,337199614,1.14013136802,352302785,"",""],119:[119,725449247,1.16293399544,757942119,"",""],120:[120,1553912289,1.23411485973,1623512021,"",""],121:[121,3357550213,1.20991652847,3507934887,"",""],122:[122,7223005995,1.23411485973,7546524433,"",""],123:[123,15538367121,1.25879715703,16234330585,"",""],124:[124,33426028646,1.28397309997,34923180469,"","dog"],125:[125,71904529998,1.28397309997,75125133896,"",""],126:[126,154674905317,1.28397309997,161602794327,"",""],127:[127,332717518589,1.28397309997,347619936247,"",""],128:[128,715688017161,1.28397309997,747743683449,"",""],129:[129,1539444925073,1.28397309997,1608396663267,"",""],130:[130,3311288063449,1.28397309997,3459600655811,"",""],131:[131,7092779031898,1.28397309997,7410464604736,"",""],132:[132,0xdd1556f5871,1.28397309997,0xe6fc55a3a73,"",""],133:[133,32542833414490,1.28397309997,34000426923126,"",""],134:[134,69706749174357,1.28397309997,72828914469877,"",""],135:[135,0x87cc602e67cd,1.28397309997,0x8de178db4984,"",""],136:[136,319825997120177,1.28397309997,334151003531189,"",""],137:[137,685067285831420,1.28397309997,715751449563808,"",""],138:[138,0x5369af9bbcb94,1.28397309997,0x57261e18b8926,"",""],139:[139,0xb2ab9868b99ec,1.28397309997,0xbaac45963b7ac,"",""],140:[140,6732736667155810,1.28397309997,7034295942477690,"",""],141:[141,0x333c4c3c6aa994,1.28397309997,0x3587c6dabd7000,"",""],142:[142,0x6dbf1c21280dc4,1.28397309997,0x72a97d66f91a14,"",""],143:[143,0xeb13b9b1846308,1.28397309997,0xf59b2cde1ab210,"",""],144:[144,0x1f788f8c368e370,1.28397309997,0x20e16a01b3c4080,"",""],145:[145,0x43692730f1c9180,1.28397309997,0x466e19d9a981980,"",""],146:[146,0x9064d26959df380,1.28397309997,0x96dc79ee646d580,"",""],147:[147,139292551608459e4,1.28397309997,145531464995002e4,"",""],148:[148,298364645545319e4,1.28397309997,311728398019293e4,"",""],149:[149,639097070758074e4,1.28397309997,667722228557326e4,"",""],150:[150,136894592556379e5,1.28397309997,143026101356979e5,"",""],151:[151,293228217255765e5,1.28397309997,30636190910665e6,"",""],152:[152,628094841361848e5,1.28397309997,656227209306444e5,"",""],153:[153,134537915019708e6,1.28397309997,14056386823344e7,"",""],154:[154,288180213972214e6,1.28397309997,301087805756029e6,"",""],155:[155,617282018328482e6,1.28397309997,644930079929414e6,"",""],156:[156,132221808325961e7,1.28397309997,13814402312088e8,"",""],157:[157,283219113434208e7,1.28397309997,295904497524926e7,"",""],158:[158,606655340976074e7,1.28397309997,633827433698391e7,"",""],159:[159,129945574037075e8,1.28397309997,135765836298195e8,"",""],160:[160,278343419587415e8,1.28397309997,290810421350735e8,"",""]},n.DB_invite={1:[1,1,5],2:[2,2,8],3:[3,3,10],4:[4,5,25],5:[5,8,45],6:[6,12,60]},n.DB_droneRewards={1:[1,1],2:[2,1],3:[3,1],4:[4,2],5:[5,3],6:[6,3],7:[7,3],8:[8,4],9:[9,4],10:[10,4],11:[11,5],12:[12,5],13:[13,6],14:[14,6],15:[15,7],16:[16,7],17:[17,8],18:[18,9],19:[19,10],20:[20,11],21:[21,12],22:[22,13],23:[23,14],24:[24,15],25:[25,16],26:[26,16],27:[27,17],28:[28,18],29:[29,19],30:[30,20],31:[31,21],32:[32,22],33:[33,23],34:[34,24],35:[35,25],36:[36,26],37:[37,27],38:[38,28],39:[39,29],40:[40,30],41:[41,31],42:[42,32],43:[43,33],44:[44,34],45:[45,35],46:[46,36],47:[47,37],48:[48,38],49:[49,39],50:[50,40],51:[51,41],52:[52,42],53:[53,43],54:[54,44],55:[55,45],56:[56,46],57:[57,47],58:[58,48],59:[59,49],60:[60,50]},n.DB_buyButton={1:[1,1],2:[2,1],3:[3,1],4:[4,1],5:[5,2],6:[6,2],7:[7,3],8:[8,3],9:[9,4],10:[10,4],11:[11,5],12:[12,5],13:[13,6],14:[14,7],15:[15,8],16:[16,9],17:[17,10],18:[18,11],19:[19,12],20:[20,13],21:[21,14],22:[22,15],23:[23,16],24:[24,17],25:[25,18],26:[26,19],27:[27,20],28:[28,21],29:[29,22],30:[30,23],31:[31,24],32:[32,25],33:[33,26],34:[34,27],35:[35,28],36:[36,29],37:[37,30],38:[38,31],39:[39,32],40:[40,33],41:[41,34],42:[42,35],43:[43,36],44:[44,37],45:[45,38],46:[46,39],47:[47,40],48:[48,41],49:[49,42],50:[50,43],51:[51,44],52:[52,45],53:[53,46],54:[54,47],55:[55,48],56:[56,49],57:[57,50],58:[58,51],59:[59,52],60:[60,53]},n.DB_airdrop={1:[1,1,0],2:[2,1,0],3:[3,1,0],4:[4,1,2],5:[5,1,2],6:[6,2,0],7:[7,2,0],8:[8,3,0],9:[9,3,0],10:[10,3,4],11:[11,4,0],12:[12,4,0],13:[13,4,5],14:[14,5,0],15:[15,5,6],16:[16,6,0],17:[17,7,0],18:[18,8,0],19:[19,9,0],20:[20,10,0],21:[21,11,0],22:[22,12,0],23:[23,13,0],24:[24,14,0],25:[25,15,0],26:[26,16,0],27:[27,17,0],28:[28,18,0],29:[29,19,0],30:[30,20,0],31:[31,21,0],32:[32,22,0],33:[33,23,0],34:[34,24,0],35:[35,25,0],36:[36,26,0],37:[37,27,0],38:[38,28,0],39:[39,29,0],40:[40,30,0],41:[41,31,0],42:[42,32,0],43:[43,33,0],44:[44,34,0],45:[45,35,0],46:[46,36,0],47:[47,37,0],48:[48,38,0],49:[49,39,0],50:[50,40,0],51:[51,41,0],52:[52,42,0],53:[53,43,0],54:[54,44,0],55:[55,45,0],56:[56,46,0],57:[57,47,0],58:[58,48,0],59:[59,49,0],60:[60,50,0]},n.DB_achievementAwards={1:[1,4,1,0,0,0,0],2:[2,7,2,3,5,8,10],3:[3,11,2,3,5,8,10],4:[4,15,3,5,8,15,15],5:[5,19,3,5,8,15,20],6:[6,23,5,8,10,15,20],7:[7,27,5,8,10,15,20],8:[8,31,5,8,15,20,20],9:[9,35,5,8,15,20,20],10:[10,39,10,15,20,20,20],11:[11,43,10,15,20,20,20],12:[12,47,15,20,20,20,20],13:[13,51,15,20,20,20,0],14:[14,55,20,20,20,0,0],15:[15,59,20,20,0,0,0]},n.DB_slot=[{id:1,type:0,price:0},{id:2,type:0,price:0},{id:3,type:0,price:0},{id:4,type:0,price:2},{id:5,type:0,price:4},{id:6,type:0,price:6},{id:7,type:0,price:8},{id:8,type:0,price:10},{id:9,type:0,price:12},{id:10,type:0,price:15},{id:11,type:0,price:18},{id:12,type:0,price:20}],cc._RF.pop()},{}],DataManager:[function(t,e,n){"use strict";cc._RF.push(e,"8fa84j3BbNPpL1hUWIcuqxq","DataManager");var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=[];function r(t,e){o.push(e)}var a=function(){function t(){this.signdays=0,this.signtime=0,this.share_count=0,this.share_count_total=0,this.watch_ad_count=0,this.watch_ad_count_total=0,this.savedatatime=0,this.signinfo={sign_index:0,sign_time:0,sign_beisu:0}}return t.Instance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.getUploadData=function(){for(var t={},e=0;e<o.length;++e)t[o[e]]=this[o[e]];return t},t.instance=null,i([r],t.prototype,"signdays",void 0),i([r],t.prototype,"signtime",void 0),i([r],t.prototype,"share_count",void 0),i([r],t.prototype,"savedatatime",void 0),i([r],t.prototype,"signinfo",void 0),t}();n.default=a,cc._RF.pop()},{}],Data:[function(t,e,n){"use strict";cc._RF.push(e,"33e40/I8TNAE6QREhbIVC7x","Data"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../game/UserModel"),o=t("../utils/Utils"),r=t("../utils/AudioMgr"),a=t("../game/GameConst"),c=function(){function t(){}return t.save=function(e){void 0===e&&(e=!1);var n={};n.user=t.user.getUploadData(),t.savedata(n,e)},t.loadData=function(){var e=cc.sys.localStorage.getItem(a.default.local_data_key);if(e){e=JSON.parse(e);var n=cc.sys.localStorage.getItem("savedatatime");n>0&&(new Date).getDate()!=new Date(n).getDate()&&(e.share_times=10,e.today_getcoin_times=0,e.today_getchick_times=0),t.user.setData(e.user),t.save()}else cc.sys.localStorage.setItem("bgmVolume",1),cc.sys.localStorage.setItem("sfxVolume",1),r.default.Instance().sfxVolume=1,r.default.Instance().bgmVolume=1},t.savedata=function(t,e){void 0===e&&(e=!1),cc.sys.localStorage.setItem("savedatatime",o.default.getServerTime());var n=JSON.stringify(t);cc.sys.localStorage.setItem(a.default.local_data_key,n)},t.user=new i.default,t}();n.default=c,cc._RF.pop()},{"../game/GameConst":"GameConst","../game/UserModel":"UserModel","../utils/AudioMgr":"AudioMgr","../utils/Utils":"Utils"}],DebugTools:[function(t,e,n){"use strict";cc._RF.push(e,"afc5a/e3ihDopuoBgs/d9wY","DebugTools");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../game/GameConst"),c=t("../manager/Data"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.addBtn("\u6e05\u9664\u6570\u636e",function(){localStorage.setItem(a.default.local_data_key,"")}),this.addBtn("\u91d1\u5e01+\u5f88\u591a",function(){c.default.user.coin+=1e15}),this.addBtn("\u94bb\u77f3+\u5f88\u591a",function(){c.default.user.gem+=1e5}),this.addBtn("1\u500d\u6570",function(){cc.kSpeed(1)}),this.addBtn("4\u500d\u6570",function(){cc.kSpeed(4)}),this.addBtn("lv++",function(){c.default.user.lv++}))},e.prototype.addBtn=function(t,e){var n=document.getElementsByClassName("toolbar")[0];if(n){var i=document.createElement("div");i.className="item",i.innerHTML="<button id='"+t+"'>"+t+"</button>",n.appendChild(i),document.getElementById(t).onclick=function(){e()}}},r([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../game/GameConst":"GameConst","../manager/Data":"Data"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"7abb6Nw6whC5Ira83PINgLj","Enemy");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framwork/BaseUI"),l=t("../../manager/Data"),u=t("../../utils/AudioMgr"),d=t("../../utils/Utils"),h=t("../DB"),p=t("../HallScene"),f=cc._decorator,_=f.ccclass,m=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getcoin_pre=null,e.maxhp=0,e.hp=0,e.money=0,e.type=0,e.bfrozen=!1,e.pathindex=1,e.sped=1,e.base_speed=50,e.redendtime=0,e.purpleendtime=0,e}var n;return o(e,t),n=e,e.prototype.getBossMoney=function(){return 2==this.type?(l.default.user.double_income_time>d.default.getServerTime()&&(this.money*=2),(this.maxhp-this.hp)/this.maxhp*this.money):0},e.prototype.setID=function(t,e){return a(this,void 0,void 0,function(){var n,i,o,r,a,s;return c(this,function(c){switch(c.label){case 0:return this.type=e?1:0,n=h.DB_zombie[t+""],t>100&&(t-=100,this.type=2),t>52&&(t=d.default.getRandomInt(1,52)),this.GetGameObject("sp").scale=2==this.type?1:.74,this.sped=n[2]*this.base_speed,this.maxhp=n[1],this.hp=this.maxhp,this.money=Math.floor(n[3]*d.default.getRandom(.8,1.2)),this.node.position=p.default.Instance.path[0],this.node.scale=0==this.type?.8:1,u.default.Instance().playSFX("chuxian"),i="spine:enemy"+t+"_ske",o="spine:enemy"+t+"_tex",r=this.GetDragonAmature("sp"),a=r,[4,d.default.loadRes(i,dragonBones.DragonBonesAsset)];case 1:return a.dragonAsset=c.sent(),s=r,[4,d.default.loadRes(o,dragonBones.DragonBonesAtlasAsset)];case 2:return s.dragonAtlasAsset=c.sent(),r.armatureName="Armature",r.playAnimation("run",0),this.GetGameObject("New ProgressBar").opacity=0,[2]}})})},e.prototype.hit=function(t,e){var n=this;if(!(this.hp<=0)){var i=h.DB_plant[t-1],o=Number(i[2]),r=!1,a=!1;if(1==e?(this.slowdown(),a=!0):2==e?(o*=2,r=!0,a=!0):3==e&&(a=!0,this.frozen()),this.hp-=o,this.hp=Math.max(this.hp,0),this.SetProgressBar("New ProgressBar",this.hp/this.maxhp),this.GetGameObject("New ProgressBar").stopAllActions(),this.GetGameObject("New ProgressBar").opacity=255,this.GetGameObject("New ProgressBar").runAction(cc.sequence(cc.delayTime(1),cc.fadeTo(.2,0))),a||u.default.Instance().playSFX("hit"),r?this.showWLBaoji(o,d.default.getRandom(0,1)>.5):this.showFSHurt(o,d.default.getRandom(0,1)>.5),this.hp<=0){if(p.default.Instance.removeenemy(this.node,!1),this.GetGameObject("sp").runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(.2,0),cc.callFunc(function(){n.node.removeFromParent(!0)}))),l.default.user.double_income_time>d.default.getServerTime()&&(this.money*=2),2!=this.type){var c=cc.instantiate(this.getcoin_pre);c.parent=this.node.parent,c.getChildByName("lbl_add_coin").getComponent(cc.Label).string=d.default.formatNumber(this.money),c.position=this.node.position.add(cc.v3(0,50,0)),c.zIndex=1e3,c.scale=.5,l.default.user.coin+=this.money,c.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1.3),cc.moveBy(.2,0,80)),cc.delayTime(.8),cc.spawn(cc.moveBy(.5,50),cc.fadeTo(.5,50)),cc.removeSelf()))}this.playSkAni("spine:other/zhuoshao","effect",this.node,cc.v3(0,75,0),1).then(function(t){t.scale=2})}else this.playSkAni("spine:other/jizhong","animation",this.node,cc.v3(0,75,0),1),this.redendtime=d.default.getServerTime()+300}},e.prototype.slowdown=function(){var t=this;u.default.Instance().playSFX("skill_slow"),this.GetDragonAmature("sp").timeScale=.5,this.GetGameObject("jiansu").active=!0,this.GetGameObject("sp").stopAllActions(),this.GetGameObject("sp").runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t.GetGameObject("sp").color=cc.Color.WHITE,t.GetDragonAmature("sp").timeScale=1,t.GetGameObject("jiansu").active=!1})))},e.prototype.frozen=function(){var t=this;u.default.Instance().playSFX("skill_freeze"),this.bfrozen=!0,this.GetGameObject("fx_stun").stopAllActions(),this.GetGameObject("fx_stun").active=!0,this.purpleendtime=d.default.getServerTime()+1e3,this.GetGameObject("fx_stun").runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t.GetGameObject("fx_stun").active=!1,t.bfrozen=!1})))},e.prototype.update=function(t){if(t>1&&(t=1),this.redendtime>d.default.getServerTime()?this.GetGameObject("sp").color=cc.Color.RED.fromHEX("#7C82DE"):this.purpleendtime>d.default.getServerTime()?this.GetGameObject("sp").color=cc.Color.RED.fromHEX("#ED7373"):this.GetGameObject("sp").color=cc.Color.WHITE,!this.bfrozen&&p.default.Instance.path[this.pathindex]){var e=p.default.Instance.path[this.pathindex].sub(this.node.position);if(e.mag()<this.sped*t)this.node.position=p.default.Instance.path[this.pathindex],this.pathindex++,3==this.pathindex&&(this.GetGameObject("sp").scaleX=-.74),this.pathindex>=p.default.Instance.path.length&&(console.log("\u9003\u8fc7"),p.default.Instance.removeenemy(this.node,!0),this.node.removeFromParent(!0));else{var i=e.normalize().mul(n.mul*this.sped*t);this.node.position=this.node.position.add(i)}}},e.prototype.showFSHurt=function(t,e){void 0===e&&(e=!1);var n,i=cc.instantiate(this.GetGameObject("fs_hurt"));i.parent=this.node,e&&(i.x*=-1),i.getComponent(cc.Label).string=d.default.formatCoin(t),i.active=!0,n=e?[cc.v2(-10,50),cc.v2(-40,60),cc.v2(-60,20)]:[cc.v2(10,50),cc.v2(40,60),cc.v2(60,20)];var o=cc.bezierBy(1,n);i.runAction(cc.sequence(cc.spawn(cc.scaleTo(1,.6),o),cc.removeSelf()))},e.prototype.showWLBaoji=function(t,e){void 0===e&&(e=!1),u.default.Instance().playSFX("skill_crit");var n,i,o=cc.instantiate(this.GetGameObject("wl_baoji"));o.parent=this.node,e&&(o.x*=-1),o.getComponent(cc.Label).string=d.default.formatCoin(t),o.active=!0,o.scale=.2,e?(n=[cc.v2(-5,20),cc.v2(-8,30),cc.v2(-10,30)],i=[cc.v2(-5,-20),cc.v2(-8,-30),cc.v2(-10,-30)]):(n=[cc.v2(5,20),cc.v2(8,30),cc.v2(10,30)],i=[cc.v2(5,-20),cc.v2(8,-30),cc.v2(10,-30)]);var r=cc.bezierBy(.2,n),a=cc.bezierBy(.5,i);o.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1),r),cc.delayTime(.5),cc.spawn(cc.scaleTo(.5,.2),a,cc.fadeOut(.5)),cc.removeSelf()))},e.mul=1,r([m(cc.Prefab)],e.prototype,"getcoin_pre",void 0),n=r([_],e)}(s.default);n.default=y,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../DB":"DB","../HallScene":"HallScene"}],FairyBonusUI:[function(t,e,n){"use strict";cc._RF.push(e,"f1d79P4wcFK9KwHCsJWJWld","FairyBonusUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/AdCenter"),s=t("../../manager/Data"),l=t("../../manager/WxCenter"),u=t("../../utils/AudioMgr"),d=t("../../utils/Utils"),h=t("../DB"),p=cc._decorator,f=p.ccclass,_=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.superPot=[],e}return o(e,t),e.prototype.start=function(){c.default.Instance().showGridAd(),d.default.playBreath(this.GetGameObject("btn_ad")),l.default.aldReport("AirdropShow","show")},e.prototype.onDestroy=function(){c.default.Instance().hideGridAd(),t.prototype.onDestroy.call(this)},e.prototype.getSuperPot=function(t){void 0===t&&(t=!1);for(var e=s.default.user.GetMaxLv(),n=h.DB_droneRewards[e+""][1],i=t?8:4,o=[],r=0;r<i;r++)o.push(n);return o},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(u.default.Instance().playSFX("click"),n){case"btn_close":this.closeUI();break;case"btn_normal":l.default.aldReport("AirdropClick","click");var i=this.getSuperPot();s.default.user.DropGiftPts=s.default.user.DropGiftPts.concat(i),this.closeUI();break;case"btn_ad":l.default.aldReport("AirdropClick","click"),c.default.Instance().play(function(t){if(t){var n=e.getSuperPot(!0);s.default.user.DropGiftPts=s.default.user.DropGiftPts.concat(n),e.closeUI()}})}},r([f],e)}(a.default));n.default=_,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../DB":"DB"}],FairyItem:[function(t,e,n){"use strict";cc._RF.push(e,"fd0779orjRI8rleyDsPRVW2","FairyItem");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../utils/AudioMgr"),s=t("../../utils/Utils"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var t=this;this.node.runAction(cc.sequence(cc.delayTime(10),cc.callFunc(function(){t.ChuXian()})))},e.prototype.ChuXian=function(){var t=this;this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.position=cc.v3(-cc.winSize.width/2-200,cc.winSize.height/4-100)}),cc.moveTo(20,cc.winSize.width/2+200,cc.winSize.height/4-100)).repeatForever())},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(c.default.Instance().playSFX("click"),n){case"FairyItem":this.node.stopAllActions(),this.node.position=cc.v3(-cc.winSize.width/2-200,cc.winSize.height/4-100),this.node.runAction(cc.sequence(cc.delayTime(40),cc.callFunc(function(){e.ChuXian()}))),s.default.createUI("prefab/FairyBonusUI")}},r([u],e)}(a.default));n.default=d,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils"}],GameConst:[function(t,e,n){"use strict";cc._RF.push(e,"278a8hJybJP3aVcSqpkGbLn","GameConst"),Object.defineProperty(n,"__esModule",{value:!0}),n.share_urls=n.share_titles=n.GAME_NAME=void 0;var i=function(){function t(){}return t.local_data_key="local_data_key",t.OPEN_SLOT="OPEN_SLOT",t.NEW_PLANT="NEW_PLANT",t.BUY_PLANT="BUY_PLANT",t}();n.default=i,n.GAME_NAME="PVSZ",n.share_titles=["\u8b66\u544a\u26a0\ufe0f\u50f5\u5c38\u6f6e\u6b63\u5728\u6765\u88ad\uff0c\u8bf7\u914d\u7f6e\u9632\u5fa1!","\u6709\u4e00\u5929\uff0c\u82b1\u6735\u738b\u56fd\u91cc\u6765\u4e86\u4e00\u7fa4\u50f5\u5c38...","\u82b1\u56ed\u4fdd\u536b\u6218\u5373\u5c06\u6253\u54cd\uff0c\u5feb\u53bb\u5e2e\u52a9\u82b1\u6735\u4eec\u62b5\u5fa1\u5165\u4fb5\uff01"],n.share_urls=["https://cjj-app.oss-cn-beijing.aliyuncs.com/pvsz/pvsz0.png","https://cjj-app.oss-cn-beijing.aliyuncs.com/pvsz/pvsz1.png","https://cjj-app.oss-cn-beijing.aliyuncs.com/pvsz/pvsz2.png"],cc._RF.pop()},{}],GameEvent:[function(t,e,n){"use strict";cc._RF.push(e,"7698aOBsGFKDogqTQs289dG","GameEvent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventHash={},e.ower=null,e.type=null,e.callback=null,e}return o(e,t),e.prototype.register=function(t,e,n){var i={};i.ower=t,i.type=e,i.callback=n,this.eventHash.hasOwnProperty(e)||(this.eventHash[e]=[]),this.eventHash[e].push(i)},e.prototype.unregister=function(t,e){var n=this.eventHash[e];n&&n.length>0&&n.forEach(function(i,o){i.ower===t&&i.type===e&&n.splice(o,1)})},e.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.eventHash[t];if(i&&i.length>0)for(var o in i){var r=i[o];r.callback&&r.callback.apply(r,e)}},e}(t("../manager/Singleton").default);n.default=r,cc._RF.pop()},{"../manager/Singleton":"Singleton"}],HallScene:[function(t,e,n){"use strict";cc._RF.push(e,"b649a1nCtpCaLao7q4JfaAs","HallScene");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),l=t("../framwork/MsgHints"),u=t("../manager/Data"),d=t("../manager/WxCenter"),h=t("../utils/AudioMgr"),p=t("../utils/Utils"),f=t("./DB"),_=t("./prefab/AdLayer"),m=t("./prefab/ShareLayer"),y=t("./prefab/Enemy"),g=t("./prefab/LoseUI"),v=t("./prefab/LuPinResult"),b=t("./prefab/OfflineAwardUI"),w=t("./prefab/ShopLayer"),I=t("./prefab/VictoryUI"),O=t("./SlotItem"),A=t("./SoldierItem"),G=t("./prefab/CoinNotEnoughUI"),M=cc._decorator,T=M.ccclass,S=M.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemy_pre=null,e._lastdroptime=0,e.enemylist=[],e.wave_info=null,e.bFail=!1,e.createcomplete=!1,e.path=[],e.item_drag=null,e.autocomindexs=[-1,-1],e.items=[],e.bPauseAutoCom=!1,e.bInAutoCom=!1,e.bRecorder=!1,e.recordertime=0,e.pre_soldier=null,e.bChoosed=!1,e.touchPos=cc.Vec2.ZERO,e.touchendtime=0,e.bFirstSubContex=!0,e}var n;return o(e,t),n=e,Object.defineProperty(e,"Instance",{get:function(){return n._instance},enumerable:!1,configurable:!0}),e.prototype.hidemergetips=function(){for(var t=0,e=this.GetGameObject("slots").children;t<e.length;t++)e[t].getChildByName("fx_ground_merge").active=!1},e.prototype.showmergetips=function(t){for(var e=[],n=0,i=this.items;n<i.length;n++){var o=i[n];o.datacopy&&o.datacopy.lv==t&&0==o.droptype&&o.datacopy.lv<60&&e.push(o.index)}for(var r=this.GetGameObject("slots"),a=0;a<r.children.length;++a)r.children[a].getChildByName("fx_ground_merge").active=e.indexOf(a)>=0},e.prototype.update=function(t){if(t>1&&(t=1),this.SetText("lbl_coin",p.default.formatNumber(u.default.user.coin)+""),0!=this.recordertime){var e=Math.floor((p.default.getServerTime()-this.recordertime)/1e3);e>0&&this.SetText("lbl_luping",e+"s")}else this.SetText("lbl_luping","");this.enemylist.sort(function(t,e){return e.y-t.y});for(var n=0;n<this.enemylist.length;++n)this.enemylist[n].zIndex=n;if(this._lastdroptime+=t,this._lastdroptime>25*(u.default.user.drop_plant_time>p.default.getServerTime()?.3:1)){if(this.item_drag.datacopy)return;var i=Math.max(1,u.default.user.GetMaxLv()-p.default.getRandomInt(6,9));this.tryBuyPlant(i,3),this._lastdroptime=0}0!=this.touchendtime&&p.default.getServerTime()-this.touchendtime>5e3&&this.mergetip()},e.prototype.showImage=function(t){return a(this,void 0,void 0,function(){var e,n;return c(this,function(i){switch(i.label){case 0:return e=new cc.Node,n=e.addComponent(cc.Sprite),[4,p.default.loadRes(t,cc.SpriteFrame)];case 1:return n.spriteFrame=i.sent(),e.parent=this.node,e.y=200,e.scale=1.2,e.runAction(cc.sequence(cc.delayTime(2),cc.spawn(cc.moveBy(.5,0,100),cc.fadeTo(.5,0)),cc.removeSelf())),[2]}})})},e.prototype.removeenemy=function(t,e){var n=!1,i=!1;e&&(this.bFail=!0);for(var o=this.enemylist.length-1;o>=0;--o)if(t==this.enemylist[o]){this.enemylist.splice(o,1);break}if(this.createcomplete&&0==this.enemylist.length){if(this.bFail)if(u.default.user.wave>=this.wave_info[2]){u.default.user.wave=1,n=!0;var r=t.getComponent(y.default);p.default.createUI("prefab/LoseUI").then(function(t){t.getComponent(g.default).setInfo(r.getBossMoney())})}else u.default.user.wave=1,this.showImage("texture/defeat");else if(u.default.user.wave++,i=!0,u.default.user.wave>this.wave_info[2]){var a=t.getComponent(y.default).getBossMoney();this.node.runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(function(){p.default.createUI("prefab/VictoryUI").then(function(t){t.getComponent(I.default).setInfo(a)})}))),n=!0,u.default.user.wave=1,u.default.user.lv++,this.openNewSlot(),u.default.save(!0);var c=u.default.user.lv+"_"+u.default.user.wave;this.wave_info=f.DB_level[c],d.default.aldLevelReport(u.default.user.lv)}else h.default.Instance().playSFX("win_wave"),this.playSkAni("spine:other/shengjichenggong","effect",this.node,cc.v3(0,150,0),2);if(n)return;this.createwave(i)}},e.prototype.createwave=function(t){var e=this;void 0===t&&(t=!1),this.bFail=!1,this.createcomplete=!1;var n=u.default.user.lv+"_"+u.default.user.wave;if(this.wave_info=f.DB_level[n],!this.wave_info){var i="60_"+u.default.user.wave;this.wave_info=f.DB_level[i]}u.default.user.wave==this.wave_info[2]?(h.default.Instance().playBGM("bgBoss"),this.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){p.default.createUI("prefab/BossCommingUI")})))):1==u.default.user.wave&&h.default.Instance().playBGM("BGM1");for(var o,r=[],a=0;a<this.wave_info[4];++a)r.push(this.wave_info[3]);for(o=r.length,a=0;a<this.wave_info[6];++a)r.push(this.wave_info[5]);var c=function(t){var n=r[t];s.node.runAction(cc.sequence(cc.delayTime(2.2*t),cc.callFunc(function(){var i=cc.instantiate(e.enemy_pre);i.parent=e.GetGameObject("node_obj"),i.getComponent(y.default).setID(n,t>=o),e.enemylist.push(i),t==r.length-1&&(e.createcomplete=!0)})))},s=this;for(a=0;a<r.length;++a)c(a);this.SetText("lbl_cur_lv",u.default.user.lv+""),this.SetText("lbl_waves",u.default.user.wave+"/"+this.wave_info[2]),this.SetText("lbl_pre_lv",u.default.user.lv-1+""),this.SetText("lbl_nex_lv",u.default.user.lv+1+""),t&&p.default.playBreath(this.GetGameObject("lbl_waves"),1,3,.5,!1)},e.prototype.initComposeItems=function(){for(var t=u.default.user.ComPlants,e={},n=t.length-1;n>=0;n--)t[n].lv>60&&(t[n].lv=60),1!=e[t[n].index]?e[t[n].index]=1:(t.splice(n,1),console.warn("\u9519\u8bef...\u4fee\u6b63"));for(n=t.length-1;n>=0;n--)this.items[t[n].index]&&this.items[t[n].index].setItemData(t[n])},e.prototype.getItemByPos=function(t){for(var e=0;e<this.items.length;++e)if(this.items[e].node.getBoundingBox().contains(t))return this.items[e].node.getComponent(A.default);return null},e.prototype.setdragitempos=function(t){t=this.GetGameObject("node_com").convertToWorldSpaceAR(t),t=this.GetGameObject("item_drag").parent.convertToNodeSpaceAR(t),this.GetGameObject("item_drag").position=t},e.prototype.start=function(){return a(this,void 0,void 0,function(){var t,e,i,o,r,a,s,h,f,m,y=this;return c(this,function(c){switch(c.label){case 0:for(d.default.aldReport("HomeShow","show"),this.hidemergetips(),n._instance=this,d.default.init(),t=this.GetGameObject("slots"),e=0,i=0,o=t.children;i<o.length;i++)o[i].getComponent(O.default).setIndex(++e);return[4,this.initView()];case 1:for(c.sent(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){y.tryAutocom(),y.item_drag.node.active||(u.default.user.DropGiftPts.length>0&&y.tryBuyPlant(u.default.user.DropGiftPts[0],4)&&u.default.user.DropGiftPts.shift(),u.default.user.AdBuyNotDrop.length>0&&y.tryBuyPlant(u.default.user.AdBuyNotDrop[0],2)&&u.default.user.AdBuyNotDrop.shift())})).repeatForever()),u.default.user.auto_com_time=Math.max(0,u.default.user.auto_com_time),u.default.user.double_income_time=Math.max(0,u.default.user.double_income_time),u.default.user.drop_plant_time=Math.max(0,u.default.user.drop_plant_time),u.default.user.double_att_time=Math.max(0,u.default.user.double_att_time),this.updateBuyButton(),r=(p.default.getServerTime()-u.default.user.serverTime)/1e3,0!=u.default.user.serverTime&&r>180&&(r=Math.min(21600,r),a=u.default.user.getOfflineEarning(r/60),p.default.createUI("prefab/OfflineAwardUI",null,function(t){t.getComponent(b.default).data=a})),s=0,h=this.GetGameObject("node_path").children;s<h.length;s++)f=h[s],this.path.push(f.position);return this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){y.createwave()}))),this.GetGameObject("bottom").runAction(cc.sequence(cc.callFunc(function(){var t=u.default.user.double_att_time-p.default.getServerTime()>0,e=u.default.user.double_income_time-p.default.getServerTime()>0,n=u.default.user.drop_plant_time-p.default.getServerTime()>0;u.default.user.double_att_time-p.default.getServerTime()>6e4*_.MAX_DOUBLE_ATT_TIME&&(u.default.user.double_att_time=p.default.getServerTime()),u.default.user.double_income_time-p.default.getServerTime()>6e4*_.MAX_DOUBLE_INCOME_TIME&&(u.default.user.double_income_time=p.default.getServerTime()),u.default.user.auto_com_time-p.default.getServerTime()>6e4*_.MAX_AUTO_COM_TIME&&(u.default.user.auto_com_time=p.default.getServerTime()),u.default.user.drop_plant_time-p.default.getServerTime()>6e4*_.MAX_DROP_PLANT_TIME&&(u.default.user.drop_plant_time=p.default.getServerTime()),y.SetText("att_x2_time",t?p.default.getTimeStrByS((u.default.user.double_att_time-p.default.getServerTime())/1e3):"\u6253\u9e21\u8840"),y.SetText("rewardx2_time",e?p.default.getTimeStrByS((u.default.user.double_income_time-p.default.getServerTime())/1e3):"\u53cc\u500d"),u.default.user.auto_com_time-p.default.getServerTime()>0?y.SetText("auto_time",p.default.getTimeStrByS((u.default.user.auto_com_time-p.default.getServerTime())/1e3)):y.SetText("auto_time","\u81ea\u52a8\u5408\u6210"),y.SetText("lbl_drop_plant",n?p.default.getTimeStrByS((u.default.user.drop_plant_time-p.default.getServerTime())/1e3):"\u6389\u843d"),y.GetGameObject("fx_bt_angry").active=y.GetGameObject("att_x2_time").active}),cc.delayTime(1)).repeatForever()),this.GetGameObject("btn_delete").opacity=0,this.GetGameObject("guild_0").active=0==u.default.user.guideIndex,this.GetGameObject("lupin_gem").runAction(cc.sequence(cc.rotateTo(.3,20),cc.rotateTo(.3,-10),cc.rotateTo(.2,0),cc.delayTime(3)).repeatForever()),this.GetGameObject("btn_Recorder")&&(this.GetGameObject("btn_Recorder").active=window.tt),window.tt&&((m=window.tt.getGameRecorderManager()).onStart(function(){y.GetGameObject("lupin_gem").active=!1,y.GetGameObject("btn_VCR").active=!1,y.GetGameObject("btn_end").active=!0,y.GetGameObject("btn_Recorder").stopAllActions(),y.GetGameObject("btn_Recorder").runAction(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.5,1)).repeatForever()),console.log("tt\u5f55\u5c4f\u5f00\u59cb"),y.recordertime=p.default.getServerTime()}),m.onStop(function(t){if(y.bRecorder=!1,y.GetGameObject("btn_Recorder").stopAllActions(),y.GetGameObject("lupin_gem").active=!0,y.GetGameObject("btn_Recorder").scale=1,y.GetGameObject("btn_VCR").active=!0,y.GetGameObject("btn_end").active=!1,console.log("tt\u5f55\u5c4f\u7ed3\u675f"),console.log(t.videoPath),p.default.getServerTime()-y.recordertime<3e3)return l.default.show("\u5f55\u5c4f\u65f6\u95f4\u8fc7\u77ed"),void(y.recordertime=0);y.recordertime=0,p.default.createUI("prefab/LuPinResult",null,function(e){e.getComponent(v.default).setData(t)})})),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this),cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),[2]}})})},e.prototype.onGameHide=function(){},e.prototype.onDestroy=function(){cc.game.off(cc.game.EVENT_SHOW,this.onGameShow),cc.game.off(cc.game.EVENT_HIDE,this.onGameHide),t.prototype.onDestroy.call(this)},e.prototype.onGameShow=function(){0!=p.default.sharetime&&p.default.sharecallback&&(p.default.getServerTime()-p.default.sharetime>=2e3?p.default.sharecallback(!0):(l.default.show("\u5206\u4eab\u5931\u8d25"),p.default.sharecallback(!1))),p.default.sharetime=0,p.default.sharecallback=null},e.prototype.openNewSlot=function(){var t=O.default.getCurOpen();if(!(t<0||f.DB_slot[t].price<u.default.user.lv)){u.default.user.slots[t]=1,u.default.save();var e=this.GetGameObject("slots").children[t];e&&(e.getComponent(O.default).setIndex(t),l.default.show("\u6210\u529f\u89e3\u9501\u65b0\u4f4d\u7f6e"))}},e.prototype.initView=function(){return a(this,void 0,void 0,function(){var t,e,n,i,o,r,a=this;return c(this,function(){for(t=this.GetGameObject("node_com"),e=0,n=0;n<12;++n)(i=cc.instantiate(this.pre_soldier)).parent=t,i.position=this.GetGameObject("slots").children[n].position,i.name="itme"+e,(o=i.getComponent(A.default)).index=e,this.items.push(o),++e;return(r=cc.instantiate(this.pre_soldier)).parent=t.parent,r.name="item_drag",r.x=-1e3,this.item_drag=this.GetGameObject("item_drag").getComponent(A.default),this.item_drag.node.active=!1,this.item_drag.bDrag=!0,this.initComposeItems(),t.on(cc.Node.EventType.TOUCH_START,function(e){a.bPauseAutoCom=!0,a.GetGameObject("node_com").stopAllActions(),a.item_drag.node.active&&a.item_drag.datacopy&&(a.item_drag.node.stopAllActions(),a.item_drag.linkItem.setItemData(a.item_drag.datacopy),a.item_drag.node.active=!1,a.autocomindexs[0]=-1,a.autocomindexs[1]=-1,a.item_drag.linkItem=null,a.GetGameObject("node_com").stopAllActions(),cc.log("\u53d6\u6d88\u5f53\u524d\u5408\u6210")),a.item_drag.datacopy=null;var n=e.getLocation();n=t.convertToNodeSpaceAR(n);var i=a.getItemByPos(n);i&&0!=i.droptype&&(i.droptype=0,i.updateItem()),i&&i.datacopy&&0==i.droptype?(a.touchPos=n,a.bChoosed=!0,a.setdragitempos(i.node.position),a.item_drag.index=i.index,a.item_drag.setItemData(i.datacopy),a.item_drag.linkItem=i,a.showmergetips(i.datacopy.lv)):(a.item_drag.node.active=!1,a.autocomindexs[0]=-1,a.autocomindexs[1]=-1)},this),t.on(cc.Node.EventType.TOUCH_MOVE,function(e){var n=e.getLocation();if(n=t.convertToNodeSpaceAR(n),a.bChoosed&&n.sub(a.touchPos).mag()>15){if(null==a.item_drag.datacopy)return;a.GetGameObject("btn_delete").opacity=255,a.item_drag.node.active=!0,a.item_drag.linkItem.setItemData(null),a.setdragitempos(n);var i=a.GetGameObject("btn_delete").position;i=a.GetGameObject("btn_delete").parent.convertToWorldSpaceAR(i)}},this),t.on(cc.Node.EventType.TOUCH_END,this.docomp,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.docomp,this),[2]})})},e.prototype.tryAutocom=function(){var t=this;if(!this.bPauseAutoCom&&!this.bInAutoCom&&p.default.getServerTime()<u.default.user.auto_com_time&&!this.bInAutoCom){this.initComposeItems();for(var e,n=function(n){if(!i.items[n]||!i.items[n].datacopy)return"continue";for(var o=n+1;o<i.items.length;++o)if(i.items[o]&&i.items[o].datacopy){if(i.bInAutoCom)return{value:void 0};if(i.items[n].datacopy.lv==i.items[o].datacopy.lv&&0==i.items[n].droptype&&0==i.items[o].droptype&&i.items[n].datacopy.lv<60)return i.autocomindexs[0]=i.items[n].index,i.autocomindexs[1]=i.items[o].index,i.item_drag.linkItem=i.items[o],i.item_drag.index=i.items[o].index,i.item_drag.setItemData(i.items[o].datacopy),i.item_drag.node.active=!0,i.items[o].setItemData(null),i.item_drag.node.position=i.items[o].node.position,i.setdragitempos(i.items[o].node),e=i.GetGameObject("node_com").convertToWorldSpaceAR(i.items[n].node.position),e=i.GetGameObject("item_drag").parent.convertToNodeSpaceAR(e),i.bInAutoCom=!0,i.item_drag.node.stopAllActions(),i.item_drag.node.runAction(cc.sequence(cc.moveTo(.13,cc.v2(e.x,e.y)),cc.callFunc(function(){t.comani(t.items[n]),t.bInAutoCom=!1}))),{value:void 0}}},i=this,o=0;o<this.items.length;++o){var r=n(o);if("object"==typeof r)return r.value}}},e.prototype.docomp=function(t){var e=this;this.touchendtime=p.default.getServerTime(),this.hidemergetips(),this.GetGameObject("btn_delete").stopAllActions(),this.GetGameObject("btn_delete").runAction(cc.sequence(cc.delayTime(.25),cc.fadeTo(.25,0))),this.GetGameObject("node_com").runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.bPauseAutoCom=!1,e.bInAutoCom=!1}))),this.bChoosed=!1;var n=t?t.getLocation():cc.Vec2.ZERO;if(this.item_drag.node.active){if(!this.item_drag.datacopy)return;var i=this.GetGameObject("btn_delete").position;if(i=this.GetGameObject("btn_delete").parent.convertToWorldSpaceAR(i),n.sub(cc.v2(i.x,i.y)).mag()<100){this.item_drag.node.active=!1,this.autocomindexs[0]=-1,this.autocomindexs[1]=-1;for(var o=0,r=0;r<this.items.length;++r)this.items[r].datacopy&&o++;if(o<=2)return l.default.show("\u690d\u7269\u6570\u91cf\u8fc7\u5c11\u4e0d\u80fd\u5220\u9664"),this.item_drag.linkItem.setItemData(this.item_drag.datacopy),this.item_drag.linkItem=null,void(this.item_drag.node.active=!1);if(this.item_drag.datacopy.lv>=u.default.user.GetMaxLv())return l.default.show("\u6700\u9ad8\u7b49\u7ea7\u690d\u7269\u5c31\u4e0d\u5220\u9664\u4e86\u5427\uff01"),this.item_drag.linkItem.setItemData(this.item_drag.datacopy),this.item_drag.linkItem=null,void(this.item_drag.node.active=!1);u.default.user.DropWuJiang(this.item_drag.datacopy.index),this.item_drag.linkItem.setItemData(null),this.item_drag.linkItem=null}n=this.GetGameObject("node_com").convertToNodeSpaceAR(n);var a=this.getItemByPos(n);if(null==a||0==u.default.user.slots[a.index]||a==this.item_drag.linkItem||a&&0!=a.droptype)return this.item_drag.linkItem&&this.item_drag.linkItem.setItemData(this.item_drag.datacopy),this.item_drag.linkItem=null,this.item_drag.node.stopAllActions(),this.item_drag.node.active=!1,this.autocomindexs[0]=-1,void(this.autocomindexs[1]=-1);if(!a.datacopy)return this.item_drag.node.active=!1,this.autocomindexs[0]=-1,this.autocomindexs[1]=-1,u.default.user.CompMove(this.item_drag.linkItem.index,a.index),a.setItemData(this.item_drag.datacopy),this.item_drag.linkItem.setItemData(null),void(this.item_drag.linkItem=null);if(a.datacopy.open==this.item_drag.datacopy.open&&a.datacopy.lv==this.item_drag.datacopy.lv&&a.datacopy.index!=this.item_drag.datacopy.index&&0==a.droptype&&a.datacopy.lv<60)this.comani(a);else{this.item_drag.node.active=!1,this.autocomindexs[0]=-1,this.autocomindexs[1]=-1,u.default.user.CompMove(this.item_drag.linkItem.index,a.index);var c=JSON.parse(JSON.stringify(a.datacopy));a.setItemData(this.item_drag.datacopy),this.item_drag.linkItem.setItemData(c)}}else{if(!t)return;this.item_drag.linkItem=null}},e.prototype.comani=function(t){var e=u.default.user.ComposePlant(t.index,this.item_drag.datacopy.index);if(this.GetGameObject("guild_1").active=!1,1==u.default.user.guideIndex&&(u.default.user.guideIndex++,u.default.save()),e){var n=u.default.user.getPlantInfo(t.index);t.setItemData(n),this.GetGameObject("item_drag").active=!1,this.item_drag.datacopy=null,this.item_drag.linkItem=null,this.autocomindexs=[-1,-1];var i=this.GetGameObject("node_com").convertToWorldSpaceAR(t.node.position);i=this.GetGameObject("item_drag").parent.convertToNodeSpaceAR(i),this.playSkAni("spine:other/effect_hecheng","effect",this.GetGameObject("item_drag").parent,i.add(cc.v3(0,20,0)),1)}},e.prototype.updateBuyButton=function(){return a(this,void 0,void 0,function(){var t,e,n,i,o,r;return c(this,function(a){switch(a.label){case 0:return(t=u.default.user.GetMaxLv()-3)<1&&(t=1),this.SetText("lbl_buy_lvl","LV."+t),this.SetText("lbl_buy_cost",p.default.formatNumber(u.default.user.BuyPrice(t))),e="spine:flower"+t+"_ske",n="spine:flower"+t+"_tex",i=this.GetDragonAmature("chickbuy"),o=i,[4,p.default.loadRes(e,dragonBones.DragonBonesAsset)];case 1:return o.dragonAsset=a.sent(),r=i,[4,p.default.loadRes(n,dragonBones.DragonBonesAtlasAsset)];case 2:return r.dragonAtlasAsset=a.sent(),i.armatureName="Armature",i.playAnimation("idleL",0),[2]}})})},e.prototype.tryBuyPlant=function(t,e){for(var n=null,i=0;i<12;++i)if(0!=u.default.user.slots[i]&&!this.items[i].datacopy&&this.autocomindexs[0]!=i&&this.autocomindexs[1]!=i){n=this.items[i];break}if(t||(t=u.default.user.GetMaxLv()-3)<1&&(t=1),n){if(0==e){var o=u.default.user.BuyPrice(t);if(u.default.user.BuyPrice(t)>u.default.user.coin){var r=0;return u.default.user.today_getchick_times<u.default.user.today_getchick_total?r=1:u.default.user.today_getcoin_times<u.default.user.today_getcoin_total&&(r=2),void(r>0?p.default.createUI("prefab/CoinNotEnough").then(function(t){t.getComponent(G.default).setType(r)}):l.default.show("\u91d1\u5e01\u4e0d\u8db3"))}u.default.user.coin-=o}else if(1==e){var a=Math.min(5,Number(f.DB_plant[t-1][6]));if(a>u.default.user.gem)return void l.default.show("\u94bb\u77f3\u4e0d\u8db3");u.default.user.gem-=a}else 2==e||e>=3&&console.log("\u82b1\u76c6\u6389\u843d");return h.default.Instance().playSFX("flower_pot_land"),this.docomp(null),n.setItemData(u.default.user.BuyPlant(n.index,t),e),this.updateBuyButton(),!0}return e<=2&&(l.default.show("\u4f4d\u7f6e\u4e0d\u591f\u5566\uff01"),this.GetGameObject("btn_delete").stopAllActions(),this.GetGameObject("btn_delete").opacity=255,this.GetGameObject("btn_delete").runAction(cc.sequence(cc.delayTime(.25),cc.fadeTo(.25,0)))),!1},e.prototype.mergetip=function(){if(this.touchendtime=p.default.getServerTime(),!this.bPauseAutoCom&&!this.bInAutoCom&&!this.bInAutoCom)for(var t=0;t<this.items.length;++t)if(this.items[t]&&this.items[t].datacopy)for(var e=t+1;e<this.items.length;++e)if(this.items[e]&&this.items[e].datacopy){if(this.bInAutoCom)return;if(this.items[t].datacopy.lv==this.items[e].datacopy.lv&&0==this.items[t].droptype&&0==this.items[e].droptype&&this.items[t].datacopy.lv<60){var n=this.items[t].index,i=this.items[e].index;this.GetGameObject("guild_1").active=!0,this.GetGameObject("guild_1").zIndex=cc.macro.MAX_ZINDEX,this.GetGameObject("guild_1").stopAllActions();var o=this.GetGameObject("slots").children[n].position,r=this.GetGameObject("slots").children[i].position;return this.GetGameObject("guild_1").position=o,void this.GetGameObject("guild_1").runAction(cc.sequence(cc.moveTo(1,cc.v2(r.x,r.y)),cc.moveTo(.1,cc.v2(o.x,o.y))).repeatForever())}}},e.prototype.onBtnClicked=function(t){var e=t.target.name;switch(h.default.Instance().playSFX("click"),e){case"btn_setting":p.default.createUI("prefab/SettingUI");break;case"btn_sign":p.default.createUI("prefab/SignUI");break;case"btn_buy":this.tryBuyPlant(null,0),this.GetGameObject("guild_0").active=!1,0==u.default.user.guideIndex&&(u.default.user.guideIndex++,u.default.save()),1==u.default.user.guideIndex&&this.mergetip();break;case"bt_fast_gen":p.default.createUI("prefab/AdLayer").then(function(t){t.getComponent(_.default).setType(_.EADLAYER.DROP_PLANT)});break;case"btn_angry":p.default.createUI("prefab/AdLayer").then(function(t){t.getComponent(_.default).setType(_.EADLAYER.DOUBLE_ATT)});break;case"btn_double_coin":p.default.createUI("prefab/AdLayer").then(function(t){t.getComponent(_.default).setType(_.EADLAYER.DOUBLE_INCOME)});break;case"bt_auto_merge":p.default.createUI("prefab/AdLayer").then(function(t){t.getComponent(_.default).setType(_.EADLAYER.AUTO_COM)});break;case"btn_shop":w.default.show();break;case"btn_delete":255==this.GetGameObject("btn_delete").opacity&&l.default.show("\u62d6\u52a8\u5230\u8fd9\u91cc\u5356\u51fa");break;case"btn_inviate":d.default.aldReport("InvitationClick","click"),p.default.createUI("prefab/ShareLayer").then(function(t){t.getComponent(m.default).setData()});break;case"btn_Recorder":0==this.bRecorder?(cc.log("\u5f00\u59cb\u5f55\u5c4f"),this.bRecorder=!0,window.tt&&window.tt.getGameRecorderManager().start({duration:30})):(cc.log("\u7ed3\u675f\u5f55\u5c4f"),this.bRecorder=!1,window.tt&&window.tt.getGameRecorderManager().stop())}},e._instance=null,r([S(cc.Prefab)],e.prototype,"enemy_pre",void 0),r([S(cc.Prefab)],e.prototype,"pre_soldier",void 0),n=r([T],e)}(s.default);n.default=C,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../framwork/MsgHints":"MsgHints","../manager/Data":"Data","../manager/WxCenter":"WxCenter","../utils/AudioMgr":"AudioMgr","../utils/Utils":"Utils","./DB":"DB","./SlotItem":"SlotItem","./SoldierItem":"SoldierItem","./prefab/AdLayer":"AdLayer","./prefab/CoinNotEnoughUI":"CoinNotEnoughUI","./prefab/Enemy":"Enemy","./prefab/LoseUI":"LoseUI","./prefab/LuPinResult":"LuPinResult","./prefab/OfflineAwardUI":"OfflineAwardUI","./prefab/ShareLayer":"ShareLayer","./prefab/ShopLayer":"ShopLayer","./prefab/VictoryUI":"VictoryUI"}],ListItem:[function(t,e,n){"use strict";cc._RF.push(e,"66c9a84a69BcLUb4nTwbgy6","ListItem");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,c=cc._decorator,s=c.ccclass,l=c.property,u=c.disallowMultiple,d=c.menu,h=c.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(a||(a={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=a.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e._selected=!1,e._eventReg=!1,e}return o(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=t;break;case a.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this._btnCom=this.node.getComponent(cc.Button),this._btnCom||(this.selectedMode,a.NONE),this.selectedMode==a.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype._registerEvent=function(){if(this._btnCom&&this.list.selectedMode>0&&!this._eventReg){var t=new cc.Component.EventHandler;t.target=this.node,t.component="ListItem",t.handler="onClickThis",this._btnCom.clickEvents.unshift(t),this._eventReg=!0}},e.prototype.showAni=function(t,e,n){var i,o=this;switch(t){case 0:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:i=[cc.scaleTo(.3,.1)]}(e||n)&&i.push(cc.callFunc(function(){if(n){o.list._delSingleItem(o.node);for(var t=o.list.displayData.length-1;t>=0;t--)if(o.list.displayData[t].id==o.listId){o.list.displayData.splice(t,1);break}}e()})),this.node.runAction(cc.sequence(i))},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([l({type:cc.Sprite,tooltip:!1})],e.prototype,"icon",void 0),r([l({type:cc.Node,tooltip:!1})],e.prototype,"title",void 0),r([l({type:cc.Enum(a),tooltip:!1})],e.prototype,"selectedMode",void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>a.NONE}})],e.prototype,"selectedFlag",void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==a.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),r([s,u(),d("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),h(-5001)],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],List:[function(t,e,n){"use strict";cc._RF.push(e,"747f8Ttu9JGQrJfzFDk8XpT","List");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,c,s,l=cc._decorator,u=l.ccclass,d=l.property,h=l.disallowMultiple,p=l.menu,f=l.executionOrder,_=t("./ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(a||(a={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(c||(c={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(s||(s={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=a.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=c.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.lackCenter=!1,e._updateRate=2,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=s.NONE,e.selectedEvent=null,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return o(e,t),Object.defineProperty(e.prototype,"slideModel",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling(null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,n=this;if(n.selectedMode!=s.SINGLE||t!=n._selectedId)switch(n.selectedMode){case s.SINGLE:if(t==n._selectedId)return;if(!(e=n.getItemByListId(t))&&t>=0)return;var i=void 0;if(n._selectedId>=0?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=t,e&&((i=e.getComponent(_.default)).selected=!0),n._lastSelectedId>=0){var o=n.getItemByListId(n._lastSelectedId);o&&(o.getComponent(_.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t,n._lastSelectedId);break;case s.MULT:if(!(e=n.getItemByListId(t)))return;i=e.getComponent(_.default),n._selectedId>=0&&(n._lastSelectedId=n._selectedId),n._selectedId=t;var r=!i.selected;i.selected=r;var a=n.multSelected.indexOf(t);r&&a<0?n.multSelected.push(t):!r&&a>=0&&n.multSelected.splice(a,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t,n._lastSelectedId,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._numItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e._onScrolling(null);else{var n=e.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var i=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<i;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(o=0;o<t;o++)e._createOrUpdateItem2(o);e.actualNumItems=t}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.start=function(){this._init()},e.prototype.onEnable=function(){this._registerEvent(),this._init()},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on("touch-up",t._onScrollTouchUp,t),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0)},e.prototype._unregisterEvent=function(){var t=this;t.node.off("touch-up",t._onScrollTouchUp,t),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t._scrollView)if(t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(t.templateType==a.PREFAB?t.tmpPrefab.data:t.tmpNode),t._slideMode!=c.ADHERING&&t._slideMode!=c.PAGE||(t._scrollView.inertia=!1),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!");else cc.error(t.node.name+" no assembly cc.ScrollView!")},e.prototype.setTemplateItem=function(t){if(t){var e=this;switch(e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(e._itemTmp.width,e._itemTmp.height),e.selectedMode==s.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=e.content.width-e._leftGap-e._rightGap;for(e._colLineNum=1;;){if(n-(e._colLineNum*e._itemSize.width+(e._colLineNum-1)*e._columnGap)<0){e._colLineNum--;break}e._colLineNum++}e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var i=e.content.height-e._topGap-e._bottomGap;for(e._colLineNum=1;;){if(i-(e._colLineNum*e._itemSize.height+(e._colLineNum-1)*e._lineGap)<0){e._colLineNum--;break}e._colLineNum++}e._sizeType=!1}}}},e.prototype.checkInited=function(t){var e=t||!0;return!!this._inited||(e&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e.customSize){var n=e._getFixedSize(null);t=e._leftGap+n.val+e._itemSize.width*(e._numItems-n.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e.customSize?(n=e._getFixedSize(null),t=e._topGap+n.val+e._itemSize.height*(e._numItems-n.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*i+e._lineGap*(i-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*o+e._columnGap*(o-1)+e._rightGap}}var r,a=e.content.getComponent(cc.Layout);a&&(a.enabled=!1),e._allItemSize=t,e._sizeType?((r=t<e.node.height?e.node.height-.1:t)<0&&(r=0),e._lackSize=e.lackCenter?r:null,e._allItemSizeNoBorder=e._allItemSize-e._topGap-e._bottomGap,e.content.height=r):((r=t<e.node.width?e.node.width-.1:t)<0&&(r=0),e._lackSize=e.lackCenter?r:null,e._allItemSizeNoBorder=e._allItemSize-e._leftGap-e._rightGap,e.content.width=r)},e.prototype._onScrolling=function(t){if(null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning&&(this._calcViewPos(),this._virtual)){this.displayData=[];var e=void 0,n=0,i=this._numItems-1;if(this.customSize)for(var o=!1;n<=i&&!o;n++)switch(e=this._calcItemPos(n),this._align){case cc.Layout.Type.HORIZONTAL:e.right>=this.viewLeft&&e.left<=this.viewRight?this.displayData.push(e):0!=n&&this.displayData.length>0&&(o=!0);break;case cc.Layout.Type.VERTICAL:e.bottom<=this.viewTop&&e.top>=this.viewBottom?this.displayData.push(e):0!=n&&this.displayData.length>0&&(o=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:e.bottom<=this.viewTop&&e.top>=this.viewBottom?this.displayData.push(e):0!=n&&this.displayData.length>0&&(o=!0);break;case cc.Layout.AxisDirection.VERTICAL:e.right>=this.viewLeft&&e.left<=this.viewRight?this.displayData.push(e):0!=n&&this.displayData.length>0&&(o=!0)}}else{var r=this._itemSize.width+this._columnGap,a=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:n=(this.viewLeft+this._leftGap)/r,i=(this.viewRight+this._rightGap)/r;break;case 2:n=(-this.viewRight-this._rightGap)/r,i=(-this.viewLeft-this._leftGap)/r;break;case 3:n=(-this.viewTop-this._topGap)/a,i=(-this.viewBottom-this._bottomGap)/a;break;case 4:n=(this.viewBottom+this._bottomGap)/a,i=(this.viewTop+this._topGap)/a}for(n=Math.floor(n)*this._colLineNum,i=Math.ceil(i)*this._colLineNum,n<0&&(n=0),--i>=this._numItems&&(i=this._numItems-1);n<=i;n++)this.displayData.push(this._calcItemPos(n))}if(this.displayData.length<=0||!this._numItems)return void this._delRedundantItem();this.firstListId=this.displayData[0].id,this.actualNumItems=this.displayData.length;var c=this._lastDisplayData.length;if(this._forceUpdate||this.actualNumItems!=c||this.firstListId!=this._lastDisplayData[0]||this.displayData[this.actualNumItems-1].id!=this._lastDisplayData[c-1])if(this._lastDisplayData=[],this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._delRedundantItem(),this._updateCounter=0,this._updateDone=!0);else{for(var s=0;s<this.actualNumItems;s++)this._createOrUpdateItem(this.displayData[s]);this._delRedundantItem(),this._forceUpdate=!1}this._calcNearestItem()}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,n,i,o,r,a,c,s;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this.customSize){var l=this._getFixedSize(t);r=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(u=this.customSize[t])>0?u:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return a=r+e,this.lackCenter&&this._lackSize>=0&&(r+=d=this.content.width/2-this._allItemSizeNoBorder/2,a+=d),{id:t,left:r,right:a,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this.customSize?(l=this._getFixedSize(t),a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(u=this.customSize[t])>0?u:this._itemSize.width):(a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),r=a-e,this.lackCenter&&this._lackSize>=0&&(r-=d=this.content.width/2-this._allItemSizeNoBorder/2,a-=d),{id:t,right:a,left:r,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this.customSize?(l=this._getFixedSize(t),i=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),n=(u=this.customSize[t])>0?u:this._itemSize.height):(i=-this._topGap-(this._itemSize.height+this._lineGap)*t,n=this._itemSize.height),o=i-n,this.lackCenter&&this._lackSize>=0&&(i-=d=this.content.height/2-this._allItemSizeNoBorder/2,o-=d),{id:t,top:i,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var u,d;if(this.customSize)l=this._getFixedSize(t),o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),n=(u=this.customSize[t])>0?u:this._itemSize.height;else o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,n=this._itemSize.height;return i=o+n,this.lackCenter&&this._lackSize>=0&&(i+=d=this.content.height/2-this._allItemSizeNoBorder/2,o+=d),{id:t,top:i,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var h=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s=(o=(i=-this._topGap-(this._itemSize.height+this._lineGap)*h)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:i=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*h)+this._itemSize.height,s=o+this._itemTmp.anchorY*this._itemSize.height}switch(c=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:c+=this._itemTmp.anchorX*this._itemSize.width,c-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:c+=(1-this._itemTmp.anchorX)*this._itemSize.width,c-=(1-this.content.anchorX)*this.content.width,c*=-1}return{id:t,top:i,bottom:o,x:c,y:s};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=(r=this._leftGap+(this._itemSize.width+this._columnGap)*h)+this._itemSize.width,c=r+this._itemTmp.anchorX*this._itemSize.width,c-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:c=(r=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*h)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,c+=(1-this.content.anchorX)*this.content.width}switch(s=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s-=(1-this._itemTmp.anchorY)*this._itemSize.height,s+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:s-=this._itemTmp.anchorY*this._itemSize.height,s+=this.content.anchorY*this.content.height,s*=-1}return{id:t,left:r,right:a,x:c,y:s}}}},e.prototype._getFixedSize=function(t){if(!this.customSize)return null;null==t&&(t=this._numItems);var e=0,n=0;for(var i in this.customSize)parseInt(i)<t&&(e+=this.customSize[i],n++);return{val:e,count:n}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}t._onScrolling(null),t._slideMode!=c.ADHERING||t.adhering?t._slideMode==c.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onScrollTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==c.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==c.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere())},e.prototype._pageAdhere=function(){var t=this;if(!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,n=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>n)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(t){if(t>1&&(t=1),!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.actualNumItems?this.actualNumItems:this._updateCounter+this.frameByFrameRenderNum,n=this._updateCounter;n<e;n++){var i=this.displayData[n];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.actualNumItems-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._scrollView.isScrolling()||(this._doneAfterUpdate=!1)):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem()):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,n=this._updateCounter;n<e;n++)this._createOrUpdateItem2(n);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem()},e.prototype._createOrUpdateItem=function(t){var e,n=this.getItemByListId(t.id);n?this._forceUpdate&&this.renderEvent&&(n.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(n),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t.id)):((n=this._pool.size()?this._pool.get():cc.instantiate(this._itemTmp)).setPosition(cc.v2(t.x,t.y)),this._resetItemSize(n),this.content.addChild(n),n.setSiblingIndex(this.content.childrenCount-1),(e=n.getComponent(_.default)).listId=t.id,e.list=this,e._registerEvent(),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t.id)),this._resetItemSize(n),this._updateListItem(e),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,n=this.content.children[t];n?this._forceUpdate&&this.renderEvent&&((e=n.getComponent(_.default)).listId=t,this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t)):(n=cc.instantiate(this._itemTmp),this.content.addChild(n),(e=n.getComponent(_.default)).listId=t,e.list=this,e._registerEvent(),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>s.NONE)switch(this.selectedMode){case s.SINGLE:t.selected=this.selectedId==t.listId;break;case s.MULT:t.selected=this.multSelected.indexOf(t.listId)>=0}},e.prototype._resetItemSize=function(t){var e=t.getComponent(_.default);if(this.customSize&&this.customSize[e.listId]){var n=this.customSize[e.listId];this._align==cc.Layout.Type.HORIZONTAL?t.width=n:this._align==cc.Layout.Type.VERTICAL&&(t.height=n)}else t.setContentSize(this._itemSize)},e.prototype.setMultSelected=function(t,e){var n=this;if(Array.isArray(t)||(t=[t]),null==e)n.multSelected=null,n.multSelected=t;else{var i=void 0,o=void 0;if(e)for(var r=t.length-1;r>=0;r--)i=t[r],(o=n.multSelected.indexOf(i))<0&&n.multSelected.push(i);else for(r=t.length-1;r>=0;r--)i=t[r],(o=n.multSelected.indexOf(i))>=0&&n.multSelected.splice(o,1)}n._forceUpdate=!0,n._onScrolling(null)},e.prototype.updateAppointed=function(t){Array.isArray(t)||(t=[t]);for(var e=t.length,n=0;n<e;n++){var i=t[n],o=this.getItemByListId(i);o&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,i)}},e.prototype.getItemByListId=function(t){for(var e=this.content.childrenCount-1;e>=0;e--)if(this.content.children[e].getComponent(_.default).listId==t)return this.content.children[e];return null},e.prototype._getOutsideItem=function(){for(var t,e,n=[],i=this.content.childrenCount-1;i>=0;i--){if(t=this.content.children[i],e=!0)for(var o=this.actualNumItems-1;o>=0;o--)if(this.displayData[o]){var r=this.displayData[o].id;if(t.getComponent(_.default).listId==r){e=!1;break}}e&&n.push(t)}return n},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--)this._pool.put(t[e]);else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,n){var i,o=this,r=o.getItemByListId(t);if(!o._aniDelRuning&&o._virtual)if(r){i=r.getComponent(_.default),o._aniDelRuning=!0;var a=o.displayData[o.displayData.length-1].id,c=i.selected;i.showAni(n,function(){var n,i,l;if(a<o._numItems-2&&(n=a+1),null!=n){var u=o._calcItemPos(n);o.displayData.push(u),o._virtual?o._createOrUpdateItem(u):o._createOrUpdateItem2(n)}else o._numItems--;if(o.selectedMode==s.SINGLE)c?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode==s.MULT&&o.multSelected.length){var d=o.multSelected.indexOf(t);d>=0&&o.multSelected.splice(d,1);for(var h=o.multSelected.length-1;h>=0;h--)(_=o.multSelected[h])>=t&&o.multSelected[h]--}if(o.customSize){o.customSize[t]&&delete o.customSize[t];var p={},f=void 0;for(var _ in o.customSize){f=o.customSize[_];var m=parseInt(_);p[m-(m>=t?1:0)]=f}o.customSize=p}for(h=null!=n?n:a;h>=t+1;h--)if(r=o.getItemByListId(h)){var y=o._calcItemPos(h-1);i=[cc.moveTo(.2333,cc.v2(y.x,y.y))],h<=t+1&&(l=!0,i.push(cc.callFunc(function(){o._aniDelRuning=!1,e(t)}))),i.length>1?r.runAction(cc.sequence(i)):r.runAction(i[0])}l||(o._aniDelRuning=!1,e(t))},!0)}else e(t)},e.prototype.scrollTo=function(t,e,n,i){void 0===e&&(e=.5),void 0===n&&(n=null),void 0===i&&(i=!1);var o=this;if(o.checkInited(!1)){o._scrollView.stopAutoScroll(),null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=o._numItems&&(t=o._numItems-1);var r,a,c=o._calcItemPos(t);switch(o._alignCalcType){case 1:r=c.left,r-=null!=n?o.node.width*n:o._leftGap,c=cc.v2(r,0);break;case 2:r=c.right-o.node.width,r+=null!=n?o.node.width*n:o._rightGap,c=cc.v2(r+o.content.width,0);break;case 3:a=c.top,a+=null!=n?o.node.height*n:o._topGap,c=cc.v2(0,-a);break;case 4:a=c.bottom+o.node.height,a-=null!=n?o.node.height*n:o._bottomGap,c=cc.v2(0,-a+o.content.height)}var s=o.content.getPosition();s=Math.abs(o._sizeType?s.y:s.x);var l=o._sizeType?c.y:c.x,u=Math.abs((null!=o._scrollPos?o._scrollPos:s)-l)>.5;o._scrollView.stopAutoScroll(),u&&(o._scrollView.scrollToOffset(c,e),o.scheduleOnce(function(){if(o._adheringBarrier||(o.adhering=o._adheringBarrier=!1),i){var e=o.getItemByListId(t);e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},e+.1),e<=0&&o._onScrolling(null))}},e.prototype._calcNearestItem=function(){var t,e;this.nearestListId=null,this._virtual&&this._calcViewPos();for(var n=!1,i=0;i<this.content.childrenCount&&!n;i+=this._colLineNum)switch(t=this._virtual?this.displayData[i]:this._calcExistItemPos(i),e=this._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,this._alignCalcType){case 1:t.right>=this.viewLeft&&(this.nearestListId=t.id,this.viewLeft>e&&(this.nearestListId+=this._colLineNum),n=!0);break;case 2:t.left<=this.viewRight&&(this.nearestListId=t.id,this.viewRight<e&&(this.nearestListId+=this._colLineNum),n=!0);break;case 3:t.bottom<=this.viewTop&&(this.nearestListId=t.id,this.viewTop<e&&(this.nearestListId+=this._colLineNum),n=!0);break;case 4:t.top>=this.viewBottom&&(this.nearestListId=t.id,this.viewBottom>e&&(this.nearestListId+=this._colLineNum),n=!0)}if((t=this._virtual?this.displayData[this.actualNumItems-1]:this._calcExistItemPos(this._numItems-1))&&t.id==this._numItems-1)switch(e=this._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,this._alignCalcType){case 1:this.viewRight>e&&(this.nearestListId=t.id);break;case 2:this.viewLeft<e&&(this.nearestListId=t.id);break;case 3:this.viewBottom<e&&(this.nearestListId=t.id);break;case 4:this.viewTop>e&&(this.nearestListId=t.id)}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var n={id:t,x:e.x,y:e.y};return this._sizeType?(n.top=e.y+e.height*(1-e.anchorY),n.bottom=e.y-e.height*e.anchorY):(n.left=e.x-e.width*e.anchorX,n.right=e.x+e.width*(1-e.anchorX)),n},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var n=this;if(n._slideMode!=c.PAGE)return cc.error("This function is not allowed to be called, Must SlideMode = PAGE!");t<0||t>=n._numItems||n.curPageNum!=t&&(n.curPageNum=t,n.pageChangeEvent&&cc.Component.EventHandler.emitEvents([n.pageChangeEvent],t),n.scrollTo(t,e))},e.prototype.calcCustomSize=function(t){var e=this;if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e.customSize={};var n=cc.instantiate(e._itemTmp);e.content.addChild(n);for(var i=0;i<t;i++)cc.Component.EventHandler.emitEvents([e.renderEvent],n,i),n.height==e._itemSize.height&&n.width==e._itemSize.width||(e.customSize[i]=e._sizeType?n.height:n.width);return Object.keys(e.customSize).length||(e.customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),e.customSize},r([d({type:cc.Enum(a),tooltip:!1})],e.prototype,"templateType",void 0),r([d({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==a.NODE}})],e.prototype,"tmpNode",void 0),r([d({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==a.PREFAB}})],e.prototype,"tmpPrefab",void 0),r([d()],e.prototype,"_slideMode",void 0),r([d({type:cc.Enum(c),tooltip:!1})],e.prototype,"slideModel",null),r([d({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==c.PAGE}})],e.prototype,"pageDistance",void 0),r([d({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==c.PAGE}})],e.prototype,"pageChangeEvent",void 0),r([d()],e.prototype,"_virtual",void 0),r([d({type:cc.Boolean,tooltip:!1})],e.prototype,"virtual",null),r([d({tooltip:!1,visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),r([d({type:cc.Integer})],e.prototype,"_updateRate",void 0),r([d({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,"updateRate",null),r([d({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),r([d({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"renderEvent",void 0),r([d({type:cc.Enum(s),tooltip:!1})],e.prototype,"selectedMode",void 0),r([d({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>s.NONE}})],e.prototype,"selectedEvent",void 0),r([d({serializable:!1})],e.prototype,"_numItems",void 0),r([u,h(),p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),f(-5e3)],e)}(cc.Component);n.default=m,cc._RF.pop()},{"./ListItem":"ListItem"}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"af4a3CKKPZAwr4aagW/gTcl","Loading");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./framwork/BaseUI"),l=t("./manager/Data"),u=t("./manager/PoolMgr"),d=t("./manager/WxCenter"),h=t("./utils/AudioMgr"),p=t("./utils/Utils"),f=window.wx||window.tt,_=cc._decorator,m=_.ccclass,y=_.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img_shouquan=null,e.loading_bar=null,e.progress=0,e}return o(e,t),e.prototype.onBtnClicked=function(t){switch(t.target.name){case"btn_rstart":cc.director.loadScene("loading")}},e.prototype.start=function(){d.default.aldReport("LoadingShow","show")},e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var e,n,i=this;return c(this,function(){return cc.debug.setDisplayStats(!1),cc.game.setFrameRate(60),t.prototype.onLoad.call(this),f&&(f.setPreferredFramesPerSecond(60),f.setKeepScreenOn({keepScreenOn:!0})),u.default.Instance().loadPrefabs(),this.startLoginAction(),e=["\u521d\u6b21\u52a0\u8f7d\u65f6\u95f4\u53ef\u80fd\u4f1a\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...."],n=0,this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){i.SetText("desp",e[n]),++n>e.length-1&&(n=0)})).repeatForever()),this.GetGameObject("btn_rstart").active=!1,[2]})})},e.prototype.startLoginAction=function(){var t=this;this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){return a(t,void 0,void 0,function(){var t,e=this;return c(this,function(){return l.default.loadData(),t=0,this.node.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){return a(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return t+=.018,this.SetProgressBar("ProgressBar",t),t>=1?(this.node.stopAllActions(),[4,p.default.loadBundler("spine")]):[3,2];case 1:e.sent(),p.default.loadBundler("sounds").then(function(){h.default.Instance().loadSounds()}),cc.director.loadScene("hall"),t=1,e.label=2;case 2:return this.GetGameObject("plane").x=600*t-320,this.SetText("lbl_progress",~~(100*t)+"%"),[2]}})})})).repeatForever()),[2]})})})))},r([y(cc.Node)],e.prototype,"img_shouquan",void 0),r([y(cc.Node)],e.prototype,"loading_bar",void 0),r([m],e)}(s.default);n.default=g,cc._RF.pop()},{"./framwork/BaseUI":"BaseUI","./manager/Data":"Data","./manager/PoolMgr":"PoolMgr","./manager/WxCenter":"WxCenter","./utils/AudioMgr":"AudioMgr","./utils/Utils":"Utils"}],LongTouchComponent:[function(t,e,n){"use strict";cc._RF.push(e,"e00b9OAUdVJhbS0BUI7M5px","LongTouchComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchInterval=.02,e.enableMultiTouching=!1,e.longTouchEvents=[],e._touchCounter=0,e._isTouching=!1,e}return o(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.unschedule(this._touchCounterCallback)},e.prototype.clear=function(){this._isTouching=!1,this.unschedule(this._touchCounterCallback)},e.prototype._onTouchStart=function(t){var e=this;if(!this.enableMultiTouching){if(this._isTouching)return;this.node.getBoundingBoxToWorld().contains(t.getLocation())?this._isTouching=!0:this._isTouching=!1,this._isTouching&&(this.publishOneTouch(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e._isTouching&&(e.unschedule(e._touchCounterCallback),e.schedule(e._touchCounterCallback,e.touchInterval))}))))}},e.prototype._onTouchEnd=function(){this._isTouching=!1,this._touchCounter=0,this.unschedule(this._touchCounterCallback)},e.prototype._onTouchCancel=function(){this._isTouching=!1,this._touchCounter=0,this.unschedule(this._touchCounterCallback)},e.prototype._touchCounterCallback=function(){this._isTouching?this.publishOneTouch():this.unschedule(this._touchCounterCallback)},e.prototype.publishOneTouch=function(){var t=this;this._isTouching&&(this.node.runAction(cc.sequence(cc.scaleTo(this.touchInterval/2,1.2),cc.scaleTo(this.touchInterval/2,1))),this._touchCounter++,this.longTouchEvents.forEach(function(e){e.emit([t.node])}))},r([s({tooltip:"\u89e6\u6478\u56de\u8c03\u95f4\u9694\uff08\u79d2\uff09\u3002\u5047\u5982\u4e3a0.1\uff0c\u90a3\u4e481\u79d2\u5185\u4f1a\u56de\u8c0310\u6b21 ${longTouchEvents} \u4e8b\u4ef6\u6570\u7ec4"})],e.prototype,"touchInterval",void 0),r([s({readonly:!0,tooltip:"\u662f\u5426\u652f\u6301\u591a\u70b9\u89e6\u63a7\uff08\u5f53\u524d\u8fd8\u4e0d\u652f\u6301\uff09"})],e.prototype,"enableMultiTouching",void 0),r([s({type:[cc.Component.EventHandler],tooltip:"\u56de\u8c03\u4e8b\u4ef6\u6570\u7ec4\uff0c\u6bcf\u95f4\u9694 ${toucheInterval}s \u56de\u8c03\u4e00\u6b21"})],e.prototype,"longTouchEvents",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],LoseUI:[function(t,e,n){"use strict";cc._RF.push(e,"824b0PiTCRL9oHjDzaJijvV","LoseUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/AdCenter"),s=t("../../manager/Data"),l=t("../../manager/WxCenter"),u=t("../../utils/AudioMgr"),d=t("../../utils/Utils"),h=t("../HallScene"),p=cc._decorator,f=p.ccclass,_=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=0,e}return o(e,t),e.prototype.start=function(){this.GetGameObject("lbl_coin").opacity=0,this.GetGameObject("lbl_coin").runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(1,255))),u.default.Instance().playSFX("fail"),d.default.playBreath(this.GetGameObject("btn_get")),l.default.aldReport("FailShow","show")},e.prototype.setInfo=function(t){this.coin=t,this.aTobAnim(1.8*t),this.SetText("btn_normal","\u9886\u53d6"+d.default.formatNumber(t)+"\u91d1\u5e01")},e.prototype.aTobAnim=function(t){var e=this,n=Math.ceil(t/60),i=0;this.SetText("lbl_coin",d.default.formatNumber(0));var o=function(){(i+=n)>=t&&(i=t,e.unschedule(o)),e.SetText("lbl_coin",d.default.formatNumber(i))};this.schedule(o,0,61)},e.prototype.closeUI=function(){this.shutAnim(),h.default.Instance.createwave()},e.prototype.getCoinReward=function(){var t=this.coin;u.default.Instance().playSFX("coin"),d.default.flyAnim(0,this.node,"icon_coin",d.default.getRandomInt(5,10),100,function(e){e&&(s.default.user.coin+=t)})},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(u.default.Instance().playSFX("click"),n){case"btn_get":l.default.aldReport("FailClick","click"),c.default.Instance().play(function(){e.getCoinReward(),e.closeUI()});break;case"btn_normal":this.getCoinReward(),this.closeUI()}},r([f],e)}(a.default));n.default=_,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../HallScene":"HallScene"}],LuPinResult:[function(t,e,n){"use strict";cc._RF.push(e,"9fd9d2sySJOn5KFiOdZchsp","LuPinResult");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/Data"),s=t("../../utils/AudioMgr"),l=t("../../utils/Utils"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.res=null,e}return o(e,t),e.prototype.start=function(){var t=this;this.GetButton("btn_share").interactable=!1,this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.GetButton("btn_share").interactable=!0})))},e.prototype.setData=function(t){this.res=t},e.prototype.onBtnClicked=function(e,n){switch(t.prototype.onBtnClicked.call(this,e,n),s.default.Instance().playSFX("click"),e.target.name){case"btn_share":window.tt.shareAppMessage({channel:"video",title:"",imageUrl:"",query:"",extra:{videoPath:this.res.videoPath},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),s.default.Instance().playSFX("gem"),l.default.flyAnim(1,cc.find("Canvas"),"icon_gem",l.default.getRandomInt(2,3),85,function(t){t&&(c.default.user.gem+=2)})},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}}),this.closeUI();break;case"btn_save":window.tt.saveVideoToPhotosAlbum({filePath:this.res.videoPath,success:function(){window.tt.showToast({title:"\u4fdd\u5b58\u6210\u529f"}),s.default.Instance().playSFX("gem"),l.default.flyAnim(1,cc.find("Canvas"),"icon_gem",l.default.getRandomInt(2,3),85,function(t){t&&(c.default.user.gem+=2)})},fail:function(){window.tt.showToast({title:"\u4fdd\u5b58\u5931\u8d25"})}}),this.closeUI();break;case"btn_close":this.closeUI()}},r([d],e)}(a.default));n.default=h,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils"}],MsgHints:[function(t,e,n){"use strict";cc._RF.push(e,"922a144cLRCbrDv5hv5JyP8","MsgHints");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../manager/PoolMgr"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.show=function(t){if(""!=t)if(null!=n._prefab){if(0!=a.default.Instance().pools.msg_hints.size()){var e=a.default.Instance().get("msg_hints");e.scaleY=0,e.parent=cc.find("Canvas"),e.zIndex=999999999,e.getChildByName("label").getComponent(cc.Label).string=t,e.getComponent(cc.Animation).play("msghints",0),e.getComponent(cc.Animation).on("finished",function(){a.default.Instance().put("msg_hints",e)})}}else cc.loader.loadRes("prefab/common/msg_hints",function(e,i){e||(n._prefab=i,a.default.Instance().initPool("msg_hints",n._prefab,20),n.show(t))})},e._prefab=null,n=r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../manager/PoolMgr":"PoolMgr"}],NewPlantUI:[function(t,e,n){"use strict";cc._RF.push(e,"46e3e5iTx5BT7fDRmzqw2qW","NewPlantUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framwork/BaseUI"),l=t("../../manager/AdCenter"),u=t("../../manager/Data"),d=t("../../utils/AudioMgr"),h=t("../../utils/Utils"),p=t("../DB"),f=cc._decorator,_=f.ccclass,m=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=0,e}return o(e,t),e.prototype.start=function(){return a(this,void 0,void 0,function(){var t,e,n,i,o,r,a;return c(this,function(c){switch(c.label){case 0:return t=u.default.user.GetMaxLv(),e=u.default.user.BuyPrice(Math.max(1,t-3)),this.SetText("lbl_name",p.DB_plant[t-1][7]+""),this.SetText("lbl_lv","\u7b49\u7ea7 "+t),d.default.Instance().playSFX("unlock_plant"),this.coin=e,this.SetText("lbl_coin",h.default.formatNumber(e)),n="spine:flower"+t+"_ske",i="spine:flower"+t+"_tex",o=this.GetDragonAmature("chick"),r=o,[4,h.default.loadRes(n,dragonBones.DragonBonesAsset)];case 1:return r.dragonAsset=c.sent(),a=o,[4,h.default.loadRes(i,dragonBones.DragonBonesAtlasAsset)];case 2:return a.dragonAtlasAsset=c.sent(),o.armatureName="Armature",o.playAnimation("idleL",0),l.default.Instance().showGridAd(),[2]}})})},e.prototype.onDestroy=function(){l.default.Instance().hideGridAd(),t.prototype.onDestroy.call(this)},e.prototype.onBtnClicked=function(t){var e=t.target.name;switch(d.default.Instance().playSFX("click"),e){case"btn_get":var n=this.coin;d.default.Instance().playSFX("coin"),h.default.flyAnim(0,this.node,"icon_coin",h.default.getRandomInt(5,10),100,function(t){t&&(u.default.user.coin+=n)}),this.closeUI()}},r([_],e)}(s.default));n.default=m,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../DB":"DB"}],NumberRoll:[function(t,e,n){"use strict";cc._RF.push(e,"7afd2vdphtCjKWi+cfBvmoW","NumberRoll");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../framwork/BaseUI"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cur=0,e._target=0,e._offset=0,e}return o(e,t),e.prototype.start=function(){this.label=this.node.getComponent(cc.Label)},Object.defineProperty(e.prototype,"vaule",{set:function(t){this._target=t,this._offset=Math.floor((this._target-this._cur)/Math.min(30,Math.abs(this._target-this._cur)))},enumerable:!1,configurable:!0}),e.prototype.update=function(t){t>1&&(t=1),1/t<cc.game.getFrameRate()/2?this.label.string=this._target+"":(this._cur!=this._target&&(this._cur+=this._offset,this._offset>0&&this._cur>this._target&&(this._cur=this._target),this._offset<0&&this._cur<this._target&&(this._cur=this._target)),this.label.string=this._cur+"")},r([s],e)}(a.default));n.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],OfflineAwardUI:[function(t,e,n){"use strict";cc._RF.push(e,"47509lvN65A3YtUxhS8R3fU","OfflineAwardUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/AdCenter"),s=t("../../manager/Data"),l=t("../../utils/AudioMgr"),u=t("../../utils/BigNumber"),d=t("../../utils/Utils"),h=cc._decorator,p=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._data=0,e}return o(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.GetText("lbl_coin").string=u.default.getLargeString(d.default.fixFloat(t))},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.node.zIndex=99999,d.default.playBreath(this.GetGameObject("btn_ad"))},e.prototype.onBtnClicked=function(t){var e=this;switch(t.target.name){case"btn_close":l.default.Instance().playSFX("click");var n=this._data;l.default.Instance().playSFX("coin"),d.default.flyAnim(0,this.node,"icon_coin",d.default.getRandomInt(5,10),100,function(t){t&&(s.default.user.coin+=n)}),this.closeUI();break;case"btn_normal":l.default.Instance().playSFX("coin"),d.default.flyAnim(0,this.node,"icon_coin",d.default.getRandomInt(5,10),100,function(t){t&&(s.default.user.coin+=e._data)}),this.closeUI();break;case"btn_ad":c.default.Instance().play(function(t){if(t){var n=2*e._data;l.default.Instance().playSFX("coin"),d.default.flyAnim(0,e.node,"icon_coin",d.default.getRandomInt(5,10),100,function(t){t&&(s.default.user.coin+=n)}),e.closeUI()}})}},r([p],e)}(a.default));n.default=f,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/BigNumber":"BigNumber","../../utils/Utils":"Utils"}],PoolMgr:[function(t,e,n){"use strict";cc._RF.push(e,"96c22QZQoJEzrsdfStlsM1E","PoolMgr");var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,a=(o.property,function(){function t(){this.pools={},this.prefabs={},this.pre_bullets=[]}var e;return e=t,t.Instance=function(){return null==e._instance&&(e._instance=new e),e._instance},t.prototype.loadPrefabs=function(){var t=this;console.log("loadPrefabs"),cc.loader.loadRes("prefab/Coin",cc.Prefab,function(e,n){e?console.log(e):t.initPool("Coin",n,11)}),cc.loader.loadRes("prefab/Gem",cc.Prefab,function(e,n){e?console.log(e):t.initPool("Gem",n,11)})},t.prototype.initPool=function(t,e,n){console.log("initPool"),this.prefabs[t]=e,this.pools[t]=new cc.NodePool;for(var i=0;i<n;++i)this.pools[t].put(cc.instantiate(e))},t.prototype.get=function(t){if(null==this.pools[t])return cc.error("\u6ca1\u6709"+t),null;if(this.pools[t].size()>0){var e=this.pools[t].get(),n=e.getChildByName("spine");return n&&(n.getComponent(sp.Skeleton).paused=!1),e}return cc.instantiate(this.prefabs[t])},t.prototype.put=function(t,e){this.pools[t].put(e)},t._instance=null,e=i([r],t)}());n.default=a,cc._RF.pop()},{}],SettingUI:[function(t,e,n){"use strict";cc._RF.push(e,"a80eb23B/dO9568DxP6flX0","SettingUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framwork/BaseUI"),l=t("../../manager/AdCenter"),u=t("../../manager/Data"),d=t("../../utils/AudioMgr"),h=t("../../utils/Utils"),p=cc._decorator,f=p.ccclass,_=(p.property,window.wx||window.tt||window.qq),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_music=null,e.btn_music_close=null,e.btn_sound=null,e.btn_sound_close=null,e.server_data=null,e.wxButton=null,e}return o(e,t),e.prototype.start=function(){return a(this,void 0,void 0,function(){return c(this,function(){return l.default.Instance().showGridAd(),this.btn_music=this.GetGameObject("btn_music_on"),this.btn_music_close=this.GetGameObject("btn_music_off"),this.btn_sound=this.GetGameObject("btn_sound_on"),this.btn_sound_close=this.GetGameObject("btn_sound_off"),this.btn_music.active=1==d.default.Instance().bgmVolume,this.btn_music_close.active=0==d.default.Instance().bgmVolume,this.btn_sound.active=1==d.default.Instance().sfxVolume,this.btn_sound_close.active=0==d.default.Instance().sfxVolume,[2]})})},e.prototype.onDestroy=function(){l.default.Instance().hideGridAd(),this.wxButton&&this.wxButton.destroy(),t.prototype.onDestroy.call(this)},e.prototype.createAuthorizeBtn=function(t){var e=this,n=cc.size(t.width,t.height),i=cc.view.getFrameSize(),o=cc.director.getWinSize(),r=(.5*o.width+t.x-.5*n.width)/o.width*i.width,a=(.5*o.height-t.y-.5*n.height)/o.height*i.height,c=n.width/o.width*i.width,s=n.height/o.height*i.height;this.wxButton=_.createFeedbackButton({type:"text",text:"",style:{left:r,top:a,width:c,height:s,lineHeight:20,backgroundColor:"",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}}),this.wxButton.onTap(function(){e.closeUI()})},e.prototype.onBtnClicked=function(t){var e=t.target.name;switch(d.default.Instance().playSFX("click"),e){case"btn_back":this.closeUI();break;case"btn_music_on":case"btn_music_off":this.btn_music.active=!this.btn_music.active,this.btn_music_close.active=!this.btn_music_close.active,d.default.Instance().setBGMVolume(this.btn_music.active?1:0,!0);break;case"btn_sound_on":case"btn_sound_off":this.btn_sound.active=!this.btn_sound.active,this.btn_sound_close.active=!this.btn_sound_close.active,d.default.Instance().setSFXVolume(this.btn_sound.active?1:0,!0);break;case"btn_share":h.default.wxShare();break;case"btn_download":u.default.user.setData(this.server_data.user),this.closeUI(),u.default.save(),cc.director.loadScene("hall")}},r([f],e)}(s.default);n.default=m,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils"}],Shake:[function(t,e,n){"use strict";cc._RF.push(e,"776856yN0hDUJ9tpRE0AmLJ","Shake");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Shake=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var n;return o(e,t),n=e,e.create=function(t,e,i){var o=new n;return o.initWithDuration(t,e,i),o},e.prototype.initWithDuration=function(t,e,n){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=n,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},n=r([c],e)}(cc.ActionInterval));n.Shake=s,cc._RF.pop()},{}],ShareLayer:[function(t,e,n){"use strict";cc._RF.push(e,"53527tK6PBOjJFaec8hdOsT","ShareLayer");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/Data"),s=t("../../manager/WxCenter"),l=t("../../utils/AudioMgr"),u=t("../../utils/BigNumber"),d=t("../../utils/Utils"),h=cc._decorator,p=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){d.default.playBreath(this.GetGameObject("btn_share"))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.setData=function(){var t=c.default.user.GetMaxLv()-1>0?c.default.user.GetMaxLv()-1:1;this.coinVal=.5*c.default.user.BuyPrice(t);var e=u.default.getLargeString(d.default.fixFloat(this.coinVal)),n=c.default.user.share_times;this.SetText("lbl_coin",e),this.SetText("lbl_times","\u8fd8\u53ef\u5206\u4eab"+n+"\u6b21")},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(l.default.Instance().playSFX("click"),n){case"btn_close":this.closeUI();break;case"btn_share":s.default.shareAppMessage(function(){c.default.user.share_times>0&&(c.default.user.share_times--,l.default.Instance().playSFX("coin"),d.default.flyAnim(0,e.node,"icon_coin",d.default.getRandomInt(5,10),100,function(t){t&&(c.default.user.coin+=e.coinVal),c.default.save()})),e.closeUI()})}},r([p],e)}(a.default));n.default=f,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/BigNumber":"BigNumber","../../utils/Utils":"Utils"}],ShopItem:[function(t,e,n){"use strict";cc._RF.push(e,"e6b02e+8pRDZ6todV8KUlNR","ShopItem");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s,l=t("../../framwork/BaseUI"),u=t("../../framwork/ListItem"),d=t("../../framwork/MsgHints"),h=t("../../manager/AdCenter"),p=t("../../manager/Data"),f=t("../../utils/AudioMgr"),_=t("../../utils/Utils"),m=t("../GameConst"),y=t("../HallScene"),g=cc._decorator,v=g.ccclass;g.property,function(t){t[t.CAN_BUY=1]="CAN_BUY",t[t.CAN_AD_BUY=2]="CAN_AD_BUY",t[t.ONLY_CHECK=4]="ONLY_CHECK",t[t.GEM_BUY=16]="GEM_BUY"}(s||(s={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cost_coin=0,e.gun=null,e}return o(e,t),e.prototype.WatchAdBuy=function(t){var e=p.default.user.GetMaxLv();return!(e<8)&&e-4==t},e.prototype.OnlyCheck=function(t){var e=p.default.user.GetMaxLv();return e-2<=t&&t<=e},e.prototype.BuyGem=function(t){return p.default.user.GetMaxLv()-1==t},e.prototype.getBuyType=function(t){var e=p.default.user.GetMaxLv(),n=0;return t[0]<=e-2&&(n|=s.CAN_BUY),this.WatchAdBuy(t[0])&&(n|=s.CAN_AD_BUY),this.BuyGem(t[0])&&(n|=s.GEM_BUY),this.OnlyCheck(t[0])&&(n|=s.ONLY_CHECK),n},e.prototype.setItemData=function(t){return a(this,void 0,void 0,function(){var e,n,i,o,r,a,l,u,d,h,f,m;return c(this,function(c){switch(c.label){case 0:return e=null,n=!1,i=this.getBuyType(t),this.gun=t,this.GetGameObject("show").active=!1,this.GetGameObject("hide").active=!1,this.GetGameObject("btn_yellow").active=!1,this.GetGameObject("btn_free").active=!1,this.GetGameObject("btn_gray").active=!1,0!=(i&s.GEM_BUY)&&t[6]>0?(this.GetGameObject("show").active=!0,e=this.GetGameObject("show")):0!=(i&s.CAN_AD_BUY)?(this.GetGameObject("show").active=!0,this.GetGameObject("btn_free").active=!0,e=this.GetGameObject("show")):0!=(i&s.CAN_BUY)?(this.GetGameObject("show").active=!0,this.GetGameObject("btn_yellow").active=!0,e=this.GetGameObject("show")):0!=(i&s.ONLY_CHECK)?(this.GetGameObject("show").active=!0,this.GetGameObject("btn_gray").active=!0,e=this.GetGameObject("show")):(this.GetGameObject("hide").active=!0,e=this.GetGameObject("hide"),n=!0),this._findInChildren(e,"lbl_lv").getComponent(cc.Label).string=""+t[0],this._findInChildren(e,"New Label").getComponent(cc.Label).string="\u5230"+(t[0]+2)+"\u7ea7\u89e3\u9501",o=t[3].split("|"),r=o[0],a=o[1],l="",n&&(a="?"),1==r?l="\u6280\u80fd:"+a+"%\u7684\u51e0\u7387\u89e6\u53d1\u51cf\u901f\u76ee\u68071\u79d2":2==r?l="\u6280\u80fd:"+a+"%\u51e0\u7387\u5bf9\u76ee\u6807\u9020\u6210\u53cc\u500d\u4f24\u5bb3":3==r&&(l="\u6280\u80fd:"+a+"%\u51e0\u7387\u51b0\u51bb\u76ee\u68071\u79d2"),this._findInChildren(e,"lbl_name").getComponent(cc.Label).string=n?"\u672a\u77e5\u840c\u9e21":t[7],this._findInChildren(e,"lbl_desc").getComponent(cc.Label).string=n?"\u6280\u80fd:\u672a\u77e5":l,this._findInChildren(e,"lbl_cd").getComponent(cc.Label).string=n?"?":t[1]+"",this._findInChildren(e,"lbl_power").getComponent(cc.Label).string=n?"?":_.default.formatNumber(t[2])+"",n?[3,3]:(u="spine:flower"+t[0]+"_ske",d="spine:flower"+t[0]+"_tex",h=this.GetDragonAmature("shopChick"),f=h,[4,_.default.loadRes(u,dragonBones.DragonBonesAsset)]);case 1:return f.dragonAsset=c.sent(),m=h,[4,_.default.loadRes(d,dragonBones.DragonBonesAtlasAsset)];case 2:m.dragonAtlasAsset=c.sent(),h.armatureName="Armature",h.playAnimation("idleL",0),c.label=3;case 3:return this.cost_coin=p.default.user.BuyPrice(t[0]),this.SetText("lbl_buy_coin",_.default.formatNumber(this.cost_coin)),this.GetButton("btn_yellow").interactable=p.default.user.coin>=this.cost_coin,[2]}})})},e.prototype.onBtnClicked=function(e,n){var i=this;t.prototype.onBtnClicked.call(this,e,n);var o=e.target.name;switch(f.default.Instance().playSFX("click"),o){case"btn_free":h.default.Instance().play(function(t){t&&y.default.Instance.tryBuyPlant(i.gun[0],2)&&(d.default.show("\u8d2d\u4e70\u6210\u529f"),i.dispatch(m.default.BUY_PLANT,i.gun,i.node.getComponent(u.default).listId))});break;case"btn_yellow":if(p.default.user.coin<this.cost_coin)return void d.default.show("\u91d1\u5e01\u4e0d\u8db3");y.default.Instance.tryBuyPlant(this.gun[0],0)&&(d.default.show("\u8d2d\u4e70\u6210\u529f"),this.dispatch(m.default.BUY_PLANT,this.gun,this.node.getComponent(u.default).listId))}},r([v],e)}(l.default);n.default=b,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../framwork/ListItem":"ListItem","../../framwork/MsgHints":"MsgHints","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../GameConst":"GameConst","../HallScene":"HallScene"}],ShopLayer:[function(t,e,n){"use strict";cc._RF.push(e,"97852ZxHcBIu6WWaQlOhdZh","ShopLayer");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../framwork/List"),s=t("../../manager/Data"),l=t("../../manager/WxCenter"),u=t("../../utils/AudioMgr"),d=t("../../utils/Utils"),h=t("../DB"),p=t("../GameConst"),f=t("./ShopItem"),_=cc._decorator,m=_.ccclass,y=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e}var n;return o(e,t),n=e,e.show=function(){n._instance?(n._instance.active=!0,n._instance.getComponent(n).reLoad()):d.default.createUI("prefab/ShopLayer")},e.prototype.start=function(){var t=this;l.default.aldReport("ShopShow","show"),n._instance=this.node,this.list=h.DB_plant,this.reLoad(),this.rigester(p.default.BUY_PLANT,function(e,n){t.GetGameObject("ScrollView").getComponent(c.default).updateAppointed(n)}),this.rigester(p.default.NEW_PLANT,function(){t.reLoad()})},e.prototype.reLoad=function(){this.list=h.DB_plant,this.GetGameObject("ScrollView").getComponent(c.default).numItems=this.list.length;var t=Math.max(0,s.default.user.GetMaxLv()-5);this.GetGameObject("ScrollView").getComponent(c.default).scrollTo(t,.2)},e.prototype.onBtnClicked=function(){u.default.Instance().playSFX("click"),this.node.active=!1},e.prototype.onListRender=function(t,e){t.getComponent(f.default).setItemData(this.list[e])},e._instance=null,n=r([m],e)}(a.default));n.default=y,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../framwork/List":"List","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../DB":"DB","../GameConst":"GameConst","./ShopItem":"ShopItem"}],SignUI:[function(t,e,n){"use strict";cc._RF.push(e,"64219eP4AFEgKvAI3OK34/i","SignUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/AdCenter"),s=t("../../manager/Data"),l=t("../../utils/AudioMgr"),u=t("../../utils/Utils"),d=cc._decorator,h=d.ccclass,p=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.reddot=function(){return 0==s.default.user.signinfo.sign_time||!n.checkIsTody(s.default.user.signinfo.sign_time)||1==s.default.user.signinfo.sign_beisu},e.checkShow=function(){0!=s.default.user.signinfo.sign_index&&(n.checkIsTody(s.default.user.signinfo.sign_time)||u.default.createUI("prefab/SignLayer"))},e.prototype.getSignValue=function(t){var e=s.default.user.GetMaxLv()-3;return e<1&&(e=1),[{type:0,value:4*s.default.user.BuyPrice(e)},{type:1,value:2},{type:0,value:8*s.default.user.BuyPrice(e)},{type:0,value:12*s.default.user.BuyPrice(e)},{type:1,value:5},{type:1,value:8},{type:1,value:10}][t]},e.checkIsTody=function(t){var e=new Date(t),n=new Date(u.default.getServerTime()),i=!1;return e.getFullYear()==n.getFullYear()&&e.getMonth()==n.getMonth()&&e.getDate()==n.getDate()&&(i=!0),i},e.prototype.start=function(){this.updateUI(),c.default.Instance().showGridAd()},e.prototype.onDestroy=function(){c.default.Instance().hideGridAd(),t.prototype.onDestroy.call(this)},e.prototype.updateUI=function(){var t=this.GetGameObject("item_days"),e=!1;0!=s.default.user.signinfo.sign_time&&n.checkIsTody(s.default.user.signinfo.sign_time)&&(e=!0);var i=s.default.user.signinfo.sign_index%7;0==i&&e&&(i=7);for(var o=0;o<7;++o){var r=t.children[o];r.getChildByName("sevenday_checked").active=o<i;var a=this.getSignValue(o);0==a.type?r.getComponentInChildren(cc.Label).string=u.default.formatNumber(a.value)+"":r.getComponentInChildren(cc.Label).string=a.value+""}this.GetGameObject("btn_3times").active=!1,this.GetGameObject("btn_2times").active=!1,this.GetGameObject("btn_sign").active=!1,e?1==s.default.user.signinfo.sign_beisu?this.GetGameObject("btn_2times").active=!0:2==s.default.user.signinfo.sign_beisu?(this.GetGameObject("btn_2times").active=!0,this.GetButton("btn_2times").interactable=!1):(this.GetGameObject("btn_3times").active=!0,this.GetButton("btn_3times").interactable=!1):(this.GetGameObject("btn_sign").active=!0,this.GetGameObject("btn_3times").active=!0),console.log(s.default.user.signinfo)},e.prototype.getTodySign=function(){var t=!1;0!=s.default.user.signinfo.sign_time&&n.checkIsTody(s.default.user.signinfo.sign_time)&&(t=!0);var e=s.default.user.signinfo.sign_index;return t&&e--,this.getSignValue(e%7)},e.prototype.flayAnim=function(t){var e=this.getTodySign();0==e.type?(l.default.Instance().playSFX("coin"),u.default.flyAnim(0,this.node,"icon_coin",5,200,function(n){n&&(s.default.user.coin+=e.value*t)})):(l.default.Instance().playSFX("gem"),u.default.flyAnim(1,this.node,"icon_gem",5,200,function(n){n&&(s.default.user.gem+=e.value*t)}))},e.prototype.onBtnClicked=function(t){var e=this,i=t.target.name;switch(l.default.Instance().playSFX("click"),i){case"btn_close":this.closeUI();break;case"btn_2times":c.default.Instance().play(function(t){t&&(s.default.user.signinfo.sign_beisu=2,e.flayAnim(2),n.checkIsTody(s.default.user.signinfo.sign_time)||s.default.user.signinfo.sign_index++,s.default.user.signinfo.sign_time=u.default.getServerTime(),e.updateUI())});break;case"btn_3times":c.default.Instance().play(function(t){t&&(s.default.user.signinfo.sign_beisu=3,e.flayAnim(3),n.checkIsTody(s.default.user.signinfo.sign_time)||s.default.user.signinfo.sign_index++,s.default.user.signinfo.sign_time=u.default.getServerTime(),e.updateUI())});break;case"btn_sign":s.default.user.signinfo.sign_beisu=1,this.flayAnim(1),n.checkIsTody(s.default.user.signinfo.sign_time)||s.default.user.signinfo.sign_index++,s.default.user.signinfo.sign_time=u.default.getServerTime(),this.updateUI()}},n=r([h],e)}(a.default));n.default=p,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils"}],Singleton:[function(t,e,n){"use strict";cc._RF.push(e,"b3524d7zH9PiqxWDRneLvf8","Singleton"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.Instance=function(){return this.instance||(this.instance=new this),this.instance},t}();n.default=i,cc._RF.pop()},{}],SlotItem:[function(t,e,n){"use strict";cc._RF.push(e,"8cf323gxb5C04zxaDSUVHAv","SlotItem");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../framwork/BaseUI"),c=t("../manager/Data"),s=t("./DB"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=0,e}var n;return o(e,t),n=e,e.getCurOpen=function(){for(var t=-1,e=1;e<12;++e)if(0==c.default.user.slots[e]){t=e;break}return t},e.prototype.onBtnClicked=function(){},e.prototype.setIndex=function(t){this.index=t,this.SetText("lbl_index",t+"");var e=n.getCurOpen();this.node.getComponent(cc.Button).interactable=this.index-1>=e&&-1!=e;var i=c.default.user.slots[t-1];this.GetGameObject("lock").active=0==i,this.GetGameObject("lbl_index").active=0==i,this.GetGameObject("node_cost").active=0==i;var o=s.DB_slot[t-1].price+"\u5173";this.SetText("lbl_open_cost",o)},n=r([u],e)}(a.default));n.default=d,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../manager/Data":"Data","./DB":"DB"}],SoldierItem:[function(t,e,n){"use strict";cc._RF.push(e,"58176B7xzJGVr/d2mUCbUBE","SoldierItem");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function c(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),l=t("../manager/Data"),u=t("../utils/Utils"),d=t("./DB"),h=t("./HallScene"),p=t("./prefab/Bullet"),f=cc._decorator,_=f.ccclass,m=(f.executeInEditMode,f.property),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bullet_pre=null,e.index=-1,e.linkItem=null,e.datacopy=null,e.bDrag=!1,e.droptype=0,e.droptype0endtime=0,e.curplayani="",e.cd=0,e.lastfire=0,e}return o(e,t),e.prototype.start=function(){this.GetDragonAmature("chick").addEventListener(dragonBones.EventObject.COMPLETE,this.animComplete,this)},e.prototype.setItemData=function(t,e){void 0===e&&(e=-1),-1!=e&&(this.droptype=e),0!=this.droptype&&this.droptype0endtime<u.default.getServerTime()&&(this.droptype0endtime=u.default.getServerTime()+1e4),this.datacopy&&t&&this.datacopy.index==t.index&&this.datacopy.lv==t.lv&&this.datacopy.open==t.open||(this.datacopy=t?JSON.parse(JSON.stringify(t)):null,this.datacopy&&(this.datacopy.index=this.index),this.updateItem())},e.prototype.updateItem=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return t=null==this.datacopy,this.GetGameObject("level_1").active=!t,t?(this.GetGameObject("chick").active=!1,this.GetGameObject("lbl_lv").active=!1,this.GetGameObject("flower1").active=!1,[2]):t?[3,3]:(this.GetGameObject("lbl_lv").getComponent(cc.Label).string="lv."+this.datacopy.lv,0!=this.droptype?[3,2]:(this.GetGameObject("chick").active=!0,this.GetGameObject("lbl_lv").active=!0,this.GetGameObject("flower1").active=!1,[4,this.produceChick()]));case 1:return e.sent(),[3,3];case 2:this.GetGameObject("chick").active=!1,this.GetGameObject("lbl_lv").active=!1,this.GetGameObject("flower1").active=!0,this.showPot("spine:pot1"),e.label=3;case 3:return[2]}})})},e.prototype.showPot=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(){return this.curplayani="pot1_idle",(t=this.GetDragonAmature("flower1")).playAnimation("fall",1),this.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){t.playAnimation("idle",0)}))),[2]})})},e.prototype.produceChick=function(){return a(this,void 0,void 0,function(){var t,e,n,i,o,r,a,s;return c(this,function(c){switch(c.label){case 0:return t=d.DB_plant[Math.min(this.datacopy.lv-1,59)],this.cd=Number(t[1]),e=this.datacopy.lv+"_idleL",this.curplayani==e?[3,3]:(this.curplayani=e,n=Math.min(this.datacopy.lv,60),i="spine:flower"+n+"_ske",o="spine:flower"+n+"_tex",r=this.GetDragonAmature("chick"),a=r,[4,u.default.loadRes(i,dragonBones.DragonBonesAsset)]);case 1:return a.dragonAsset=c.sent(),s=r,[4,u.default.loadRes(o,dragonBones.DragonBonesAtlasAsset)];case 2:s.dragonAtlasAsset=c.sent(),r.armatureName="Armature",r.playAnimation("idleL",0),c.label=3;case 3:return[2]}})})},e.prototype.animComplete=function(t){if(t.type==dragonBones.EventObject.COMPLETE){var e=this.GetDragonAmature("chick");"atkR"==e.animationName?(e.playAnimation("idleR",0),this.curplayani="idleR"):"atkL"==e.animationName&&(e.playAnimation("idleL",0),this.curplayani="idleL")}},e.prototype.getTarget=function(){for(var t=h.default.Instance.enemylist,e=null,n=600,i=0;i<t.length;++i)if(!(t[i].x<-cc.winSize.width/2)){var o=t[i].position.sub(this.node.position).mag();o<n&&(e=t[i],n=o)}return e},e.prototype.update=function(t){var e=this;t>1&&(t=1);var n=this.GetDragonAmature("chick");if(this.datacopy&&0==this.droptype&&l.default.user.double_att_time>u.default.getServerTime()?(n&&(n.timeScale=1.5),this.GetGameObject("kb").active=!0):(n&&(n.timeScale=1),this.GetGameObject("kb").active=!1),0!=this.droptype&&u.default.getServerTime()>this.droptype0endtime&&(this.droptype=0,this.updateItem()),!this.bDrag&&this.datacopy&&0==this.droptype&&(this.lastfire+=t,this.lastfire>=this.cd/(l.default.user.double_att_time>u.default.getServerTime()?2:1))){this.lastfire=0;var i=this.getTarget();i&&this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){if(!e.bDrag&&e.datacopy){var t=cc.instantiate(e.bullet_pre);t.position=e.node.position.add(i.x>e.node.x?cc.v3(30,35,0):cc.v3(-30,35,0)),t.parent=h.default.Instance.GetGameObject("node_bullet"),t.getComponent(p.default).setInfo(i,e.datacopy.lv),i.x>e.node.x?(n.playAnimation("atkR",1),e.curplayani="atkR"):(n.playAnimation("atkL",1),e.curplayani="atkL")}})))}},r([m(cc.Prefab)],e.prototype,"bullet_pre",void 0),r([_],e)}(s.default);n.default=y,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../manager/Data":"Data","../utils/Utils":"Utils","./DB":"DB","./HallScene":"HallScene","./prefab/Bullet":"Bullet"}],UserModel:[function(t,e,n){"use strict";cc._RF.push(e,"e5755yzM1lE0roEui3wv0BT","UserModel");var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../event/GameEvent"),r=t("../manager/Data"),a=t("../utils/Utils"),c=t("./GameConst"),s=t("./DB"),l=t("../utils/AudioMgr"),u=[];function d(t,e){u.push(e)}var h=cc._decorator,p=h.ccclass,f=(h.property,function(){function t(){this.last_date=0,this.signinfo={sign_index:0,sign_time:0,sign_beisu:0},this.nickName="",this.avatarUrl="",this.openid="",this.nickname="",this.headimg="",this.auto_com_time=0,this.double_att_time=0,this.double_income_time=0,this.drop_plant_time=0,this.today_getchick_times=0,this.today_getchick_total=5,this.today_getcoin_times=0,this.today_getcoin_total=5,this.share_times=10,this.slots=[1,1,1,0,0,0,0,0,0,0,0,0],this.lv=1,this.wave=1,this.DropGiftPts=[],this.AdBuyNotDrop=[],this._coin=1e3,this._gem=200,this._serverTime=0,this.guideIndex=0,this.plantBuyTimes={},this.todayComTimes=0,this.ComPlants=[{open:1,index:0,lv:1}]}return t.prototype.T=function(){for(var t=this.GetMaxLv(),e=s.DB_shopSort[t+""],n=1;n<=8;++n)if("AD"==e[n])return t-n;return t-4},t.prototype.getOfflineEarning=function(t){for(var e=null,n=[50,30,20,15,10,5,3,2],i=Math.max(1,this.T()),o=this.GetMaxLv(),r=Math.max(1,i-10);r<=i;++r){var a=this.BuyPrice(r);(!e||a>e)&&(e=a)}var c=e/3e3;c<1&&(c=1);var s=Math.floor(t/60),l=t%60/60,u=0;for(r=0;r<=s;++r){var d=n[r]||1;u+=r==s?60*c*d*100*l/100:60*c*d}for(var h=0,p=0,f=this.ComPlants;p<f.length;p++){var _=f[p],m=_.lv;_.lv>0&&(h+=1e4*u/(1e4*Math.pow(2.1,Math.max(0,o-m))))}return h},Object.defineProperty(t.prototype,"coin",{get:function(){return Math.floor(100*this._coin)/100},set:function(t){this._coin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gem",{get:function(){return this._gem},set:function(t){this._gem=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverTime",{get:function(){return this._serverTime},set:function(t){this._serverTime=t},enumerable:!1,configurable:!0}),t.prototype.getPlantInfo=function(t){for(var e=0;e<this.ComPlants.length;++e)if(this.ComPlants[e].index==t)return this.ComPlants[e];return null},t.prototype.GetMaxLv=function(){for(var t=0,e=0;e<this.ComPlants.length;++e)this.ComPlants[e].lv>t&&(t=this.ComPlants[e].lv);return t},t.prototype.BuyPrice=function(t){var e=Number(s.DB_plant[t-1][5]),n=this.plantBuyTimes[t]||0;return 1==t?1e4*e*Math.pow(1.07,n)/1e4:1e4*e*Math.pow(1.175,n)/1e4},t.prototype.CompMove=function(t,e){var n=this.getPlantInfo(t),i=this.getPlantInfo(e);n&&i?(n.index=e,i.index=t):(n&&(n.index=e),i&&(i.index=t))},t.prototype.ComposePlant=function(t,e){var n=this.ComPlants.find(function(e){return e.index==t});if(!n)return!1;var i=this.ComPlants.find(function(t){return t.index==e});if(!i)return!1;if(n.lv!=i.lv)return console.log(n,i),console.error("err"),!1;for(var r=this.GetMaxLv(),s=this.getPlantInfo(t),u=s.lv,d=0;d<this.ComPlants.length;++d)if(this.ComPlants[d].index==t){this.ComPlants.splice(d,1);break}for(d=0;d<this.ComPlants.length;++d)if(this.ComPlants[d].index==e){this.ComPlants.splice(d,1);break}this.ComPlants.push({open:s.open,index:t,lv:u+1}),this.todayComTimes++;var h=this.GetMaxLv();return h>r&&h<60&&(console.log("\u65b0\u690d\u7269     "),a.default.createUI("prefab/NewPlantUI"),o.default.Instance().dispatch(c.default.NEW_PLANT,h)),l.default.Instance().playSFX("merge_success"),!0},t.prototype.BuyPlant=function(t,e){if(this.plantBuyTimes[e]||(this.plantBuyTimes[e]=0),this.plantBuyTimes[e]++,!this.ComPlants.find(function(t){t.index})){var n={open:1,index:t,lv:e};return this.ComPlants.push(n),r.default.save(),n}console.error("\u7d22\u5f15\u9519\u8bef")},t.prototype.DropWuJiang=function(t){console.log("DropWuJiang",t);for(var e=0;e<this.ComPlants.length;++e)if(this.ComPlants[e].index==t){var n=this.BuyPrice(this.ComPlants[e].lv);r.default.user.coin+=Math.floor(n),cc.log("\u5356\u4e86\u6362\u94b1\uff1a"+n),this.ComPlants.splice(e,1);break}},t.prototype.getUploadData=function(){var t={};this.serverTime=a.default.getServerTime();for(var e=0;e<u.length;++e)t[u[e]]=this[u[e]];return t},t.prototype.setData=function(t){if(t)for(var e=0;e<u.length;++e){var n=t[u[e]];if(null!=n||null!=n)if("[object Object]"==Object.prototype.toString.call(n))for(var i in n)this[u[e]][i]=n[i];else this[u[e]]=n}},i([d],t.prototype,"last_date",void 0),i([d],t.prototype,"signinfo",void 0),i([d],t.prototype,"nickName",void 0),i([d],t.prototype,"avatarUrl",void 0),i([d],t.prototype,"openid",void 0),i([d],t.prototype,"nickname",void 0),i([d],t.prototype,"headimg",void 0),i([d],t.prototype,"auto_com_time",void 0),i([d],t.prototype,"double_att_time",void 0),i([d],t.prototype,"double_income_time",void 0),i([d],t.prototype,"drop_plant_time",void 0),i([d],t.prototype,"today_getchick_times",void 0),i([d],t.prototype,"today_getchick_total",void 0),i([d],t.prototype,"today_getcoin_times",void 0),i([d],t.prototype,"today_getcoin_total",void 0),i([d],t.prototype,"share_times",void 0),i([d],t.prototype,"slots",void 0),i([d],t.prototype,"lv",void 0),i([d],t.prototype,"wave",void 0),i([d],t.prototype,"DropGiftPts",void 0),i([d],t.prototype,"AdBuyNotDrop",void 0),i([d],t.prototype,"_coin",void 0),i([d],t.prototype,"_gem",void 0),i([d],t.prototype,"_serverTime",void 0),i([d],t.prototype,"guideIndex",void 0),i([d],t.prototype,"plantBuyTimes",void 0),i([d],t.prototype,"todayComTimes",void 0),i([d],t.prototype,"ComPlants",void 0),i([p],t)}());n.default=f,cc._RF.pop()},{"../event/GameEvent":"GameEvent","../manager/Data":"Data","../utils/AudioMgr":"AudioMgr","../utils/Utils":"Utils","./DB":"DB","./GameConst":"GameConst"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"ff748PS7+hEIIiRCFvCwbSy","Utils"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Shake"),o=t("./BigNumber"),r=t("../manager/PoolMgr"),a=t("../game/GameConst"),c=window.wx,s=function(){function t(){}return t.createUI=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),new Promise(function(i,o){cc.loader.loadRes(t,cc.Prefab,function(r,a){if(r)return console.error(r),void o();null==e&&(e=cc.find("Canvas"));var c=t.lastIndexOf("/"),s=t.substr(c+1,t.length-c);if(e.getComponentInChildren(s))console.log("\u91cd\u590dUI\u8df3\u8fc7");else{var l=cc.instantiate(a);l.opacity=0,l.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){l.opacity=255}))),l.parent=e,n&&n(l),i(l)}})})},t.getRandom=function(t,e){return Math.random()*(e-t)+t},t.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.seedRandomInt=function(e,n){return t.getRandomInt(e,n)},t.formatNumber=function(t,e){return void 0===e&&(e=1),t=Math.floor(t),o.default.getLargeString(t)},t.getPowNum=function(t){return Math.pow(10,t)},t.setServerTime=function(e){t.timeOffset=e-(new Date).getTime(),cc.log("timeOffset:",t.timeOffset)},t.getServerTime=function(){return(new Date).getTime()+t.timeOffset},t.Shake=function(t,e,n){var o=cc.find("Canvas/Main Camera");o.x=0,o.y=0,o.stopAllActions(),o.runAction(i.Shake.create(t,e,n))},t.addClickEvent=function(t,e,n,i,o){var r=new cc.Component.EventHandler;r.target=e,r.component=n,r.handler=i,o&&(r.customEventData=o);var a=t.getComponent(cc.Button).clickEvents;a.length>0?cc.warn("\u6309\u94ae\u5df2\u7ecf\u5b58\u5728\u7ed1\u5b9a\uff0c\u8df3\u8fc7\u81ea\u52a8\u7ed1\u5b9a",t.name):a.push(r)},t.wxShare=function(e){void 0===e&&(e=null);var n=t.getRandomInt(0,a.share_urls.length),i=a.share_urls[n],o=a.share_titles[n];t.sharetime=t.getServerTime(),window.tt?c.shareAppMessage({title:o,imageUrl:i,success:function(){e&&e(!0)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25")}}):(t.sharecallback=e,cc.sys.platform==cc.sys.WECHAT_GAME&&c.shareAppMessage({title:o,imageUrl:i}))},t.getTimeStrByS=function(t){(t=Math.floor(t))<0&&(t=0);var e=Math.floor(t/3600/24);t-=86400*e;var n=Math.floor(t/3600);t-=3600*n;var i,o=Math.floor(t/60);i=o>9?""+o:"0"+o;var r;return r=(t-=60*o)>9?""+t:"0"+t,e>0?e+"\u5929"+n+"\u65f6"+o+"\u5206":n>0?(n>9?""+n:"0"+n)+":"+i:i+":"+r},t.formatCoin=function(t){return t=Math.floor(t),o.default.getLargeString(t)},t.loadBundler=function(t){return new Promise(function(e){cc.assetManager.loadBundle(t,function(t,n){console.log(n),e(null)})})},t.loadRes=function(t,e,n){return void 0===n&&(n=null),new Promise(function(i,o){var r="resources",a=t.split(":");2==a.length&&(r=a[0],t=a[1]);var c=cc.assetManager.getBundle(r).get(t,e);if(c)return n&&n(null,c),void i(c);cc.assetManager.getBundle(r).load(t,e,function(e,r){e?(cc.error(t,e),n(e,null),o(null)):(n&&n(null,r),i(r))})})},t.weight=function(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];if(e<=0)return-1;var i=Math.round(Math.random()*Number.MAX_VALUE)%e;for(n=0;n<t.length;++n){if(i<t[n])return n;i-=t[n]}return-1},t.fixFloat=function(t,e){void 0===e&&(e=2);var n=100*e;return Math.floor(t*n)/n},t.flyAnim=function(e,n,i,o,a,c){var s=function(t){return 0==t?r.default.Instance().get("Coin"):null},l=[];if(n.parent){var u=n.parent.convertToWorldSpaceAR(n.position),d=function(t,e,n,i){for(var o=[],r=Math.PI/180*Math.round(360/i),a=0;a<i;a++){var c=e+t*Math.sin(r*a),s=n+t*Math.cos(r*a);o.unshift(cc.v2(c,s))}return o}(a,(u=cc.find("Canvas").convertToNodeSpaceAR(u)).x,u.y,o);if(!d)return;for(var h=0;h<d.length;h++){var p=s(e);if(!p)return;p.parent=cc.find("Canvas");var f=cc.v2(d[h].x+t.getRandomInt(0,50),d[h].y+t.getRandomInt(0,50));p.setPosition(u),l.push({gold:p,randPos:f})}}var _=!1,m=cc.find("Canvas").getComponent("HallScene").GetGameObject(i),y=m.parent.convertToWorldSpaceAR(m.position);y=cc.find("Canvas").convertToNodeSpaceAR(y);var g=m;for(h=0;h<l.length;h++){var v=l[h].randPos,b=l[h].gold;l[h].gold.id=h;var w=cc.sequence(cc.moveTo(.2,v),cc.delayTime(.03*h),cc.moveTo(.5,cc.v2(y.x,y.y)),cc.callFunc(function(t){if(!_){g.stopAllActions(),g.setScale(1),_=!0;var e=cc.sequence(cc.scaleTo(.1,2,2),cc.scaleTo(.1,1,1),cc.callFunc(function(){_=!1}));g.runAction(e)}c(t.id==l.length-1),r.default.Instance().put(t.name,t)}));b.runAction(w)}},t.playBreath=function(t,e,n,i,o){var r=this;void 0===e&&(e=1),void 0===n&&(n=1.12),void 0===i&&(i=.8),void 0===o&&(o=!0),t.stopAllActions(),t.setScale(e);var a=cc.sequence(cc.scaleTo(i,n,n),cc.scaleTo(i,e,e),cc.callFunc(function(){o&&r.playBreath(t)}));t.runAction(a)},t.timeOffset=0,t.sharetime=0,t.sharecallback=null,t}();n.default=s,cc._RF.pop()},{"../game/GameConst":"GameConst","../manager/PoolMgr":"PoolMgr","./BigNumber":"BigNumber","./Shake":"Shake"}],VictoryUI:[function(t,e,n){"use strict";cc._RF.push(e,"bdcb9Wp8YxFErWZb5qYmaOU","VictoryUI");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framwork/BaseUI"),c=t("../../manager/AdCenter"),s=t("../../manager/Data"),l=t("../../manager/WxCenter"),u=t("../../utils/AudioMgr"),d=t("../../utils/Utils"),h=t("../HallScene"),p=cc._decorator,f=p.ccclass,_=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=0,e}return o(e,t),e.prototype.start=function(){u.default.Instance().playSFX("win_stage"),this.GetSkeleton("fx_victory").setAnimation(0,"start",!1),this.GetSkeleton("fx_victory").setAnimation(1,"idle",!0),d.default.playBreath(this.GetGameObject("btn_get")),l.default.aldReport("PassShow","show")},e.prototype.setInfo=function(t){this.coin=t,this.aTobAnim(2*t),this.SetText("btn_normal","\u9886\u53d6"+d.default.formatNumber(t)+"\u91d1\u5e01")},e.prototype.aTobAnim=function(t){var e=this,n=Math.ceil(t/60),i=0;this.SetText("lbl_coin",d.default.formatNumber(0));var o=function(){(i+=n)>=t&&(i=t,e.unschedule(o)),e.SetText("lbl_coin",d.default.formatNumber(i))};this.schedule(o,0,61)},e.prototype.closeUI=function(){this.shutAnim(),h.default.Instance.createwave()},e.prototype.getCoinReward=function(t){void 0===t&&(t=!1);var e=t?this.coin*d.default.getRandom(1.2,2):this.coin;u.default.Instance().playSFX("coin"),d.default.flyAnim(0,this.node,"icon_coin",d.default.getRandomInt(5,10),100,function(t){t&&(s.default.user.coin+=e,s.default.user.lv>=30&&c.default.Instance().showinterstitialAd())})},e.prototype.onBtnClicked=function(t){var e=this,n=t.target.name;switch(u.default.Instance().playSFX("click"),n){case"btn_get":l.default.aldReport("PassClick","click"),c.default.Instance().play(function(){e.getCoinReward(),e.closeUI()});break;case"btn_normal":this.getCoinReward(),this.closeUI()}},r([f],e)}(a.default));n.default=_,cc._RF.pop()},{"../../framwork/BaseUI":"BaseUI","../../manager/AdCenter":"AdCenter","../../manager/Data":"Data","../../manager/WxCenter":"WxCenter","../../utils/AudioMgr":"AudioMgr","../../utils/Utils":"Utils","../HallScene":"HallScene"}],WxCenter:[function(t,e,n){"use strict";cc._RF.push(e,"51ec5mQNrhCjJFzoCadnNBY","WxCenter"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../framwork/MsgHints"),o=function(){function t(){}return t.init=function(){this.wx=window&&window.wx,this.wx&&this.wx.onShareAppMessage(function(){return{title:"\u6b22\u8fce\u52a0\u5165\u5403\u9e21\u5c0f\u5206\u961f"}})},t.shareAppMessage=function(t){void 0===t&&(t=null),this.wx&&(this.wx.shareAppMessage({title:"\u6b22\u8fce\u52a0\u5165\u5403\u9e21\u5c0f\u5206\u961f"}),t&&(t.keys=(new Date).getTime(),this.wx.onShow(function(){(new Date).getTime()-t.keys>=3e3&&t(),t=null})))},t.showBanner=function(){if(this.wx){var t=this.wx;this.bannerAd||(this.bannerAd=t.createBannerAd({adUnitId:"xxxx",style:{left:10,top:76,width:320,adIntervals:30}}),this.bannerAd.onError(function(t){console.log(t)})),this.bannerAd.show()}},t.hideBanner=function(){this.bannerAd&&this.bannerAd.hide()},t.showRewardedVideoAd=function(e){if(void 0===e&&(e=null),!this.wx)return i.default.show("\u770b\u4e86\u4e00\u4e2a\u5e7f\u544a"),console.log("\u770b\u4e86\u4e00\u4e2a\u5e7f\u544a"),void(e&&e(!0));e&&e(!0);var n=this.wx,o=this.rewardVideo;o||(o=n.createRewardedVideoAd({adUnitId:"xxxx"}),this.rewardVideo=o),o.onError(function(t){console.log(t),o.load().then(function(){return o.show()})}),o.show().then(function(){o.load().then(function(){return o.show()}).catch(function(e){n.showToast({title:t.videoAdErrHandle(e),icon:"none"})})}),o.onClose(function(t){(t&&t.isEnded||void 0===t)&&e&&e(!0)})},t.videoAdErrHandle=function(t){return console.log("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25"),console.log(t),{1e3:"\u540e\u7aef\u63a5\u53e3\u8c03\u7528\u5931\u8d25",1001:"\u53c2\u6570\u9519\u8bef",1002:"\u5e7f\u544a\u5355\u5143\u65e0\u6548",1003:"\u5185\u90e8\u9519\u8bef",1004:"\u65e0\u5408\u9002\u7684\u5e7f\u544a",1005:"\u5e7f\u544a\u7ec4\u4ef6\u5ba1\u6838\u4e2d",1006:"\u5e7f\u544a\u7ec4\u4ef6\u88ab\u9a73\u56de",1007:"\u5e7f\u544a\u7ec4\u4ef6\u88ab\u5c01\u7981",1008:"\u5e7f\u544a\u5355\u5143\u5df2\u5173\u95ed"}[t.errCode]||"\u89c6\u9891\u52a0\u8f7d\u9519\u8bef,\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\u8bd5\u8bd5\u5427"},t.aldReport=function(t,e){void 0===e&&(e="show"),this.wx&&this.wx.aldStage&&this.wx.aldSendEvent(t,{action:e})},t.aldLevelReport=function(t){this.wx&&this.wx.aldStage&&this.wx.aldLevel.onSetLevel({levelId:t+"",levelName:"\u7b49\u7ea7"+t})},t}();n.default=o,cc._RF.pop()},{"../framwork/MsgHints":"MsgHints"}]},{},["Loading","GameEvent","BaseUI","List","ListItem","MsgHints","AchievementModel","DB","GameConst","HallScene","SlotItem","SoldierItem","UserModel","AdLayer","BossCommingUI","Bullet","CoinNotEnoughUI","Enemy","FairyBonusUI","FairyItem","LoseUI","LuPinResult","NewPlantUI","OfflineAwardUI","SettingUI","ShareLayer","ShopItem","ShopLayer","SignUI","VictoryUI","AdCenter","ConfigManager","Data","DataManager","PoolMgr","Singleton","WxCenter","AudioMgr","BigNumber","DebugTools","LongTouchComponent","NumberRoll","Shake","Utils"]);