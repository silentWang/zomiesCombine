{"version":3,"sources":["assets\\script\\game\\prefab\\ShopLayer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAC3C,4CAAuC;AACvC,2CAAsC;AACtC,iDAA4C;AAC5C,2CAAsC;AACtC,4BAAiC;AACjC,0CAAqC;AACrC,uCAAkC;AAI5B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAuC,6BAAM;IAA7C;QAAA,qEAgDC;QA/BG,UAAI,GAAG,IAAI,CAAC;;IA+BhB,CAAC;kBAhDoB,SAAS;IAInB,cAAI,GAAX;QAEI,IAAG,CAAC,WAAS,CAAC,SAAS,EACvB;YACI,eAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAA;SACrC;aAED;YACI,WAAS,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YAClC,WAAS,CAAC,SAAS,CAAC,YAAY,CAAC,WAAS,CAAC,CAAC,MAAM,EAAE,CAAC;SACxD;IACL,CAAC;IAGD,yBAAK,GAAL;QAAA,iBAWC;QAVG,WAAS,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;QAChC,IAAI,CAAC,IAAI,GAAG,aAAQ,CAAA;QACpB,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,mBAAS,CAAC,SAAS,EAAC,UAAC,GAAO,EAAC,MAAa;YACpD,KAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,cAAI,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAChF,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,QAAQ,CAAC,mBAAS,CAAC,SAAS,EAAC;YAC9B,KAAI,CAAC,MAAM,EAAE,CAAC;QAClB,CAAC,CAAC,CAAA;IACN,CAAC;IAED,0BAAM,GAAN;QAEI,IAAI,CAAC,IAAI,GAAG,aAAQ,CAAC;QACrB,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,cAAI,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAChF,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,cAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,cAAI,CAAC,CAAC,QAAQ,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;IAC5E,CAAC;IAED,gCAAY,GAAZ,UAAa,KAAK,EAAC,CAAC;QAEhB,kBAAQ,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED,gCAAY,GAAZ,UAAa,IAAa,EAAE,GAAW;QACnC,IAAI,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IAC5D,CAAC;;IA5Cc,mBAAS,GAAW,IAAI,CAAC;IAHvB,SAAS;QAD7B,OAAO;OACa,SAAS,CAgD7B;IAAD,gBAAC;CAhDD,AAgDC,CAhDsC,gBAAM,GAgD5C;kBAhDoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport List from \"../../framwork/List\";\r\nimport Data from \"../../manager/Data\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { DB_plant } from \"../DB\";\r\nimport GameConst from \"../GameConst\";\r\nimport ShopItem from \"./ShopItem\";\r\n\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShopLayer extends BaseUI{\r\n\r\n\r\n    private static _instance:cc.Node = null;\r\n    static show()\r\n    {\r\n        if(!ShopLayer._instance)\r\n        {\r\n            Utils.createUI(\"prefab/ShopLayer\")\r\n        }\r\n        else\r\n        {\r\n            ShopLayer._instance.active = true;\r\n            ShopLayer._instance.getComponent(ShopLayer).reLoad();\r\n        }\r\n    }\r\n\r\n    list = null;\r\n    start () {\r\n        ShopLayer._instance = this.node;\r\n        this.list = DB_plant\r\n        this.reLoad();\r\n        this.rigester(GameConst.BUY_PLANT,(gun:any,listid:number)=>{\r\n            this.GetGameObject(\"ScrollView\").getComponent(List).updateAppointed(listid);\r\n        })\r\n\r\n        this.rigester(GameConst.NEW_PLANT,()=>{\r\n            this.reLoad();\r\n        })\r\n    }\r\n\r\n    reLoad()\r\n    {\r\n        this.list = DB_plant;\r\n        this.GetGameObject(\"ScrollView\").getComponent(List).numItems = this.list.length;\r\n        var index = Math.max(0,Data.user.GetMaxLv() - 5);\r\n        this.GetGameObject(\"ScrollView\").getComponent(List).scrollTo(index,0.2);\r\n    }\r\n\r\n    onBtnClicked(event,c)\r\n    {\r\n        AudioMgr.Instance().playSFX(\"click\");\r\n        this.node.active = false;\r\n    }\r\n    \r\n    onListRender(item: cc.Node, idx: number) {\r\n        item.getComponent(ShopItem).setItemData(this.list[idx]);\r\n    }\r\n}\r\n"]}