{"version":3,"sources":["assets\\script\\game\\prefab\\RecordView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport ChickData from \"../../manager/ChickData\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RecordView extends BaseUI {\r\n\r\n    start()\r\n    {\r\n        this.GetButton(\"btn_share\").interactable = false;\r\n        this.node.runAction(cc.sequence(cc.delayTime(0.5),cc.callFunc(()=>{\r\n            this.GetButton(\"btn_share\").interactable = true;\r\n        })))\r\n    }\r\n    res: any = null;\r\n\r\n    setData(res) {\r\n        this.res = res;\r\n    }\r\n\r\n    onUIClicked(event: cc.Event, customEventData) {\r\n        super.onUIClicked(event, customEventData);\r\n        AudioMgr.Instance().playMX(\"click\");\r\n        var btnName = event.target.name;\r\n        switch (btnName) {\r\n            case \"btn_share\":\r\n                window[\"tt\"].shareAppMessage({\r\n                    channel: 'video',\r\n                    title: '',\r\n                    imageUrl: '',\r\n                    query: '',\r\n                    extra: {\r\n                        videoPath: this.res.videoPath// 可用录屏得到的视频地址\r\n                    },\r\n                    success() {\r\n                        // console.log('分享视频成功');\r\n                        AudioMgr.Instance().playMX(\"gem\");\r\n                        Utils.flyAnim(1, cc.find(\"Canvas\"),\"icon_gem\",Utils.getRandomInt(2,3),85,(b)=>{\r\n                            if(b)\r\n                                ChickData.user.gem += 2;\r\n                        })\r\n                        \r\n                    },\r\n                    fail(e) {\r\n                        // console.log('分享视频失败');\r\n                    }\r\n                })\r\n                \r\n                this.closeUI();\r\n                break;\r\n            case \"btn_save\":\r\n                window[\"tt\"].saveVideoToPhotosAlbum({\r\n                    filePath: this.res.videoPath,\r\n                    success(res) {\r\n                        window[\"tt\"].showToast({\r\n                            title: '保存成功'\r\n                        })\r\n                        AudioMgr.Instance().playMX(\"gem\");\r\n                        Utils.flyAnim(1, cc.find(\"Canvas\"),\"icon_gem\",Utils.getRandomInt(2,3),85,(b)=>{\r\n                            if(b)\r\n                                ChickData.user.gem += 2;\r\n                        })\r\n                    },\r\n                    fail(res) {\r\n                        window[\"tt\"].showToast({\r\n                            title: '保存失败'\r\n                        })\r\n                    }\r\n                });\r\n                this.closeUI();\r\n                break;\r\n            case \"btn_close\":\r\n                this.closeUI();\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n"]}