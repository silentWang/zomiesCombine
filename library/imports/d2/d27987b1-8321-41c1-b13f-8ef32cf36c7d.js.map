{"version":3,"sources":["assets\\script\\game\\prefab\\ShopView.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAC3C,4CAAuC;AACvC,qDAAgD;AAChD,mDAA8C;AAC9C,iDAA4C;AAC5C,2CAAsC;AACtC,oCAAyC;AACzC,0CAAqC;AACrC,uCAAkC;AAE5B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAM;IAA5C;QAAA,qEAmDC;QAlCG,UAAI,GAAG,IAAI,CAAC;;IAkChB,CAAC;iBAnDoB,QAAQ;IAIlB,aAAI,GAAX;QAEI,IAAG,CAAC,UAAQ,CAAC,SAAS,EACtB;YACI,eAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAA;SACrC;aAED;YACI,UAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;YACjC,UAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,UAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;SACtD;IACL,CAAC;IAGD,wBAAK,GAAL;QAAA,iBAYC;QAXG,kBAAQ,CAAC,SAAS,CAAC,UAAU,EAAC,MAAM,CAAC,CAAC;QACtC,UAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,IAAI,GAAG,qBAAY,CAAA;QACxB,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,mBAAS,CAAC,SAAS,EAAC,UAAC,GAAO,EAAC,MAAa;YACpD,KAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,cAAI,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAChF,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,QAAQ,CAAC,mBAAS,CAAC,SAAS,EAAC;YAC9B,KAAI,CAAC,MAAM,EAAE,CAAC;QAClB,CAAC,CAAC,CAAA;IACN,CAAC;IAED,yBAAM,GAAN;QAEI,IAAI,CAAC,IAAI,GAAG,qBAAY,CAAC;QACzB,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QAC7C,IAAI,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,cAAI,CAAC,CAAC;QACpC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QACjC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,mBAAS,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;IAC7B,CAAC;IAED,8BAAW,GAAX,UAAY,KAAK,EAAC,CAAC;QAEf,kBAAQ,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED,+BAAY,GAAZ,UAAa,IAAa,EAAE,GAAW;QACnC,IAAI,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IAChE,CAAC;;IA/Cc,kBAAS,GAAW,IAAI,CAAC;IAHvB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAmD5B;IAAD,eAAC;CAnDD,AAmDC,CAnDqC,gBAAM,GAmD3C;kBAnDoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport List from \"../../framwork/List\";\r\nimport ChickData from \"../../manager/ChickData\";\r\nimport WxCenter from \"../../manager/WxCenter\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { Config_chick } from \"../Config\";\r\nimport GameConst from \"../GameConst\";\r\nimport ShopItem from \"./ShopItem\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ShopView extends BaseUI{\r\n\r\n\r\n    private static _instance:cc.Node = null;\r\n    static show()\r\n    {\r\n        if(!ShopView._instance)\r\n        {\r\n            Utils.createUI(\"prefab/ShopLayer\")\r\n        }\r\n        else\r\n        {\r\n            ShopView._instance.active = true;\r\n            ShopView._instance.getComponent(ShopView).reLoad();\r\n        }\r\n    }\r\n\r\n    list = null;\r\n    start () {\r\n        WxCenter.aldReport('ShopShow','show');\r\n        ShopView._instance = this.node;\r\n        this.list = Config_chick\r\n        this.reLoad();\r\n        this.rigester(GameConst.BUY_CHICK,(gun:any,listid:number)=>{\r\n            this.GetGameObject(\"ScrollView\").getComponent(List).updateAppointed(listid);\r\n        })\r\n\r\n        this.rigester(GameConst.NEW_CHICK,()=>{\r\n            this.reLoad();\r\n        })\r\n    }\r\n\r\n    reLoad()\r\n    {\r\n        this.list = Config_chick;\r\n        let sview = this.GetGameObject(\"ScrollView\");\r\n        let list = sview.getComponent(List);\r\n        list.numItems = this.list.length;\r\n        var index = Math.max(0,ChickData.user.getLvlMax() - 5);\r\n        list.scrollTo(index,0.2);\r\n    }\r\n\r\n    onUIClicked(event,c)\r\n    {\r\n        AudioMgr.Instance().playMX(\"click\");\r\n        this.node.active = false;\r\n    }\r\n    \r\n    onListRender(item: cc.Node, idx: number) {\r\n        item.getComponent(ShopItem).setShopItemData(this.list[idx]);\r\n    }\r\n}\r\n"]}