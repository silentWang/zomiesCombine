{"version":3,"sources":["assets\\script\\manager\\Data.ts"],"names":[],"mappings":";;;;;;AACA,+CAA0C;AAC1C,wCAAmC;AACnC,8CAAyC;AACzC,+CAA0C;AAE1C;IAAA;IAqCA,CAAC;IAlCiB,SAAI,GAAlB,UAAoB,OAAwB;QAAxB,wBAAA,EAAA,eAAwB;QACxC,IAAI,GAAG,GAAG,EAAE,CAAA;QACZ,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAA;QACvC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;QAE3B,OAAO;QACP,sBAAsB;QACtB,yCAAyC;QACzC,4EAA4E;QAC5E,SAAS;QACT,IAAI;IACR,CAAC;IACa,aAAQ,GAAtB;QACI,IAAI,SAAS,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,mBAAS,CAAC,cAAc,CAAC,CAAC;QACtE,IAAI,SAAS,EAAE;YACX,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAClC,iCAAiC;YACjC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAA;SACvC;aACI;YACD,aAAa;YACb,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;YAC5C,kBAAQ,CAAC,QAAQ,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC;YAClC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC;SACrC;IACL,CAAC;IAED,OAAO;IACQ,aAAQ,GAAvB,UAAwB,IAAI,EAAE,OAAwB;QAAxB,wBAAA,EAAA,eAAwB;QAClD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,eAAK,CAAC,aAAa,EAAE,CAAC,CAAC;QACnE,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACnC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,mBAAS,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;IACnE,CAAC;IAnCa,SAAI,GAAc,IAAI,mBAAS,EAAE,CAAC;IAoCpD,WAAC;CArCD,AAqCC,IAAA;kBArCoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["\r\nimport UserModel from \"../game/UserModel\";\r\nimport Utils from \"../utils/Utils\";\r\nimport AudioMgr from \"../utils/AudioMgr\";\r\nimport GameConst from \"../game/GameConst\";\r\n\r\nexport default class Data {\r\n    public static user: UserModel = new UserModel();\r\n\r\n    public static save( bRemote: boolean = false) {\r\n        var obj = {}\r\n        obj['user'] = Data.user.getUploadData()\r\n        Data.savedata(obj, bRemote)\r\n\r\n        //上传服务器\r\n        // if (window[\"wx\"]) {\r\n        //     window[\"wx\"].setUserCloudStorage({\r\n        //         KVDataList: [{ key: \"lv\", value: Math.floor(this.user.lv) + \"\" }]\r\n        //     })\r\n        // }\r\n    }\r\n    public static loadData() {\r\n        var localdata = cc.sys.localStorage.getItem(GameConst.local_data_key);\r\n        if (localdata) {\r\n            localdata = JSON.parse(localdata);\r\n            // console.log('本地数据', localdata)\r\n            Data.user.setData(localdata['user'])\r\n        }\r\n        else {\r\n            //没有档案重置下音乐开关\r\n            cc.sys.localStorage.setItem(\"bgmVolume\", 1);\r\n            cc.sys.localStorage.setItem(\"sfxVolume\", 1);\r\n            AudioMgr.Instance().sfxVolume = 1;\r\n            AudioMgr.Instance().bgmVolume = 1;\r\n        }\r\n    }\r\n\r\n    //本地存数据\r\n    private static savedata(data, bRemote: boolean = false) {\r\n        cc.sys.localStorage.setItem(\"savedatatime\", Utils.getServerTime());\r\n        var strdata = JSON.stringify(data);\r\n        cc.sys.localStorage.setItem(GameConst.local_data_key, strdata);\r\n    }\r\n}"]}