{"version":3,"sources":["assets/script/game/prefab/NewChickUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\nimport AdCenter from \"../../manager/AdCenter\";\nimport ChickData from \"../../manager/ChickData\";\nimport AudioMgr from \"../../utils/AudioMgr\";\nimport Utils from \"../../utils/Utils\";\nimport { Config_chick } from \"../Config\";\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewChickUI extends BaseUI {\n\n    private coin = 0;\n    async start () {\n        let lv = ChickData.user.getLvlMax()\n        let coin = ChickData.user.buyChickPrice(Math.max(1,lv-3));\n        this.SetText('lbl_name',Config_chick[lv - 1][7] + '');\n        this.SetText(\"lbl_lv\",\"等级 \"+lv);\n        AudioMgr.Instance().playMX(\"unlock_plant\")\n        this.coin = coin;\n        this.SetText(\"lbl_coin\",Utils.formatNumber(coin));\n        let skpath = `spine:flower${lv}_ske`;\n        let atlaspath = `spine:flower${lv}_tex`;\n        let armature = this.GetDragonAmature(\"chick\");\n        armature.dragonAsset = await Utils.loadRes(skpath,dragonBones.DragonBonesAsset) as dragonBones.DragonBonesAsset;\n        armature.dragonAtlasAsset = await Utils.loadRes(atlaspath,dragonBones.DragonBonesAtlasAsset) as dragonBones.DragonBonesAtlasAsset;\n        armature.armatureName = \"Armature\";\n        armature.playAnimation('idleL',0);\n        AdCenter.Instance().showGridAd();\n    }\n\n    onDestroy()\n    {\n        AdCenter.Instance().hideGridAd();\n        super.onDestroy();\n    }\n\n    onUIClicked(event, customEventData) {\n        var btnName = event.target.name;\n        AudioMgr.Instance().playMX(\"click\");\n        switch (btnName) {\n            case \"btn_get\":\n                {\n                    let coin = this.coin\n                    AudioMgr.Instance().playMX(\"coin\");\n                    Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\n                        if(b)\n                        {\n                            ChickData.user.coin += coin;\n                        }  \n                    })\n                    this.closeUI();\n                }\n                break;\n        }\n    }\n}\n"]}