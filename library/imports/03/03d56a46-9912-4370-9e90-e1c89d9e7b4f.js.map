{"version":3,"sources":["assets\\script\\game\\prefab\\NewChickUI.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAC3C,mDAA8C;AAC9C,qDAAgD;AAChD,iDAA4C;AAC5C,2CAAsC;AACtC,oCAAyC;AAGnC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAwC,8BAAM;IAA9C;QAAA,qEA8CC;QA5CW,UAAI,GAAG,CAAC,CAAC;;IA4CrB,CAAC;IA3CS,0BAAK,GAAX;;;;;;wBACQ,EAAE,GAAG,mBAAS,CAAC,IAAI,CAAC,SAAS,EAAE,CAAA;wBAC/B,IAAI,GAAG,mBAAS,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;wBAC1D,IAAI,CAAC,OAAO,CAAC,UAAU,EAAC,qBAAY,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;wBACtD,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAC,KAAK,GAAC,EAAE,CAAC,CAAC;wBAChC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;wBAC1C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;wBACjB,IAAI,CAAC,OAAO,CAAC,UAAU,EAAC,eAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;wBAC9C,MAAM,GAAG,iBAAe,EAAE,SAAM,CAAC;wBACjC,SAAS,GAAG,iBAAe,EAAE,SAAM,CAAC;wBACpC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;wBAC9C,KAAA,QAAQ,CAAA;wBAAe,qBAAM,eAAK,CAAC,OAAO,CAAC,MAAM,EAAC,WAAW,CAAC,gBAAgB,CAAC,EAAA;;wBAA/E,GAAS,WAAW,IAAG,SAAwF,CAAA,CAAC;wBAChH,KAAA,QAAQ,CAAA;wBAAoB,qBAAM,eAAK,CAAC,OAAO,CAAC,SAAS,EAAC,WAAW,CAAC,qBAAqB,CAAC,EAAA;;wBAA5F,GAAS,gBAAgB,IAAG,SAAqG,CAAA,CAAC;wBAClI,QAAQ,CAAC,YAAY,GAAG,UAAU,CAAC;wBACnC,QAAQ,CAAC,aAAa,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;wBAClC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;;;;;KACpC;IAED,8BAAS,GAAT;QAEI,kBAAQ,CAAC,QAAQ,EAAE,CAAC,UAAU,EAAE,CAAC;QACjC,iBAAM,SAAS,WAAE,CAAC;IACtB,CAAC;IAED,gCAAW,GAAX,UAAY,KAAK,EAAE,eAAe;QAC9B,IAAI,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC;QAChC,kBAAQ,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACpC,QAAQ,OAAO,EAAE;YACb,KAAK,SAAS;gBACV;oBACI,IAAI,MAAI,GAAG,IAAI,CAAC,IAAI,CAAA;oBACpB,kBAAQ,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;oBACnC,eAAK,CAAC,OAAO,CAAC,CAAC,EAAC,IAAI,CAAC,IAAI,EAAC,WAAW,EAAC,eAAK,CAAC,YAAY,CAAC,CAAC,EAAC,EAAE,CAAC,EAAC,GAAG,EAAC,UAAC,CAAC;wBACjE,IAAG,CAAC,EACJ;4BACI,mBAAS,CAAC,IAAI,CAAC,IAAI,IAAI,MAAI,CAAC;yBAC/B;oBACL,CAAC,CAAC,CAAA;oBACF,IAAI,CAAC,OAAO,EAAE,CAAC;iBAClB;gBACD,MAAM;SACb;IACL,CAAC;IA7CgB,UAAU;QAD9B,OAAO;OACa,UAAU,CA8C9B;IAAD,iBAAC;CA9CD,AA8CC,CA9CuC,gBAAM,GA8C7C;kBA9CoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport AdCenter from \"../../manager/AdCenter\";\r\nimport ChickData from \"../../manager/ChickData\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { Config_chick } from \"../Config\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewChickUI extends BaseUI {\r\n\r\n    private coin = 0;\r\n    async start () {\r\n        let lv = ChickData.user.getLvlMax()\r\n        let coin = ChickData.user.buyChickPrice(Math.max(1,lv-3));\r\n        this.SetText('lbl_name',Config_chick[lv - 1][7] + '');\r\n        this.SetText(\"lbl_lv\",\"等级 \"+lv);\r\n        AudioMgr.Instance().playMX(\"unlock_plant\")\r\n        this.coin = coin;\r\n        this.SetText(\"lbl_coin\",Utils.formatNumber(coin));\r\n        let skpath = `spine:flower${lv}_ske`;\r\n        let atlaspath = `spine:flower${lv}_tex`;\r\n        let armature = this.GetDragonAmature(\"chick\");\r\n        armature.dragonAsset = await Utils.loadRes(skpath,dragonBones.DragonBonesAsset) as dragonBones.DragonBonesAsset;\r\n        armature.dragonAtlasAsset = await Utils.loadRes(atlaspath,dragonBones.DragonBonesAtlasAsset) as dragonBones.DragonBonesAtlasAsset;\r\n        armature.armatureName = \"Armature\";\r\n        armature.playAnimation('idleL',0);\r\n        AdCenter.Instance().showGridAd();\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        AdCenter.Instance().hideGridAd();\r\n        super.onDestroy();\r\n    }\r\n\r\n    onUIClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        AudioMgr.Instance().playMX(\"click\");\r\n        switch (btnName) {\r\n            case \"btn_get\":\r\n                {\r\n                    let coin = this.coin\r\n                    AudioMgr.Instance().playMX(\"coin\");\r\n                    Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\r\n                        if(b)\r\n                        {\r\n                            ChickData.user.coin += coin;\r\n                        }  \r\n                    })\r\n                    this.closeUI();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}