{"version":3,"sources":["assets\\script\\manager\\WxCenter.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import MsgHints from \"../framwork/MsgHints\";\r\n\r\nexport default class WxCenter {\r\n    private static wx:any;\r\n    static init(){\r\n        this.wx = window && window['wx'];\r\n        if(!this.wx) return;\r\n        this.wx.onShareAppMessage(function () {\r\n            // 用户点击了“转发”按钮\r\n            return {\r\n              title: '欢迎加入吃鸡小分队'\r\n            }\r\n        })\r\n    }\r\n    //主动\r\n    static shareAppMessage(callback:Function = null){\r\n        if(!this.wx) return;\r\n        this.wx.shareAppMessage({\r\n            title: '欢迎加入吃鸡小分队'\r\n        });\r\n        if(!callback) return;\r\n        callback['keys'] = new Date().getTime();\r\n        this.wx.onShow(()=>{\r\n            let now = new Date().getTime();\r\n            if(now - callback['keys'] >= 3000){\r\n                callback();\r\n            }\r\n            callback = null;\r\n        })\r\n    }\r\n    \r\n    static showBanner(){\r\n        if(!this.wx) return;\r\n        let wx = this.wx;\r\n        let bannerAd = wx.createBannerAd({\r\n            adUnitId: 'xxxx',\r\n            style: {\r\n              left: 10,\r\n              top: 76,\r\n              width: 320,\r\n              adIntervals:30,\r\n            }\r\n          })\r\n        bannerAd.show();\r\n        bannerAd.onError(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    static showRewardedVideoAd(callback:Function = null){\r\n        if(!this.wx) {\r\n            MsgHints.show(\"假装看了一个广告\");\r\n            console.log('假装看了一个广告')\r\n            callback && callback(true);\r\n            return;\r\n        }\r\n        callback && callback(true);\r\n        let wx = this.wx;\r\n        let rewardedVideoAd = wx.createRewardedVideoAd({ adUnitId: 'xxxx' });\r\n        rewardedVideoAd.onError(err => {\r\n            console.log(err);\r\n            //重新拉取\r\n            rewardedVideoAd.load().then(() => rewardedVideoAd.show())\r\n        });\r\n        rewardedVideoAd.show().then(res=>{\r\n            // console.log('激励视频 广告显示')\r\n        });\r\n        rewardedVideoAd.onClose(res => {\r\n            // 用户点击了【关闭广告】按钮\r\n            // 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n            if (res && res.isEnded || res === undefined) {\r\n              // 正常播放结束，可以下发游戏奖励\r\n              callback && callback(true);\r\n            }\r\n            else {\r\n                // 播放中途退出，不下发游戏奖励\r\n            }\r\n        })\r\n    } \r\n\r\n}"]}