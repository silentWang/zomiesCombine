{"version":3,"sources":["assets\\script\\game\\SlotItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6CAAwC;AACxC,wCAAmC;AACnC,2BAA+B;AAMzB,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAM;IAA5C;QAAA,qEA6EC;QAjBW,WAAK,GAAG,CAAC,CAAC;;IAiBtB,CAAC;iBA7EoB,QAAQ;IAElB,mBAAU,GAAjB;QAEI,IAAI,OAAO,GAAG,CAAC,CAAC,CAAA;QAChB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAE,EAAC,EAAE,CAAC,EACxB;YACI,IAAG,cAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,EAC1B;gBACI,OAAO,GAAG,CAAC,CAAC;gBACZ,MAAM;aACT;SACJ;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,+BAAY,GAAZ,UAAa,KAAK,EAAE,eAAe;QAC/B,uCAAuC;QACvC,2BAA2B;QAC3B,8BAA8B;QAC9B,IAAI;QACJ,0CAA0C;QAC1C,cAAc;QACd,IAAI;QAEJ,oCAAoC;QACpC,gBAAgB;QAChB,IAAI;QACJ,kDAAkD;QAClD,QAAQ;QACR,iCAAiC;QACjC,iBAAiB;QACjB,QAAQ;QACR,IAAI;QACJ,OAAO;QACP,IAAI;QACJ,iDAAiD;QACjD,QAAQ;QACR,iCAAiC;QACjC,iBAAiB;QACjB,QAAQ;QACR,IAAI;QAEJ,gCAAgC;QAChC,gBAAgB;QAChB,IAAI;QACJ,+CAA+C;QAC/C,IAAI;QACJ,OAAO;QACP,IAAI;QACJ,8CAA8C;QAC9C,IAAI;QACJ,8BAA8B;QAC9B,4BAA4B;QAC5B,eAAe;QACf,8CAA8C;QAC9C,6BAA6B;IACjC,CAAC;IAID,2BAAQ,GAAR,UAAS,CAAC;QAEN,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,OAAO,CAAC,WAAW,EAAC,CAAC,GAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,OAAO,GAAG,UAAQ,CAAC,UAAU,EAAE,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,GAAC,CAAC,IAAE,OAAO,IAAI,OAAO,IAAG,CAAC,CAAC,CAAC;QAEvF,yDAAyD;QACzD,gDAAgD;QAChD,IAAI,IAAI,GAAG,cAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,CAAC;QACnD,IAAI,GAAG,GAAO,YAAO,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,KAAK,WAAG,CAAC;QACpC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAC,GAAG,CAAC,CAAC;IACtC,CAAC;;IA5EgB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA6E5B;IAAD,eAAC;CA7ED,AA6EC,CA7EqC,gBAAM,GA6E3C;kBA7EoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from '../framwork/BaseUI';\r\nimport Data from '../manager/Data';\r\nimport { DB_slot } from './DB';\r\nimport Utils from '../utils/Utils';\r\nimport MsgHints from '../framwork/MsgHints';\r\nimport GameConst from './GameConst';\r\nimport HallScene from './HallScene';\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SlotItem extends BaseUI {\r\n\r\n    static getCurOpen()\r\n    {\r\n        let curopen = -1\r\n        for(var i = 1;i < 12;++i)\r\n        {\r\n            if(Data.user.slots[i] == 0)\r\n            {\r\n                curopen = i;\r\n                break;\r\n            }\r\n        }\r\n        return curopen;\r\n    }\r\n\r\n    onBtnClicked(event, customEventData) {\r\n        // let curopen = SlotItem.getCurOpen();\r\n        // if(curopen == -1)return;\r\n        // if(this.index-1 > curopen )\r\n        // {\r\n        //     MsgHints.show(\"需要先解锁\"+(curopen+1));\r\n        //     return;\r\n        // }\r\n\r\n        // let type = DB_slot[curopen].type;\r\n        // if(type == 0)\r\n        // {\r\n        //     if(Data.user.coin < DB_slot[curopen].price)\r\n        //     {\r\n        //         MsgHints.show(\"金币不足\");\r\n        //         return\r\n        //     }\r\n        // }\r\n        // else\r\n        // {\r\n        //     if(Data.user.gem < DB_slot[curopen].price)\r\n        //     {\r\n        //         MsgHints.show(\"钻石不足\");\r\n        //         return\r\n        //     }\r\n        // }\r\n\r\n        // Data.user.slots[curopen] = 1;\r\n        // if(type == 0)\r\n        // {\r\n        //     Data.user.coin -= DB_slot[curopen].price\r\n        // }\r\n        // else\r\n        // {\r\n        //     Data.user.gem -= DB_slot[curopen].price\r\n        // }\r\n        // console.log(\"解锁土地\",curopen)\r\n        // MsgHints.show(\"成功解锁新位置\");\r\n        // Data.save();\r\n        // this.dispatch(GameConst.OPEN_SLOT,curopen);\r\n        // this.setIndex(this.index);\r\n    }\r\n\r\n\r\n    private index = 0;\r\n    setIndex(i)\r\n    {\r\n        this.index = i;\r\n        this.SetText(\"lbl_index\",i+\"\");\r\n        let curopen = SlotItem.getCurOpen();\r\n        this.node.getComponent(cc.Button).interactable = this.index-1>=curopen && curopen !=-1;\r\n\r\n        // this.GetSkeleton(\"fx_slot\").setAnimation(0,\"buy\",true)\r\n        // this.GetGameObject(\"fx_slot\").active = false;\r\n        let info = Data.user.slots[i-1];\r\n        this.GetGameObject(\"lock\").active = info == 0;\r\n        this.GetGameObject(\"lbl_index\").active = info == 0;\r\n        this.GetGameObject(\"node_cost\").active = info == 0;\r\n        let str  = `${DB_slot[i-1].price}关`;\r\n        this.SetText(\"lbl_open_cost\",str);\r\n    }\r\n}\r\n"]}