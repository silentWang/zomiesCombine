{"version":3,"sources":["assets/script/game/prefab/SettingView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\nimport AdCenter from \"../../manager/AdCenter\";\nimport ChickData from \"../../manager/ChickData\";\nimport AudioMgr from \"../../utils/AudioMgr\";\nimport Utils from \"../../utils/Utils\";\n\n\nconst { ccclass, property } = cc._decorator;\n\nconst wx = window[\"wx\"] || window[\"tt\"] || window[\"qq\"]\n@ccclass\nexport default class SettingView extends BaseUI {\n\n    btn_music: cc.Node = null;\n    btn_music_close: cc.Node = null;\n\n    btn_sound: cc.Node = null;\n    btn_sound_close: cc.Node = null;\n\n    async start() {\n        AdCenter.Instance().showGridAd();\n\n        // AudioMgr.Instance().playSFX(\"ui_open_popup_1\");\n        this.btn_music = this.GetGameObject(\"btn_music_on\");\n        this.btn_music_close = this.GetGameObject(\"btn_music_off\");\n\n        this.btn_sound = this.GetGameObject(\"btn_sound_on\");\n        this.btn_sound_close = this.GetGameObject(\"btn_sound_off\");\n\n        this.btn_music.active = AudioMgr.Instance().bgmVolume == 1;\n        this.btn_music_close.active = AudioMgr.Instance().bgmVolume == 0;\n\n        this.btn_sound.active = AudioMgr.Instance().sfxVolume == 1;\n        this.btn_sound_close.active = AudioMgr.Instance().sfxVolume == 0;\n\n       \n    }\n\n    private server_data = null;\n\n    onDestroy() {\n        AdCenter.Instance().hideGridAd();\n        if (this.wxButton) this.wxButton.destroy();\n        super.onDestroy();\n    }\n\n    public wxButton = null;\n    createAuthorizeBtn(btnNode: cc.Node) { //创建微信反馈按钮\n        let btnSize = cc.size(btnNode.width, btnNode.height);\n        let frameSize = cc.view.getFrameSize();\n        let winSize = cc.director.getWinSize();\n        // console.log(\"winSize: \",winSize);\n        // console.log(\"frameSize: \",frameSize);\n        //适配不同机型来创建微信授权按钮\n        let left = (winSize.width * 0.5 + btnNode.x - btnSize.width * 0.5) / winSize.width * frameSize.width;\n        let top = (winSize.height * 0.5 - btnNode.y - btnSize.height * 0.5) / winSize.height * frameSize.height;\n        let width = btnSize.width / winSize.width * frameSize.width;\n        let height = btnSize.height / winSize.height * frameSize.height;\n        // console.log(\"button pos: \",cc.v2(left,top));\n        // console.log(\"button size: \",cc.size(width,height));\n        // console.log(left,top,width,height);\n        this.wxButton = wx.createFeedbackButton({\n            type: 'text',\n            text: '',\n            style: {\n                left: left,\n                top: top,\n                width: width,\n                height: height,\n                lineHeight: 20,\n                backgroundColor: '',\n                color: '#ffffff',\n                textAlign: 'center',\n                fontSize: 16,\n                borderRadius: 4\n            }\n        });\n        this.wxButton.onTap((uinfo) => {\n            this.closeUI();\n        });\n    }\n\n    onUIClicked(event, customEventData) {\n        var btnName = event.target.name;\n        AudioMgr.Instance().playMX(\"click\");\n        switch (btnName) {\n            case \"btn_back\":\n                this.closeUI()\n                break;\n            case \"btn_music_on\":\n            case \"btn_music_off\":\n                this.btn_music.active = !this.btn_music.active;\n                this.btn_music_close.active = !this.btn_music_close.active;\n                AudioMgr.Instance().setMusicVolume(this.btn_music.active ? 1 : 0, true);\n                // AudioMgr.Instance().setSFXVolume(this.btn_music.active ? 1 : 0, true);\n                break;\n            case \"btn_sound_on\":\n            case \"btn_sound_off\":\n                this.btn_sound.active = !this.btn_sound.active;\n                this.btn_sound_close.active = !this.btn_sound_close.active;\n                AudioMgr.Instance().setMXVolume(this.btn_sound.active ? 1 : 0, true);\n                // AudioMgr.Instance().setSFXVolume(this.btn_music.active ? 1 : 0, true);\n                break;\n            case \"btn_share\":\n                Utils.wxShare();\n                break;\n            case \"btn_download\":\n                ChickData.user.setData(this.server_data['user'])\n                this.closeUI();\n                ChickData.save();\n                cc.director.loadScene(\"hall\")\n                break;\n\n        }\n    }\n}\n"]}