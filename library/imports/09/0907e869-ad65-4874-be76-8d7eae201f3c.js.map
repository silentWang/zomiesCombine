{"version":3,"sources":["assets\\script\\game\\prefab\\SettingView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport AdCenter from \"../../manager/AdCenter\";\r\nimport ChickData from \"../../manager/ChickData\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport Native from \"../../utils/Native\";\r\nimport Utils from \"../../utils/Utils\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst wx = window[\"wx\"] || window[\"tt\"] || window[\"qq\"]\r\n@ccclass\r\nexport default class SettingView extends BaseUI {\r\n\r\n    btn_music: cc.Node = null;\r\n    btn_music_close: cc.Node = null;\r\n\r\n    btn_sound: cc.Node = null;\r\n    btn_sound_close: cc.Node = null;\r\n\r\n    async start() {\r\n        AdCenter.Instance().showGridAd();\r\n\r\n        // AudioMgr.Instance().playSFX(\"ui_open_popup_1\");\r\n        this.btn_music = this.GetGameObject(\"btn_music_on\");\r\n        this.btn_music_close = this.GetGameObject(\"btn_music_off\");\r\n\r\n        this.btn_sound = this.GetGameObject(\"btn_sound_on\");\r\n        this.btn_sound_close = this.GetGameObject(\"btn_sound_off\");\r\n\r\n        this.btn_music.active = AudioMgr.Instance().bgmVolume == 1;\r\n        this.btn_music_close.active = AudioMgr.Instance().bgmVolume == 0;\r\n\r\n        this.btn_sound.active = AudioMgr.Instance().sfxVolume == 1;\r\n        this.btn_sound_close.active = AudioMgr.Instance().sfxVolume == 0;\r\n\r\n       \r\n    }\r\n\r\n    private server_data = null;\r\n\r\n    onDestroy() {\r\n        AdCenter.Instance().hideGridAd();\r\n        if (this.wxButton) this.wxButton.destroy();\r\n        super.onDestroy();\r\n    }\r\n\r\n    public wxButton = null;\r\n    createAuthorizeBtn(btnNode: cc.Node) { //创建微信反馈按钮\r\n        let btnSize = cc.size(btnNode.width, btnNode.height);\r\n        let frameSize = cc.view.getFrameSize();\r\n        let winSize = cc.director.getWinSize();\r\n        // console.log(\"winSize: \",winSize);\r\n        // console.log(\"frameSize: \",frameSize);\r\n        //适配不同机型来创建微信授权按钮\r\n        let left = (winSize.width * 0.5 + btnNode.x - btnSize.width * 0.5) / winSize.width * frameSize.width;\r\n        let top = (winSize.height * 0.5 - btnNode.y - btnSize.height * 0.5) / winSize.height * frameSize.height;\r\n        let width = btnSize.width / winSize.width * frameSize.width;\r\n        let height = btnSize.height / winSize.height * frameSize.height;\r\n        // console.log(\"button pos: \",cc.v2(left,top));\r\n        // console.log(\"button size: \",cc.size(width,height));\r\n        // console.log(left,top,width,height);\r\n        this.wxButton = wx.createFeedbackButton({\r\n            type: 'text',\r\n            text: '',\r\n            style: {\r\n                left: left,\r\n                top: top,\r\n                width: width,\r\n                height: height,\r\n                lineHeight: 20,\r\n                backgroundColor: '',\r\n                color: '#ffffff',\r\n                textAlign: 'center',\r\n                fontSize: 16,\r\n                borderRadius: 4\r\n            }\r\n        });\r\n        this.wxButton.onTap((uinfo) => {\r\n            this.closeUI();\r\n        });\r\n    }\r\n\r\n    onUIClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        AudioMgr.Instance().playMX(\"click\");\r\n        switch (btnName) {\r\n            case \"btn_back\":\r\n                this.closeUI()\r\n                break;\r\n            case \"btn_music_on\":\r\n            case \"btn_music_off\":\r\n                this.btn_music.active = !this.btn_music.active;\r\n                this.btn_music_close.active = !this.btn_music_close.active;\r\n                AudioMgr.Instance().setMusicVolume(this.btn_music.active ? 1 : 0, true);\r\n                // AudioMgr.Instance().setSFXVolume(this.btn_music.active ? 1 : 0, true);\r\n                break;\r\n            case \"btn_sound_on\":\r\n            case \"btn_sound_off\":\r\n                this.btn_sound.active = !this.btn_sound.active;\r\n                this.btn_sound_close.active = !this.btn_sound_close.active;\r\n                AudioMgr.Instance().setMXVolume(this.btn_sound.active ? 1 : 0, true);\r\n                // AudioMgr.Instance().setSFXVolume(this.btn_music.active ? 1 : 0, true);\r\n                break;\r\n            case \"btn_share\":\r\n                Utils.wxShare();\r\n                break;\r\n            case \"btn_download\":\r\n                ChickData.user.setData(this.server_data['user'])\r\n                this.closeUI();\r\n                ChickData.save();\r\n                cc.director.loadScene(\"hall\")\r\n                break;\r\n            case \"btnPrivacy\":\r\n                Native.openWebView('https://www.huadcx.com/privacy.html')\r\n                break;\r\n\r\n        }\r\n    }\r\n}\r\n"]}