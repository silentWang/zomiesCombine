{"version":3,"sources":["assets\\script\\game\\prefab\\OfflineAwardUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaseUI from \"../../framwork/BaseUI\";\r\nimport MsgToast from \"../../framwork/MsgToast\";\r\nimport AdCenter from \"../../manager/AdCenter\";\r\nimport ChickData from \"../../manager/ChickData\";\r\nimport AudioMgr from \"../../utils/AudioMgr\";\r\nimport NumberUtils from \"../../utils/NumberUtils\";\r\nimport Utils from \"../../utils/Utils\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class OfflineAwardUI extends BaseUI {\r\n\r\n    private _data: number = 0;\r\n    public get data(): number {\r\n        return this._data;\r\n    }\r\n    public set data(value: number) {\r\n        this._data = value;\r\n        this.GetText('lbl_coin').string = NumberUtils.getLargeString(Utils.fixFloat(value))\r\n    }\r\n\r\n    start() {\r\n        Utils.playBreath(this.GetGameObject('btn_ad'))\r\n        this.addFreeAdEvent()\r\n        this.handleFreeAd();\r\n    }\r\n\r\n    protected handleFreeAd(){\r\n        let isfree = ChickData.isFreeAd;\r\n        this.GetGameObject('icon_video').active = !isfree\r\n        this.GetGameObject('btn_buyfree').active = !isfree\r\n        if(isfree){\r\n            let pos = this.GetGameObject('ad_label').getPosition()\r\n            this.GetGameObject('ad_label').setPosition(new cc.Vec2(0,pos.y))\r\n        }\r\n    }\r\n\r\n    onUIClicked(event, customEventData) {\r\n        var btnName = event.target.name;\r\n        switch (btnName) {\r\n            case \"btn_close\":\r\n                // AudioMgr.Instance().playMX(\"click\");\r\n                let coin = this._data \r\n                AudioMgr.Instance().playMX(\"coin\");\r\n                Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\r\n                    if(b)\r\n                    {\r\n                        ChickData.user.coin += coin\r\n                        ChickData.save();\r\n                    }\r\n                })\r\n                this.closeUI()\r\n                break;\r\n            case \"btn_normal\":\r\n                AudioMgr.Instance().playMX(\"coin\");\r\n                Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\r\n                    if(b) ChickData.user.coin += this._data  \r\n                })\r\n                ChickData.save();\r\n                this.closeUI();\r\n                break\r\n            case \"btn_ad\":\r\n                let func = (b)=>{\r\n                    if (b) {\r\n                        let coin = this._data * 2\r\n                        AudioMgr.Instance().playMX(\"coin\");\r\n                        Utils.flyAnim(0,this.node,\"icon_coin\",Utils.getRandomInt(5,10),100,(b)=>{\r\n                            if(b)\r\n                            {\r\n                                ChickData.user.coin += coin \r\n                                ChickData.save();\r\n                            }  \r\n                        })\r\n                        this.closeUI()\r\n                    }\r\n                }\r\n                AdCenter.Instance().play(func)\r\n                break;\r\n            case \"btn_buyfree\":\r\n                Utils.createUI(\"prefab/MonthCardUI\")\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}